@istest
public class Outlook_DRL_Customer_Scoring_Test {
static testmethod void test(){
        Account acc=new Account();
        acc.Name='Test';
        insert acc;
         Account acc1=new Account();
        acc1.Name='Test1';
        insert acc1;
        Contact con=new Contact();
        con.LastName='Test';
        string last=con.LastName;
        con.AccountId=acc.Id;
        con.Influence_Score__c=1;
        con.Affinity_Score__c=2;
        con.Authority__c=3;
        con.Contact_Role__c='Management';
         insert con;
        Contact con1 = new Contact();
        con1.LastName='Test1';
        string lastone = con1.Contact_Role__c;
        con1.Contact_Role__c = 'Management';
        con1.AccountId=acc.id;
        insert con1;
        Contact con2 = new Contact();
        con2.LastName='Test2';
        con2.Contact_Role__c = 'Other';
        string lastone1 = con2.Contact_Role__c;
        con2.AccountId=acc1.id;
        insert con2;
         Contact con3 = new Contact();
        con3.LastName='Test4';
        con3.Contact_Role__c = 'Management';
        string lastone4 = 'Test4';
        con3.AccountId=acc1.id;
        insert con3;
        Phoenix_Bid__c bidtest = new  Phoenix_Bid__c();
        bidtest.Phoenix_Approval_Status__c='New';
        bidtest.Phoenix_Contact__c= con.Id;
        bidtest.Phoenix_Customer_Type__c='New';
        bidtest.Phoenix_Bid_Type__c='New Customer';
        insert bidtest;
      Phoenix_Bid__c bidtest111 = new  Phoenix_Bid__c();
        bidtest111.Phoenix_Approval_Status__c='New';
        bidtest111.Phoenix_Contact__c= con.Id;
        bidtest111.Phoenix_Customer_Type__c='New';
        bidtest111.Phoenix_Bid_Type__c='RFP Bids';
        insert bidtest111;
      Phoenix_Bid__c bids = new  Phoenix_Bid__c();
        bids.Phoenix_Approval_Status__c='New';
        bids.Phoenix_Contact__c= con.Id;
        bids.Phoenix_Customer_Type__c='New';
        bids.Phoenix_Bid_Type__c='New Customer';
        insert bids;
        Phoenix_Bid__c bidtest1 = new  Phoenix_Bid__c();
        bidtest1.Phoenix_Approval_Status__c='New';
        bidtest1.Phoenix_Contact__c = con1.id;
        bidtest1.Phoenix_Customer_Type__c='New';
        bidtest1.Phoenix_Bid_Type__c='Price Change';
        insert bidtest1;
        Phoenix_Bid__c bidtest2 = new  Phoenix_Bid__c();
        bidtest2.Phoenix_Approval_Status__c='New';
         bidtest2.Phoenix_Contact__c=con.Id;
        bidtest2.Phoenix_Customer_Type__c='testing';
        bidtest2.Phoenix_Bid_Type__c='New Customer';
        bidtest2.Phoenix_Bid_Name__c = 'Test Bid';
         insert bidtest2;
        Phoenix_Bid_Line_Item__c bdl= new Phoenix_Bid_Line_Item__c();
         bdl.Phoenix_Bid_Status__c='Awarded';
        bdl.Phoenix_DeadNet_TrckGR__c=1;
        bdl.Phoenix_Bid__c=bidtest1.Id;
       bdl.Phoenix_Customer__c=acc.id;
        bdl.Phoenix_Final_Status__c ='Approved';
         bdl.Phoenix_Bid_Line_Item_Approval_Status__c='Closed-Contracts';
        insert bdl;
     Phoenix_Bid_Line_Item__c bdll= new Phoenix_Bid_Line_Item__c();
         bdll.Phoenix_Bid_Status__c='Awarded';
        bdll.Phoenix_DeadNet_TrckGR__c=1;
        bdll.Phoenix_Bid__c=bids.Id;
       bdll.Phoenix_Customer__c=acc.id;
        bdll.Phoenix_Final_Status__c ='Approved';
       //  bdll.Phoenix_Bid_Line_Item_Approval_Status__c='Closed-Contracts';
        insert bdll;
     Phoenix_Bid_Line_Item__c bdl12= new Phoenix_Bid_Line_Item__c();
         bdl12.Phoenix_Bid_Status__c='Awarded';
        bdl12.Phoenix_DeadNet_TrckGR__c=1;
        bdl12.Phoenix_Bid__c=bidtest111.Id;
       bdl12.Phoenix_Customer__c=acc.id;
        bdl12.Phoenix_Final_Status__c ='Approved';
         bdl12.Phoenix_Bid_Line_Item_Approval_Status__c='Closed-Contracts';
        insert bdl12;
        Phoenix_Bid_Line_Item__c bdl2= new Phoenix_Bid_Line_Item__c();
        bdl2.Phoenix_Bid_Status__c='Declined by Customer';
       bdl2.Phoenix_DeadNet_TrckGR__c=2;
        bdl2.Phoenix_Bid__c=bidtest1.Id;
        bdl2.Phoenix_Final_Status__c ='Approved';
        bdl2.Phoenix_Bid_Line_Item_Approval_Status__c='Closed-Contracts';
        insert bdl2;
        Phoenix_Bid_Line_Item__c bdl3= new Phoenix_Bid_Line_Item__c();
        bdl3.Phoenix_Bid_Status__c='Declined by Customer';
        bdl3.Phoenix_DeadNet_TrckGR__c=2;
        bdl3.Phoenix_Bid__c=bidtest.Id;
        bdl3.Phoenix_Final_Status__c ='Approved';
        bdl3.Phoenix_Bid_Line_Item_Approval_Status__c='Closed-Contracts';
        insert bdl3;
        Phoenix_Bid_Line_Item__c bdl4= new Phoenix_Bid_Line_Item__c();
        bdl4.Phoenix_Bid_Status__c='Declined by Customer';
       bdl4.Phoenix_DeadNet_TrckGR__c=2;
        bdl4.Phoenix_Bid__c=bidtest1.Id;
        bdl4.Phoenix_Final_Status__c ='Approved';
        bdl4.Phoenix_Bid_Line_Item_Approval_Status__c='Closed-Contracts';       insert bdl4;
       Phoenix_Bid_Line_Item__c bdl1= new Phoenix_Bid_Line_Item__c();
       bdl1.Phoenix_Bid_Status__c='Declined by Customer';
       bdl1.Phoenix_DeadNet_TrckGR__c=1;
       bdl1.Phoenix_Bid__c=bidtest2.Id;
       bdl1.Phoenix_Bid_Line_Item_Approval_Status__c='Closed-Contracts';       insert bdl1;
        List<Phoenix_Bid_Line_Item__c> bdlList= new List<Phoenix_Bid_Line_Item__c>{bdl,bdl1};
        Phoenix_Bid_Line_Item__c bdline2=new  Phoenix_Bid_Line_Item__c();
        bdline2.Phoenix_Bid__c=bidtest1.Id;
        insert bdline2;
        Phoenix_Bid__c bidtest7 = new  Phoenix_Bid__c();
        bidtest7.Phoenix_Approval_Status__c='New';
        bidtest7.Phoenix_Bid_Type__c='RFP Bids';
        bidtest7.Phoenix_Contact__c = con2.id;
        bidtest7.Phoenix_Customer_Type__c='New';
        insert bidtest7;
          Phoenix_Bid_Line_Item__c bdl7= new Phoenix_Bid_Line_Item__c();
         bdl7.Phoenix_Bid_Status__c='Declined by Customer';
         bdl7.Phoenix_DeadNet_TrckGR__c=1;
        bdl7.Phoenix_Bid__c=bidtest7.Id;
        bdl7.Phoenix_Bid_Line_Item_Approval_Status__c='Closed-Contracts';
        insert bdl7;
    
   Outlook_DRL_Customer_Scoring.getContactScores();
        Outlook_DRL_Customer_Scoring.updateInfluenceScore(con, 2);
        Outlook_DRL_Customer_Scoring.updateAffinityScore(con, 3);
        Outlook_DRL_Customer_Scoring.updateAuthScore(con,2);
        Outlook_DRL_Customer_Scoring.getBids(con, 2);
        Outlook_DRL_Customer_Scoring.getContactScores();
        Outlook_DRL_Customer_Scoring.updateInfluenceScore(con1, 2);
        Outlook_DRL_Customer_Scoring.updateAffinityScore(con1, 3);
        Outlook_DRL_Customer_Scoring.updateAuthScore(con1,2);
        Outlook_DRL_Customer_Scoring.getBids(con1, 2);
         Outlook_DRL_Customer_Scoring.getContactScores();
        Outlook_DRL_Customer_Scoring.updateInfluenceScore(con2, 3);
        Outlook_DRL_Customer_Scoring.updateAffinityScore(con2, 3);
        Outlook_DRL_Customer_Scoring.updateAuthScore(con2,2);
        Outlook_DRL_Customer_Scoring.getBids(con2, 3);
          Outlook_DRL_Customer_Scoring.getContactScores();
       Outlook_DRL_Customer_Scoring.updateInfluenceScore(con3, 3);
        Outlook_DRL_Customer_Scoring.updateAffinityScore(con3, 3);
        Outlook_DRL_Customer_Scoring.updateAuthScore(con3,2);
        Outlook_DRL_Customer_Scoring.getBids(con3, 3);
    Outlook_DRL_Customer_Scoring.updateContact(con, 'Dep', 'score', 'manager');
    
}
     static testmethod void test2(){
        Account acc=new Account();
        acc.Name='Test';
        insert acc;
         Account acc1=new Account();
        acc1.Name='Test1';
        insert acc1;
        Contact con=new Contact();
        con.LastName='Test';
        string last=con.LastName;
        con.AccountId=acc.Id;
        con.Influence_Score__c=1;
        con.Affinity_Score__c=2;
        con.Authority__c=3;
        con.Contact_Role__c='Management';
         insert con;
        Contact con1 = new Contact();
        con1.LastName='Test1';
        string lastone = con1.Contact_Role__c;
        con1.Contact_Role__c = 'Management';
        con1.AccountId=acc.id;
        insert con1;
        Contact con2 = new Contact();
        con2.LastName='Test2';
        con2.Contact_Role__c = 'Other';
        string lastone1 = con2.Contact_Role__c;
        con2.AccountId=acc1.id;
        insert con2;
         Contact con3 = new Contact();
        con3.LastName='Test4';
        con3.Contact_Role__c = 'Management';
        string lastone4 = 'Test4';
        con3.AccountId=acc1.id;
        insert con3;
        Phoenix_Bid__c bidtest = new  Phoenix_Bid__c();
        bidtest.Phoenix_Approval_Status__c='New';
        bidtest.Phoenix_Contact__c= con.Id;
        bidtest.Phoenix_Customer_Type__c='New';
        bidtest.Phoenix_Bid_Type__c='New Customer';
        insert bidtest;
        Phoenix_Bid__c bidtest1 = new  Phoenix_Bid__c();
        bidtest1.Phoenix_Approval_Status__c='New';
        bidtest1.Phoenix_Contact__c = con1.id;
        bidtest1.Phoenix_Customer_Type__c='New';
        bidtest1.Phoenix_Bid_Type__c='Price Change';
        insert bidtest1;
        Phoenix_Bid__c bidtest2 = new  Phoenix_Bid__c();
        bidtest2.Phoenix_Approval_Status__c='New';
         bidtest2.Phoenix_Contact__c=con.Id;
        bidtest2.Phoenix_Customer_Type__c='testing';
        bidtest2.Phoenix_Bid_Type__c='New Customer';
        bidtest2.Phoenix_Bid_Name__c = 'Test Bid';
         insert bidtest2;
        Phoenix_Bid_Line_Item__c bdl= new Phoenix_Bid_Line_Item__c();
         bdl.Phoenix_Bid_Status__c='Awarded';
        bdl.Phoenix_DeadNet_TrckGR__c=1;
        bdl.Phoenix_Bid__c=bidtest1.Id;
        bdl.Phoenix_Final_Status__c ='Approved';
         bdl.Phoenix_Bid_Line_Item_Approval_Status__c='Closed-Contracts';
        insert bdl;
        Phoenix_Bid_Line_Item__c bdl2= new Phoenix_Bid_Line_Item__c();
        bdl2.Phoenix_Bid_Status__c='Declined by Customer';
       bdl2.Phoenix_DeadNet_TrckGR__c=2;
        bdl2.Phoenix_Bid__c=bidtest1.Id;
        bdl2.Phoenix_Final_Status__c ='Approved';
        bdl2.Phoenix_Bid_Line_Item_Approval_Status__c='Closed-Contracts';
         insert bdl2;
        Phoenix_Bid_Line_Item__c bdl3= new Phoenix_Bid_Line_Item__c();
        bdl3.Phoenix_Bid_Status__c='Declined by Customer';
        bdl3.Phoenix_DeadNet_TrckGR__c=2;
        bdl3.Phoenix_Bid__c=bidtest.Id;
        bdl3.Phoenix_Final_Status__c ='Approved';
        bdl3.Phoenix_Bid_Line_Item_Approval_Status__c='Closed-Contracts';
        insert bdl3;
        Phoenix_Bid_Line_Item__c bdl4= new Phoenix_Bid_Line_Item__c();
        bdl4.Phoenix_Bid_Status__c='Declined by Customer';
       bdl4.Phoenix_DeadNet_TrckGR__c=2;
        bdl4.Phoenix_Bid__c=bidtest1.Id;
        bdl4.Phoenix_Final_Status__c ='Approved';
        bdl4.Phoenix_Bid_Line_Item_Approval_Status__c='Closed-Contracts';
       insert bdl4;
       Phoenix_Bid_Line_Item__c bdl1= new Phoenix_Bid_Line_Item__c();
       bdl1.Phoenix_Bid_Status__c='Declined by Customer';
       bdl1.Phoenix_DeadNet_TrckGR__c=1;
       bdl1.Phoenix_Bid__c=bidtest2.Id;
       bdl1.Phoenix_Bid_Line_Item_Approval_Status__c='Closed-Contracts';
       insert bdl1;
        List<Phoenix_Bid_Line_Item__c> bdlList= new List<Phoenix_Bid_Line_Item__c>{bdl,bdl1};
        Phoenix_Bid_Line_Item__c bdline2=new  Phoenix_Bid_Line_Item__c();
        bdline2.Phoenix_Bid__c=bidtest1.Id;
        insert bdline2;
        Phoenix_Bid__c bidtest7 = new  Phoenix_Bid__c();
        bidtest7.Phoenix_Approval_Status__c='New';
        bidtest7.Phoenix_Bid_Type__c='RFP Bids';
        bidtest7.Phoenix_Contact__c = con2.id;
        bidtest7.Phoenix_Customer_Type__c='New';
        insert bidtest7;
          Phoenix_Bid_Line_Item__c bdl7= new Phoenix_Bid_Line_Item__c();
         bdl7.Phoenix_Bid_Status__c='Declined by Customer';
         bdl7.Phoenix_DeadNet_TrckGR__c=1;
        bdl7.Phoenix_Bid__c=bidtest7.Id;
        bdl7.Phoenix_Bid_Line_Item_Approval_Status__c='Closed-Contracts';
        insert bdl7;
        Outlook_DRL_Customer_Scoring.updateInfluenceScore(con, 2);
        Outlook_DRL_Customer_Scoring.updateAffinityScore(con, 3);
        Outlook_DRL_Customer_Scoring.updateAuthScore(con,2);
        Outlook_DRL_Customer_Scoring.getBids(con, 2);
        Outlook_DRL_Customer_Scoring.updateInfluenceScore(con1, 2);
        Outlook_DRL_Customer_Scoring.updateAffinityScore(con1, 3);
        Outlook_DRL_Customer_Scoring.updateAuthScore(con1,2);
        Outlook_DRL_Customer_Scoring.getBids(con1, 2);
        Outlook_DRL_Customer_Scoring.updateInfluenceScore(con2, 3);
        Outlook_DRL_Customer_Scoring.updateAffinityScore(con2, 3);
        Outlook_DRL_Customer_Scoring.updateAuthScore(con2,2);
        Outlook_DRL_Customer_Scoring.getBids(con2, 3);        Outlook_DRL_Customer_Scoring.updateInfluenceScore(con3, 3);
        Outlook_DRL_Customer_Scoring.updateAffinityScore(con3, 3);
        Outlook_DRL_Customer_Scoring.updateAuthScore(con3,2);
        Outlook_DRL_Customer_Scoring.getBids(con3, 3);
       }
}