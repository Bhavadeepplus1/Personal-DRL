<!--
  @description       : 
  @author            : Surender Patel (Dhruvsoft)
  @group             : 
  @last modified on  : 29-05-2021
  @last modified by  : Surender Patel (Dhruvsoft)
  Modifications Log 
  Ver   Date         Author                       Modification
  1.0   29-05-2021   Surender Patel (Dhruvsoft)   Initial Version
-->
<aura:component controller="Phoenix_BidLineItemEditDemoCls" access="global">
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    <aura:attribute name="objInfoForPicklistValues" type="account" default="{sobjectType : 'Phoenix_Bid_Line_Item__c'}"
                    description="object information to fetch picklist values" />
    <aura:attribute name="ratingPicklistOpts" type="string[]" description="store picklist options values" />
    <aura:attribute name="showSaveCancelBtn" type="boolean" />
    <aura:attribute name="showErrorClass" type="boolean" default="false" />
    <aura:attribute name="sNo" type="string" />
    <aura:attribute name="customerId" type="string" />
    <aura:attribute name="lineItemId" type="String" />
    <aura:attribute name="productId" type="String" />
    <aura:attribute name="CISUEditMode" type="boolean" default="false" />
    <aura:attribute name="PORISUditMode" type="boolean" default="false" />
    <aura:attribute name="PORDSUEditMode" type="boolean" default="false" />
    <aura:attribute name="CDSUEditMode" type="boolean" default="false" />
    <aura:attribute name="PISUditMode" type="boolean" default="false" />
    <aura:attribute name="PDSUEditMode" type="boolean" default="false" />
    <aura:attribute name="WDPIEditMode" type="boolean" default="false" />
    <aura:attribute name="GDPEditMode" type="boolean" default="false" />
    <aura:attribute name="PCBPSEditMode" type="boolean" default="false" />
    <aura:attribute name="FAPCEditMode" type="boolean" default="false" />
    <aura:attribute name="PCREditMode" type="boolean" default="false" />
    <aura:attribute name="PPUREditMode" type="boolean" default="false" />
    <aura:attribute name="ISOVEditMode" type="boolean" default="false" />
    <aura:attribute name="EstDaysEditMode" type="boolean" default="false" />
    <aura:attribute name="ISOCEditMode" type="boolean" default="false" />
    <aura:attribute name="BudASPEditMode" type="boolean" default="false" />
    <aura:attribute name="CDEditMode" type="boolean" default="false" />
    <aura:attribute name="SalesNotesEditMode" type="boolean" default="false" />
    <aura:attribute name="SCMNotesEditMode" type="boolean" default="false" />
    <aura:attribute name="PriNotesEditMode" type="boolean" default="false" />
    <aura:attribute name="MarkNotesEditMode" type="boolean" default="false" />
    <aura:attribute name="PCBPEditMode" type="boolean" default="false" />
    <aura:attribute name="isSpinner" type="boolean" default="false" />
    <aura:attribute name="rebateTypeEdit" type="boolean" default="false" />
    <aura:attribute name="feeTypeEdit" type="boolean" default="false" />
    <aura:attribute name="MarketApprovalEditMode" type="boolean" default="false" />
    <aura:attribute name="ContractApprovalEditMode" type="boolean" default="false" />
    <aura:attribute name="ContractCommentsEditMode" type="boolean" default="false" />
    
    <aura:attribute name="isAccpetable" type="boolean" default="false" />
    <aura:attribute name="isNotAccpetable" type="boolean" default="false" />
    <aura:attribute name="isDirectAccpetable" type="boolean" default="false" />
    <aura:attribute name="isDirectNotAccpetable" type="boolean" default="false" />
    
    <aura:attribute name="isIndirectAccpetable" type="boolean" default="false" />
    <aura:attribute name="isIndirectNotAccpetable" type="boolean" default="false" />
    
    <aura:attribute name="tableRef" type="String" />
    <aura:attribute name="singleRec" type="sobject" />
    <aura:attribute name="isSpecificCust" type="boolean" default="false" />
    <!-- Future Record attributes -->
    <aura:attribute name="displayFutureDisplay" type="boolean" default="false" />
    <aura:attribute name="templateType" type="string" default="" />
    <aura:attribute name="bidType" type="string" default="" />
    <aura:attribute name="loggedInUserName" type="string" default="" />
    <aura:attribute name="BidAprrovalStatus" type="string" default="" />
    <aura:attribute name="isMarketingApprovePerson" type="string" />
    <aura:attribute name="isContractsApprovePerson" type="string" />
    
    <aura:attribute name="ItemsLength" type="Decimal" />
    <aura:attribute name="CDSUTotal" type="Decimal" />
    <aura:attribute name="TotalSellingUnits" type="Decimal" />
    <aura:attribute name="CISUTotal" type="Decimal" />
    <aura:attribute name="PISUTotal" type="Decimal" />
    <aura:attribute name="PDSUTotal" type="Decimal" />
    <aura:attribute name="netSalesIntTotal" type="Decimal" />
    <aura:attribute name="LCostTotal" type="Decimal" />
    <aura:attribute name="ThptMrgnDTotal" type="Decimal" />
    <aura:attribute name="intDeadNetTotal" type="Decimal" />
    <aura:attribute name="scmAPQTY" type="Decimal" />
    <aura:attribute name="overRideDirectUnits" type="Decimal" />
    <aura:attribute name="overRideIndirectUnits" type="Decimal" />
    <aura:attribute name="actSaDir12Months" type="Decimal" />
    <aura:attribute name="actSalInd12months" type="Decimal" />
    <aura:attribute name="iodAmountTotal" type="Decimal" />
    <aura:attribute name="salesoutAmountTotal" type="Decimal" />
    <aura:attribute name="TPTPercent" type="Decimal" />
    <aura:attribute name="direNetSales" type="Decimal" />
    <aura:attribute name="IndirNetSales" type="Decimal" />
    <aura:attribute name="totalNetSaes" type="Decimal" />
    <aura:attribute name="direTPTDollar" type="Decimal" />
    <aura:attribute name="indirTPTDollar" type="Decimal" />
    <aura:attribute name="totalTPTDollar" type="Decimal" />
    
    <!--Pricing History Analytics- Attributes-START -->
    
    <aura:registerEvent name="lightningEvent1" type="c:Phoenix_BidPricingHistoryEvt" />
    <aura:attribute name="displayBidHist" type="String" default="false" />
    <aura:attribute name="displayProdNPRHist" type="String" default="false" />
    <aura:attribute name="displayIMS" type="String" default="false" />
    <aura:attribute name="displayHistPricing" type="String" default="false" />
    <aura:attribute name="isModalOpen" type="Boolean" default="false" />
    <aura:attribute name="isPositionsModalOpen" type="Boolean" default="false" />
    <aura:attribute name="PositionsEditMode" type="boolean" default="false" />
    <aura:attribute name="recordId" type="Id" />
    <aura:attribute name="bidLineItemId" type="String" />
    <aura:attribute name="bidRecordParent" type="sObject" />
    <aura:attribute name="LinepositionColumns" type="List" />
    <!--Pricing History Analytics- Attributes END-->
    <aura:attribute name="isGoalseekModalOpen" type="Boolean" default="false" />
    <aura:attribute name="isIndirectGoalseekModalOpen" type="Boolean" default="false" />
    <aura:attribute name="expectDdeadnet" type="Decimal" />
    <aura:attribute name="expectIndirectDdeadnet" type="Decimal" />
    <aura:attribute name="expectCustmerDdeadnet" type="Decimal" />
    <aura:attribute name="RequiredPrice" type="Decimal" />
    <aura:attribute name="RequiredIndirectPrice" type="Decimal" />
    <aura:attribute name="errMsg" type="String" access="global" />
    <aura:attribute name="errIndirectMsg" type="String" access="global" />
    <aura:attribute name="err" type="boolean" default="false" />
    <aura:attribute name="errIndirect" type="boolean" default="false" />
    <aura:attribute name="ShowSaveButton" type="boolean" default="false" />
    <aura:attribute name="EstimatedDaysFieldValues" type="List" default="0,7,15,20,30,45,60,75,90,120" />
    
    <!-- rebid start-->
    <aura:attribute name="ReBidListAll" type="List" />
    <aura:attribute type="List" name="LinepositionsList" />
    <aura:registerEvent name="calcEvent" type="c:TotalCalculationEvt" />
    <aura:attribute name="isReBid" type="Boolean" default="false" />
    <aura:registerEvent name="lightningEvent" type="c:RefreshBidLineItemCmpEvt" />
    <aura:attribute name="ContSDFEditMode" type="boolean" default="false" />
    <!--New Product Launch-->
    <aura:attribute name="OpeningOrderEditMode" type="boolean" default="false" />
    <aura:attribute name="CSUPEditMode" type="boolean" default="false" />
    <aura:attribute name="CSPEditMode" type="boolean" default="false" />
    <aura:attribute name="WacEditMode" type="boolean" default="false" />
    <aura:attribute name="OpeningOrderTotal" type="Decimal" />
    <aura:attribute name="OpeningOrderNetSalesTotal" type="Decimal" />
    <aura:attribute name="OpeningOrderTPTTotal" type="Decimal" />
    <aura:attribute name="OpeningOrderTPTPercTotal" type="Decimal" />
    <!-- END New Product Launch-->
    
    <!-- Deligation attributes -->
    <aura:attribute name="deligatedUserName" type="String" default="" />
    <aura:attribute name="ismarketingDeligator" type="boolean" default="false" />
    <aura:attribute name="isdeligationApprover" type="Boolean" default="false" />
    <aura:attribute name="Deadnet" type="decimal"  />
    <aura:attribute name="marketingPricePopUp" type="Boolean" default="false" /> 
    <aura:attribute name="marketingPricePopUpVal" type="String"/> 
    <!--Bid Histroy Analytics Modal Popup-START-->
    <aura:attribute name="BidNameForPopup" type="String"/> 
    <aura:if isTrue="{!v.displayBidHist}">
        <c:Phoenix_BidPricingHistory tableRef="{!v.tableRef}" recordId="{!v.recordId}"
                                     displayBidHist="{!v.displayBidHist}" bidLineItemId="{!v.bidLineItemId}" />
        
    </aura:if>
    <!--Bid Histroy Analytics Modal Popup-END-->
    
    <!--Historical Pricing Analytics Modal Popup-START-->
    <aura:if isTrue="{!v.displayHistPricing}">
        <c:Phoenix_HistPricingAnalytics tableRef="{!v.tableRef}" recordId="{!v.recordId}"
                                        displayHistPricing="{!v.displayHistPricing}" bidLineItemId="{!v.bidLineItemId}" />
    </aura:if>
    <!--Historical Pricing Analytics Modal Popup-END-->
    
    <!--NPR Product Histroy Analytics Modal Popup-START-->
    <aura:if isTrue="{!v.displayProdNPRHist}">
        <c:Phoenix_NPRHistory tableRef="{!v.tableRef}" recordId="{!v.recordId}"
                              displayProdNPRHist="{!v.displayProdNPRHist}" bidLineItemId="{!v.bidLineItemId}" />
    </aura:if>
    <!--NPR Product Histroy Analytics Modal Popup-END-->
    
    <!--IMS Market Share Analytics Modal Popup-START-->
    <aura:if isTrue="{!v.displayIMS}">
        <c:Phoenix_IMSMaketShare tableRef="{!v.tableRef}" recordId="{!v.recordId}" displayIMS="{!v.displayIMS}"
                                 bidLineItemId="{!v.bidLineItemId}" />
    </aura:if>
    <!--IMS Market Share Analytics Modal Popup-END-->
    <aura:if isTrue="{!v.displayFutureDisplay}">
        <c:Phoenix_FutureNPRData
                                 productId ="{!v.productId}" lineItemId="{!v.lineItemId}" tableRef="{!v.tableRef}" displayFutureDisplay="{!v.displayFutureDisplay}"/>
    </aura:if>
    
    <aura:if isTrue="{!v.isGoalseekModalOpen}">
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            
            <div class="slds-modal__container" style="width:50% ! important;">
                
                <!-- Modal/Popup Box Header Starts here-->
                <header class="slds-modal__header">
                    <lightning:buttonIcon iconName="utility:close"
                                          onclick="{!c.closeGoalseekPopup}"
                                          alternativeText="close"
                                          variant="bare-inverse"
                                          class="slds-modal__close"/>
                    <h2 class="slds-text-heading_medium slds-hyphenate"><b>Goal Seek</b></h2>      
                </header>
                <div class="slds-modal__content slds-p-around_medium" >
                    <div class="slds-grid">
                        <div class="slds-col slds-size_1-of-3">
                            <lightning:input type="number" formatter="currency" step="0.01" class="lableInput" name="input1" label="Expected Internal Dead Net Price" value="{!v.expectDdeadnet}" onchange="{!c.calcGoalSeek}"/>
                        </div><br/>
                        <div class="slds-col slds-size_1-of-3 slds-m-left_small slds-m-top_xxx-small">
                            Required Price
                            <div>
                                <lightning:formattedNumber value="{!v.RequiredPrice}" style="currency" currencyCode="USD" maximumFractionDigits="2"/>
                            </div>  
                            <aura:if isTrue="{!v.err}">
                                <div class="slds-section">
                                    <ui:message title="" severity="error">
                                        <strong style="color:red">{!v.errMsg}</strong>
                                    </ui:message>
                                </div>
                            </aura:if>
                        </div>                        
                    </div>
                </div>
                <footer class="slds-modal__footer">
                    <lightning:button variant="neutral"
                                      label="Cancel"
                                      title="Cancel"
                                      onclick="{! c.closeGoalseekPopup }"/>
                    <aura:if isTrue="{!v.ShowSaveButton}">
                        <lightning:button variant="neutral" label="Save" title="Save" onclick="{!c.onCISUChange }" />
                    </aura:if>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </aura:if>
    <aura:if isTrue="{!v.isIndirectGoalseekModalOpen}">
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            
            <div class="slds-modal__container" style="width:50% ! important;">
                
                <!-- Modal/Popup Box Header Starts here-->
                <header class="slds-modal__header">
                    <lightning:buttonIcon iconName="utility:close"
                                          onclick="{!c.closeIndirectGoalseekPopup}"
                                          alternativeText="close"
                                          variant="bare-inverse"
                                          class="slds-modal__close"/>
                    <h2 class="slds-text-heading_medium slds-hyphenate"><b>Goal Seek</b></h2>      
                </header>
                <div class="slds-modal__content slds-p-around_medium" >
                    <div class="slds-grid">
                        <div class="slds-col slds-size_1-of-3">
                            <lightning:input type="number" formatter="currency" step="0.01" class="lableInput" name="input1" label="Expected Indirect Dead Net Price" value="{!v.expectIndirectDdeadnet}" onchange="{!c.calcIndirectGoalSeek}"/>
                        </div><br/>
                        <div class="slds-col slds-size_1-of-3 slds-m-left_small slds-m-top_xxx-small">
                            Required Price
                            <div>
                                <lightning:formattedNumber value="{!v.RequiredIndirectPrice}" style="currency" currencyCode="USD" maximumFractionDigits="2"/>
                            </div>  
                            <aura:if isTrue="{!v.err}">
                                <div class="slds-section">
                                    <ui:message title="" severity="error">
                                        <strong style="color:red">{!v.errIndirectMsg}</strong>
                                    </ui:message>
                                </div>
                            </aura:if>
                        </div>                        
                    </div>
                </div>
                <footer class="slds-modal__footer">
                    <lightning:button variant="neutral"
                                      label="Cancel"
                                      title="Cancel"
                                      onclick="{! c.closeIndirectGoalseekPopup }"/>
                    <aura:if isTrue="{!v.ShowSaveButton}">
                        <lightning:button variant="neutral" label="Save" title="Save" onclick="{!c.onCISUChange }" />
                    </aura:if>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </aura:if>
    
    <aura:if isTrue="{!v.isModalOpen}">
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                 aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            
            <div class="slds-modal__container" style="width:80% ! important;">
                
                <!-- Modal/Popup Box Header Starts here-->
                <header class="slds-modal__header">
                    <lightning:buttonIcon iconName="utility:close" onclick="{!c.closePopup}" alternativeText="close"
                                          variant="bare-inverse" class="slds-modal__close" />
                    <aura:if isTrue="{! not(empty(v.ReBidListAll))}">
                        <h2 class="slds-text-heading_medium slds-hyphenate"><b>Previous Prices</b></h2>
                    </aura:if>
                </header>
                <!--Modal/Popup Box Body Starts here-->
                <!--div class="slds-scrollable" style="height: 100rem; width: 46rem"-->
                <div class="slds-modal__content slds-p-around_medium">
                    
                    <aura:if isTrue="{! not(empty(v.ReBidListAll))}">
                        <table
                               class="slds-table slds-table_cell_buffered slds-max-medium-table_stacked-horizontal slds-table_bordered"
                               style="border:1px solid #eaeaea;">
                            <thead>
                                
                                <tr class="slds-text-title">
                                    
                                    <th scope="col" class="slds-cell-wrap ">
                                        <div class="slds-truncate" title="Bid"> Bid </div>
                                    </th>
                                    <th scope="col" class="slds-cell-wrap ">
                                        <div class="slds-truncate" title="Created Date">Created Date</div>
                                    </th>
                                    <th scope="col" class="slds-cell-wrap ">
                                        <div class="slds-truncate" title="Bid Status"> Bid Status</div>
                                    </th>
                                    <th scope="col" class="slds-cell-wrap ">
                                        <div class="slds-truncate" title="Guided Price">Guidance Price
                                        </div>
                                    </th>
                                    <aura:if isTrue="{!v.templateType=='Direct and Indirect'}">
                                        <th scope="col" class="slds-cell-wrap slds-text-align_right">
                                            <div class="slds-truncate" title="Contract Price"> Contract Direct Price (Marketing)</div>
                                        </th>
                                        <aura:set attribute="else">
                                            <th scope="col" class="slds-cell-wrap slds-text-align_right">
                                                <div class="slds-truncate" title="Contract Price"> Contract Bid Price (Marketing)</div>
                                            </th>
                                        </aura:set>
                                    </aura:if>
                                    <aura:if isTrue="{!v.templateType=='Direct and Indirect'}">
                                        <th scope="col" class="slds-cell-wrap slds-text-align_right">
                                            <div class="slds-truncate" title="Contract Price"> Contract Indirect Price (Marketing)</div>
                                        </th>
                                    </aura:if>
                                    
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.ReBidListAll}" var="prodItem" indexVar="itemIndex">
                                    <tr>
                                        <td class="slds-cell-wrap" scope="col"> <a href="{!'/'+prodItem.Phoenix_Bid__c}"
                                                                                   target="_blank">{!prodItem.Phoenix_Bid__r.Name}</a></td>
                                        <td class="slds-cell-wrap" scope="col">
                                            <lightning:formattedDateTime
                                                                         value="{!prodItem.Phoenix_Bid__r.CreatedDate}" />
                                        </td>
                                        <td class="slds-cell-wrap" scope="col">
                                            {!prodItem.Phoenix_Bid__r.Phoenix_Approval_Status__c}</td>
                                        <td class="slds-cell-wrap slds-text-align_right" scope="col">
                                            <lightning:formattedNumber value="{!prodItem.Phoenix_Guidance_Price__c}"
                                                                       style="currency" currencyCode="USD"></lightning:formattedNumber>
                                        </td>
                                        <td class="slds-cell-wrap slds-text-align_right" scope="col">
                                            <lightning:formattedNumber
                                                                       value="{!prodItem.Phoenix_Final_Approvd_Pricing_Contracts__c}"
                                                                       style="currency" currencyCode="USD"></lightning:formattedNumber>
                                        </td>
                                        <aura:if isTrue="{!v.templateType=='Direct and Indirect'}">
                                            <aura:if isTrue="{!(prodItem.Phoenix_Wholesaler_Diff_Price_Indirect__c != null)}">
                                                <td class="slds-cell-wrap slds-text-align_right" scope="col">
                                                    <lightning:formattedNumber
                                                                               value="{!prodItem.Phoenix_Wholesaler_Diff_Price_Indirect__c}"
                                                                               style="currency" currencyCode="USD"></lightning:formattedNumber>
                                                </td>
                                                <aura:set attribute="else">
                                                    <td class="slds-cell-wrap slds-text-align_right" scope="col">
                                                        <lightning:formattedNumber
                                                                                   value="{!prodItem.Phoenix_Current_Indirect_Price__c}"
                                                                                   style="currency" currencyCode="USD"></lightning:formattedNumber>
                                                    </td>
                                                </aura:set>
                                            </aura:if>
                                        </aura:if>
                                        
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <aura:set attribute="else">
                            <p style="text-align:center">No previous prices found.</p>
                        </aura:set>
                    </aura:if>
                </div>
                <!--/div-->
                <!--Modal/Popup Box Footer Starts here-->
                <footer class="slds-modal__footer">
                    <lightning:button variant="neutral" label="Cancel" title="Cancel" onclick="{! c.closePopup }" />
                    
                </footer>
            </div>
            
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
        
    </aura:if>
    <!--StartProductPosition Model-->
    <aura:if isTrue="{!v.isPositionsModalOpen}">
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                 aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            
            <div class="slds-modal__container">
                
                <!-- Modal/Popup Box Header Starts here-->
                <header class="slds-modal__header">
                    <lightning:buttonIcon iconName="utility:close" onclick="{!c.closePositionsPopup}"
                                          alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                    
                    <h2 class="slds-text-heading_medium slds-hyphenate"><b>Product Positions</b></h2>
                    
                </header>
                <!--Modal/Popup Box Body Starts here-->
                <!--div class="slds-scrollable" style="height: 100rem; width: 46rem"-->
                <div class="slds-modal__content slds-p-around_medium">
                    <P>
                        <aura:if isTrue="{!not(empty(v.LinepositionsList))}">
                            <lightning:datatable aura:id="PoslineLevelTable" data="{! v.LinepositionsList }"
                                                 columns="{! v.LinepositionColumns }" keyField="Name"
                                                 selectedRows="{! v.LineselectedPosistions }" />
                            <aura:set attribute="else">
                                <center>
                                    <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_info slds-m-left_xx-large slds-m-right_xx-large"
                                         role="alert" style="width:50%;">
                                        <span class="slds-icon_container slds-m-right_x-small"
                                              title="Please add line items to view the table">
                                            <lightning:icon iconName="utility:info" alternativeText="info"
                                                            size="x-small" variant="inverse" />
                                        </span>
                                        <h2> No Records Found</h2>
                                    </div>
                                </center>
                            </aura:set>
                        </aura:if>
                    </P>
                </div>
                <!--/div-->
                <!--Modal/Popup Box Footer Starts here-->
                <footer class="slds-modal__footer">
                    <lightning:button variant="neutral" label="Cancel" title="Cancel"
                                      onclick="{! c.closePositionsPopup }" />
                    <lightning:button variant="brand" label="Save" title="Save" onclick="{! c.savePositions }" />
                    
                </footer>
            </div>
            
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
        
    </aura:if>
    <!--End Product positions Mode-->
    
    <aura:if isTrue="{!v.isSpinner}">
        <div class="">
            <lightning:spinner alternativeText="Loading" variant="brand" />
        </div>
    </aura:if>
    <tr>
        
        <aura:if isTrue="{!and(or(v.BidAprrovalStatus=='Draft', and(or(v.BidAprrovalStatus=='SCM &amp; Marketing',v.BidAprrovalStatus=='Marketing'),or(v.isMarketingApprovePerson==v.singleRec.Phoenix_Product_Director__c,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,v.isdeligationApprover)))),v.singleRec.Phoenix_Marketing_Final_Approval__c!=true)}">
            <th scope="row" class="{! v.showErrorClass == true ? 'slds-cell-edit slds-has-error' : 'slds-cell-edit'}">
                <aura:if isTrue="{!v.BidAprrovalStatus=='Draft'}">
                    <a name="{!v.lineItemId}" onclick="{!c.deleteLineItem}">
                        <lightning:icon iconName="utility:delete" alternativeText="delete" size="x-small" />
                    </a>
                </aura:if>
            </th>
            <th scope="row" class="{! v.showErrorClass == true ? 'slds-cell-edit slds-has-error' : 'slds-cell-edit'}">
                <span class="slds-grid slds-grid_align-spread">
                    <span class="" title="NDC">{!v.singleRec.Phoenix_NDC__c}</span>
                </span>
            </th>
            <th scope="row">{!v.singleRec.Phoenix_Product_Code1__c}</th>
            <th scope="row">
                <!--Added by Naseer to replace Product Family with Lookup-->
                <lightning:formattedUrl value="{!'/' + v.singleRec.Product_Family__c}"
                                        label="{!v.singleRec.Product_Family_Name__c}" target="_self" />
                <!--End-->
                <!--{!v.singleRec.Phoenix_Product_Family__c}-->
            </th>
            <th scope="row" class="slds-text-align_right">{!v.singleRec.Phoenix_Pkg_Size__c}</th>
            <th scope="row">
                <span class="slds-grid slds-grid_align-spread">
                    <span class="" title="Product">
                        <lightning:formattedUrl value="{!'/' + v.singleRec.Phoenix_Product__r.Id}"
                                                label="{!v.singleRec.Phoenix_Product__r.Name}" target="_self" />
                    </span>
                </span>
            </th>
            <!-- logic for Re-Bid functionality- starts-->
            <aura:if isTrue="{!v.isReBid}">
                <td class="slds-text-align_right"> <a href="{!'/'+v.singleRec.Phoenix_Previous_Bid__c}"
                                                      target="_blank">{!v.singleRec.Phoenix_Previous_Bid__r.Name}</a></td>
                <td class="slds-text-align_right"> <a onclick="{!c.showSelectedproducts}">{!v.singleRec.Phoenix_Previous_LineItem__r.Name}</a></td>
            </aura:if>
            <!-- logic for Re-Bid functionality- ends-->
            
            <td class="slds-text-align_right">{!v.singleRec.Phoenix_Case_Pack__c}</td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_MOQ1__c}" maximumFractionDigits="2" />
            </td>
            <td>{!v.singleRec.Phoenix_Compare_To_Brand_Name1__c}</td>
            <td>{!v.singleRec.Phoenix_Product_Director__c}</td>
            <td class="slds-text-align_right">{!v.singleRec.Phoenix_Orange_Book_Rating1__c}</td>
            
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Throughput_cost__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_WAC__c}" style="currency" currencyCode="USD" maximumFractionDigits="2"/>
            </td>
            <td class="slds-text-align_left">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_IMS_Market_Share__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <aura:if isTrue="{!v.singleRec.Phoenix_REMS__c}">
                <td style="color:red">Yes</td>
                <aura:set attribute="else">
                    <td>No</td>
                </aura:set>
            </aura:if>
            <aura:if isTrue="{!v.bidType != 'New Product Launch'}">
                <td class="slds-text-align_right">
                    <div class="slds-grid" style="width:200px">
                        <div class="slds-grid slds-has-flexi-truncate">
                            <p class="slds-truncate" title="{!v.singleRec.Phoenix_Current_Position__c}">
                                {!v.singleRec.Phoenix_Current_Position__c}</p>
                        </div>
                    </div>
                </td>
            </aura:if>
            <aura:if isTrue="{!or(v.loggedInUserName==v.singleRec.Phoenix_Product_Director__c,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,or(v.BidAprrovalStatus=='Draft',or(v.isMarketingApprovePerson==v.singleRec.Phoenix_Product_Director__c,v.isdeligationApprover))))}">
                <td class="" ondblclick="{!c.inlineEditPositions}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.PositionsEditMode == false}">
                            <span>
                                <div class="slds-grid" style="width:200px">
                                    <div class="slds-grid slds-has-flexi-truncate">
                                        <p class="slds-truncate" title="{!v.singleRec.Phoenix_Proposed_Position__c}">
                                            {!v.singleRec.Phoenix_Proposed_Position__c}
                                        </p>
                                        
                                    </div>
                                </div>
                            </span>
                            <button onclick="{!c.inlineEditPositions}"
                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                    tabindex="0">
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                        </aura:if>
                    </span>
                    
                    
                </td>
                <aura:set attribute="else">
                    <td>
                        <div class="slds-grid" style="width:200px">
                            <div class="slds-grid slds-has-flexi-truncate">
                                <p class="slds-truncate" title="{!v.singleRec.Phoenix_Proposed_Position__c}">
                                    {!v.singleRec.Phoenix_Proposed_Position__c}
                                </p>
                                
                            </div>
                        </div>
                        
                    </td>
                </aura:set>           
            </aura:if>
            <aura:if isTrue="{!v.bidType != 'New Product Launch'}">
                <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Current_Indirect_Selling_Unit__c}"  maximumFractionDigits="0"/></td>
                <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_12_Months_IndirectSaleUnit__c}"  maximumFractionDigits="0"/>
                </td>
                <!-- override units start-->
                <td ondblclick="{!c.inlineEditOvridePISUnit}">
                    <span class="slds-grid slds-grid_align-spread">
                        <!-- show input and output section based on boolean flag -->
                        <aura:if isTrue="{!v.PORISUditMode == false}">
                            <span><lightning:formattedNumber value="{!v.singleRec.Phoenix_Override_Current_Indirect_Units__c}"  maximumFractionDigits="0"/>
                            </span>
                            <button onclick="{!c.inlineEditOvridePISUnit}"
                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                    tabindex="0">
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <!-- Inline Edit Section in else case-->
                            <aura:set attribute="else">
                                <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                         style="position: absolute; top: 0px;width:max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputNumber class="slds-input inputWidth"
                                                                labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                aura:id="inputPORISUnitId" blur="{!c.closePORISUBox}"
                                                                change="{!c.onCISUChange}"
                                                                value="{!v.singleRec.Phoenix_Override_Current_Indirect_Units__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                <!-- override units end -->
            </aura:if>
            <aura:if  isTrue="{!v.bidType !='Price Change'}">
                <td ondblclick="{!c.inlineEditPISUnit}">
                    <span class="slds-grid slds-grid_align-spread">
                        <!-- show input and output section based on boolean flag -->
                        <aura:if isTrue="{!v.PISUditMode == false}">
                            <span> <lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Indirect_Selling_Unit__c}"  maximumFractionDigits="0"/>
                            </span>
                            <button onclick="{!c.inlineEditPISUnit}"
                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                    tabindex="0">
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <!-- Inline Edit Section in else case-->
                            <aura:set attribute="else">
                                <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                         style="position: absolute; top: 0px;width:max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputNumber class="slds-input inputWidth"
                                                                labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                aura:id="inputPISUnitId" blur="{!c.closePISUBox}"
                                                                change="{!c.onCISUChange}"
                                                                value="{!v.singleRec.Phoenix_Proposed_Indirect_Selling_Unit__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
            </aura:if>
            
            <aura:if isTrue="{!v.bidType != 'New Product Launch'}">
                <aura:if isTrue="{!v.bidType!='Price Change'}">
                    <aura:if isTrue="{!and(and(v.singleRec.Phoenix_SCM_Approval_Y_N__c!='N- Not Approved',v.singleRec.Phoenix_SCM_Final_Approval__c==true),not(empty(v.singleRec.Phoenix_SCM_Approval_Y_N__c)))}">
                        <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Total_SCM_Approved_Qty__c}"  maximumFractionDigits="0"/></td>
                        <aura:set attribute="else">
                            <td class="slds-text-align_right"></td>
                        </aura:set>
                    </aura:if>
                </aura:if>
            </aura:if>
            <aura:if isTrue="{!and(v.bidType != 'New Product Launch',v.bidType != 'New Customer')}">
                <aura:if isTrue="{!v.templateType=='Humana Indirect CII'}">
                    <td class="slds-text-align_right">
                        <lightning:formattedNumber value="{!v.singleRec.Phoenix_Current_Direct_Price__c}" style="currency"
                                                   currencyCode="USD" maximumFractionDigits="2" />
                    </td>
                </aura:if>
                <td class="slds-text-align_right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Current_Indirect_Price__c}" style="currency"
                                               currencyCode="USD" maximumFractionDigits="2" />
                </td>
            </aura:if>
            
            <aura:if isTrue="{!v.bidType !='Volume Review Only'}">
                <td ondblclick="{!c.inlineEditGuidancePrice}">
                    <span class="slds-grid slds-grid_align-spread">
                        <!-- show input and output section based on boolean flag -->
                        <aura:if isTrue="{!v.GDPEditMode == false}">
                            <span class="">
                                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Guidance_Price__c}" style="currency"
                                                           currencyCode="USD" /></span>
                            <button onclick="{!c.inlineEditGuidancePrice}"
                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                    tabindex="0">
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <!-- Inline Edit Section in else case-->
                            <aura:set attribute="else">
                                <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                         style="position: absolute; top: 0px;width:max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputCurrency class="slds-input inputWidth guidancePrice"
                                                                  labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                  aura:id="inputGDPId" blur="{!c.closeGDPBox}" change="{!c.onCISUChange}"
                                                                  value="{!v.singleRec.Phoenix_Guidance_Price__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                <aura:if isTrue="{!v.loggedInUserName!=v.isMarketingApprovePerson}">
                    <td ondblclick="{!c.inlineEditPCBPS}">
                        <span class="slds-grid slds-grid_align-spread">
                            <!-- show input and output section based on boolean flag -->
                            <aura:if isTrue="{!v.PCBPSEditMode == false}">
                                
                                <span class="">
                                    <div
                                         >
                                        <lightning:formattedNumber
                                                                   
                                                                   value="{!v.singleRec.Phoenix_ProposedContract_Bid_Price_Sales__c}"
                                                                   style="currency" currencyCode="USD" />
                                    </div>
                                </span>
                                
                                <button onclick="{!c.inlineEditPCBPS}"
                                        class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                        tabindex="0">
                                    <lightning:icon iconName="utility:edit" size="xx-small" />
                                </button>
                                <!-- Inline Edit Section in else case-->
                                <aura:set attribute="else">
                                    <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                             style="position: absolute; top: 0px;width:max-content;">
                                        <div class="slds-popover__body">
                                            <div class="slds-form-element slds-grid slds-wrap">
                                                <div class="slds-form-element__control slds-grow">
                                                    <ui:inputCurrency class="slds-input inputWidth"
                                                                      labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                      aura:id="inputPCBPSId" blur="{!c.closePCBPSBox}"
                                                                      change="{!c.onCISUChange}"
                                                                      value="{!v.singleRec.Phoenix_ProposedContract_Bid_Price_Sales__c}" />
                                                </div>
                                            </div>
                                        </div>
                                        <span id="form-end" tabindex="0"></span>
                                    </section>
                                </aura:set>
                            </aura:if>
                        </span>
                    </td>
                    <aura:set attribute="else">
                        <td class="slds-text-align_right">
                            <div
                                 >
                                <lightning:formattedNumber
                                                           
                                                           value="{!v.singleRec.Phoenix_ProposedContract_Bid_Price_Sales__c}" style="currency"
                                                           currencyCode="USD" maximumFractionDigits="2" />
                            </div>
                        </td>
                    </aura:set>
                </aura:if>
            </aura:if>
            
            <aura:if isTrue="{!and(v.bidType !='Volume Review Only',v.bidType  !='New Product Launch')}">
                <td class="slds-text-align_right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Reduction__c}" style="percent-fixed"  maximumFractionDigits="2"  />
                </td>
            </aura:if>
            
            <aura:if isTrue="{!v.bidType =='New Product Launch'}">
                <td class="slds-text-align_right"> <lightning:formattedNumber value="{!v.singleRec.Brand_WAC__c}"
                                                                              style="currency" currencyCode="USD" maximumFractionDigits="2" /></td>
                <td class="slds-text-align_right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Brand_WAC_Per__c}" style="percent-fixed"
                                               maximumFractionDigits="2" />
                </td>
            </aura:if>
            <aura:if isTrue="{!and(v.BidAprrovalStatus!='Draft',or(v.singleRec.Latest_Line_Item__r.Phoenix_ProposedContractBidPriceMktng__c==null,and(v.singleRec.Latest_Line_Item__r.Phoenix_Final_Status__c=='Not Approved',(or(v.loggedInUserName==v.singleRec.Phoenix_Product_Director__c,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,or(v.isMarketingApprovePerson==v.singleRec.Phoenix_Product_Director__c,v.isdeligationApprover)))))))}">
                <aura:if isTrue="{!v.bidType !='Volume Review Only'}">
                    <aura:if isTrue="{!v.templateType=='Humana Indirect CII'}">
                        <td ondblclick="{!c.inlineEditPCBP}">
                            <span class="slds-grid slds-grid_align-spread">
                                <!-- show input and output section based on boolean flag -->
                                <aura:if isTrue="{!v.PCBPEditMode == false}">
                                    <span class="slds-grid slds-grid_align-spread">
                                        <!--     <a name="{!v.lineItemId}" onclick="{!c.openGoalseek}" title="Goal Seek">
                                            <lightning:icon iconName="utility:campaign" alternativeText="delete" size="x-small" />
                                        </a> -->
                                        <!--   <lightning:icon iconName="utility:info" class="infoColor" title="{!('% of WAC: '+v.singleRec.wacPercent +' || % of Current Contract Price: '+v.singleRec.currentContractPrice)}" size="x-small"/> --> 
                                        <span
                                              style="{!lessthan(v.Deadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'color:red':''}">
                                            <lightning:formattedNumber
                                                                       title="{!lessthan(v.Deadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'Internal Dead Net Price is less than Lowest Price/SKU or Approved Lowest Price/SKU':''}"
                                                                       value="{!v.singleRec.Phoenix_ProposedContractBidPriceMktng__c}"
                                                                       style="currency" currencyCode="USD" />
                                        </span>
                                    </span>
                                    
                                    <button onclick="{!c.inlineEditPCBP}"
                                            class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                            tabindex="0">
                                        <lightning:icon iconName="utility:edit" size="xx-small" />
                                    </button>
                                    <!-- Inline Edit Section in else case-->
                                    <aura:set attribute="else">
                                        <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                                 style="position: absolute; top: 0px;width:max-content;">
                                            <div class="slds-popover__body">
                                                <div class="slds-form-element slds-grid slds-wrap">
                                                    <div class="slds-form-element__control slds-grow">
                                                        <ui:inputNumber class="slds-input inputWidth"
                                                                        labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                        aura:id="inputPCBPId" blur="{!c.closePCBPBox}"
                                                                        change="{!c.onCISUChange}"
                                                                        value="{!v.singleRec.Phoenix_ProposedContractBidPriceMktng__c}" />
                                                    </div>
                                                </div>
                                            </div>
                                            <span id="form-end" tabindex="0"></span>
                                        </section>
                                    </aura:set>
                                </aura:if>
                            </span>
                        </td>
                    </aura:if>
                    
                </aura:if>
                <aura:set attribute="else">
                    <aura:if isTrue="{!v.bidType !='Volume Review Only'}">
                        <aura:if isTrue="{!v.templateType=='Humana Indirect CII'}">
                            <td class="slds-text-align_right">
                                <!--       <span> <lightning:icon iconName="utility:info" class="infoColor" title="{!('% of WAC: '+v.singleRec.wacPercent +' || % of Current Contract Price: '+v.singleRec.currentContractPrice)}" size="x-small"/>  -->
                                <span
                                      style="{!lessthan(v.singleRec.Phoenix_ProposedContractBidPriceMktng__c,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'color:red':''}">
                                    <lightning:formattedNumber
                                                               title="{!lessthan(v.singleRec.Phoenix_ProposedContractBidPriceMktng__c,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'Proposed Contract Bid Price (Marketing) is less than Lowest Price/SKU or Approved Lowest Price/SKU':''}"
                                                               value="{!v.singleRec.Phoenix_ProposedContractBidPriceMktng__c}" style="currency" maximumFractionDigits="2"
                                                               currencyCode="USD" />
                                </span>
                            </td>
                        </aura:if>
                        
                    </aura:if>                    
                </aura:set>
            </aura:if>
            <aura:if isTrue="{!(or(v.loggedInUserName==v.singleRec.Phoenix_Product_Director__c,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,or(v.isMarketingApprovePerson==v.singleRec.Phoenix_Product_Director__c,v.isdeligationApprover))))}">
                <aura:if isTrue="{!v.bidType !='Volume Review Only'}">
                    
                    <td ondblclick="{!c.inlineEditWholeDiffPriInd}">
                        <span class="slds-grid slds-grid_align-spread">
                            <!-- show input and output section based on boolean flag -->
                            <aura:if isTrue="{!v.WDPIEditMode == false}">
                                <span class="slds-grid slds-grid_align-spread">
                                    <aura:if isTrue="{!v.templateType=='Humana Indirect retail'}">
                                          <aura:if isTrue="{!v.singleRec.Phoenix_Wholesaler_Diff_Price_Indirect__c>0}">
                                        <lightning:icon iconName="utility:info" class="infoColor" title="{!('% of WAC: '+v.singleRec.wacPercent +' || % of Current Contract Price: '+v.singleRec.currentContractPrice)}" size="x-small"/>  
                                        </aura:if>
                                        <a name="{!v.lineItemId}" onclick="{!c.openGoalseek}" title="Goal Seek">
                                            <lightning:icon iconName="utility:campaign" alternativeText="delete" size="x-small" />
                                        </a>
                                    </aura:if>
                                    <div
                                         style="{!lessthan(v.Deadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'color:red':''}">
                                        <lightning:formattedNumber
                                                                   title="{!lessthan(v.Deadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'Internal Dead Net Price is less than Lowest Price/SKU or Approved Lowest Price/SKU':''}"
                                                                   value="{!v.singleRec.Phoenix_Wholesaler_Diff_Price_Indirect__c}"
                                                                   style="currency" currencyCode="USD" />
                                    </div>
                                </span>
                                <button onclick="{!c.inlineEditWholeDiffPriInd}"
                                        class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                        tabindex="0">
                                    <lightning:icon iconName="utility:edit" size="xx-small" />
                                </button>
                                <!-- Inline Edit Section in else case-->
                                <aura:set attribute="else">
                                    <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                             style="position: absolute; top: 0px;width:max-content;">
                                        <div class="slds-popover__body">
                                            <div class="slds-form-element slds-grid slds-wrap">
                                                <div class="slds-form-element__control slds-grow">
                                                    <ui:inputCurrency class="slds-input inputWidth"
                                                                      labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                      aura:id="inputWDPIId" blur="{!c.closeWDPIBox}"
                                                                      change="{!c.onCISUChange}"
                                                                      value="{!v.singleRec.Phoenix_Wholesaler_Diff_Price_Indirect__c}" />
                                                </div>
                                            </div>
                                        </div>
                                        <span id="form-end" tabindex="0"></span>
                                    </section>
                                </aura:set>
                            </aura:if>
                        </span>
                    </td>
                </aura:if>
                <aura:set attribute="else">
                    <aura:if isTrue="{!v.bidType !='Volume Review Only'}">
                        
                        <td class="slds-text-align_right">
                            <span> <aura:if isTrue="{!v.singleRec.Phoenix_Wholesaler_Diff_Price_Indirect__c>0}">
                                        <lightning:icon iconName="utility:info" class="infoColor" title="{!('% of WAC: '+v.singleRec.wacPercent +' || % of Current Contract Price: '+v.singleRec.currentContractPrice)}" size="x-small"/>  
                                        </aura:if>
                                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Wholesaler_Diff_Price_Indirect__c}"
                                                           style="currency" currencyCode="USD" maximumFractionDigits="2"/>
                            </span> </td>
                    </aura:if>                    
                </aura:set>
            </aura:if>
            
            <aura:if isTrue="{!v.templateType=='Humana Indirect CII'}">
                <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Net_Price_afterRebates_after_VIP__c}" style="currency" currencyCode="USD" maximumFractionDigits="2"/></td>
            </aura:if>
            
            <td ondblclick="{!c.inlineEditBudASP}">
                <span class="slds-grid slds-grid_align-spread">
                    <aura:if isTrue="{!v.BudASPEditMode == false}">
                        <span class="">
                            <!--  <lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Current_Rebate__c}" style="percent-fixed" />-->
                            <lightning:formattedNumber value="{!v.singleRec.Phoenix_Contract_Mngment_Fee_Wholesaler__c}"
                                                       style="percent-fixed" maximumFractionDigits="2" />
                            
                        </span>
                        <button onclick="{!c.inlineEditBudASP}"
                                class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                tabindex="0">
                            <lightning:icon iconName="utility:edit" size="xx-small" />
                        </button>
                        <aura:set attribute="else">
                            <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                     style="position: absolute; top: 0px;width:max-content;">
                                <div class="slds-popover__body">
                                    <div class="slds-form-element slds-grid slds-wrap">
                                        <div class="slds-form-element__control slds-grow">
                                            <ui:inputNumber class="slds-input inputWidth"
                                                            labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                            aura:id="inputBudgAspId" blur="{!c.closeBudgAspBox}"
                                                            change="{!c.onCISUChange}"
                                                            value="{!v.singleRec.Phoenix_Contract_Mngment_Fee_Wholesaler__c}" />
                                        </div>
                                    </div>
                                </div>
                                <span id="form-end" tabindex="0"></span>
                            </section>
                        </aura:set>
                    </aura:if>
                </span>
            </td>
            <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_CM_FEE__c}" style="currency" currencyCode="USD" maximumFractionDigits="2"/></td>
            <!-- start cd need to change-->
            <td ondblclick="{!c.inlineEditCD}">
                <span class="slds-grid slds-grid_align-spread">
                    <aura:if isTrue="{!v.CDEditMode == false}">
                        <span class="">
                            <!--  <lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Current_Rebate__c}" style="percent-fixed" />-->
                            <lightning:formattedNumber value="{!v.singleRec.Phoenix_Indirect_CD_Per__c}"
                                                       style="percent-fixed" maximumFractionDigits="2" />
                            
                        </span>
                        <button onclick="{!c.inlineEditCD}"
                                class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                tabindex="0">
                            <lightning:icon iconName="utility:edit" size="xx-small" />
                        </button>
                        <aura:set attribute="else">
                            <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                     style="position: absolute; top: 0px;width:max-content;">
                                <div class="slds-popover__body">
                                    <div class="slds-form-element slds-grid slds-wrap">
                                        <div class="slds-form-element__control slds-grow">
                                            <ui:inputNumber class="slds-input inputWidth"
                                                            labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                            aura:id="inputcdId" blur="{!c.closecdBox}"
                                                            change="{!c.onCISUChange}"
                                                            value="{!v.singleRec.Phoenix_Indirect_CD_Per__c}" />
                                        </div>
                                    </div>
                                </div>
                                <span id="form-end" tabindex="0"></span>
                            </section>
                        </aura:set>
                    </aura:if>
                </span>
            </td>
            <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_INDIRECT_CD__c}" style="currency" currencyCode="USD" maximumFractionDigits="2"/></td>
            
            <!--  end -->
            
            <td class="slds-text-align--right">
                <div style="{!v.isAccpetable ?'color:green':!v.isNotAccpetable ?'color:red': ''}">
                    <lightning:formattedNumber title="{!v.isAccpetable ?'Deadnet price is greater than LE+10 %(LE) or BASP+10 %(BASP)':!v.isNotAccpetable ?'Deadnet price is less than LE-10% of LE (or) BASP-10% of BASP': ''}"
                                               value="{!v.singleRec.Phoenix_Internal_Dead_Net_Price__c}"
                                               
                                               style="currency" currencyCode="USD" />
                </div>
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Proposed_TPT_Direct__c}"
                                           style="currency" currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Proposed_TPT_Per_Direct__c}"
                                           style="percent-fixed"  maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Medicaid_Returns_Per_Unit_in__c}"
                                           style="currency" currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <!--<td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Estimated_Medicaid_Returns1__c}" style="currency" currencyCode="USD" maximumFractionDigits="2"/></td>-->
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Net_Sales_Internal__c}" style="currency"
                                           currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
            </td>
            <!--  <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Less_Cost__c}" style="currency" currencyCode="USD" maximumFractionDigits="2" /></td>-->
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Th_Put_Margin__c}" style="currency"
                                           currencyCode="USD" minimumFractionDigits="0" />
            </td>
            
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_TP_Margin__c}" style="percent-fixed"
                                           maximumFractionDigits="2" />
            </td>
            <!-- vandana verified-->
            
            
            <aura:if isTrue="{!v.bidType =='New Product Launch'}">
                <td ondblclick="{!c.inlineOpeningOrder}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.OpeningOrderEditMode == false}">
                            <span class="">
                                <aura:if isTrue="{!not(empty(v.singleRec.Phoenix_Opening_Order__c))}">
                                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Opening_Order__c}"
                                                               maximumFractionDigits="2" />
                                    <aura:set attribute="else">
                                        <lightning:formattedNumber value="{!v.singleRec.Phoenix_Opening_Order__c}"
                                                                   maximumFractionDigits="2" />
                                    </aura:set>
                                </aura:if>
                            </span>
                            <button onclick="{!c.inlineOpeningOrder}"
                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                    tabindex="0">
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <aura:set attribute="else">
                                <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                         style="position: absolute; top: 0px;width:max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputNumber class="slds-input inputWidth"
                                                                labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                aura:id="OpeningOrderId" blur="{!c.closeOpeningOrder}"
                                                                change="{!c.onCISUChange}"
                                                                value="{!v.singleRec.Phoenix_Opening_Order__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                <td>
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Opening_Order_Net_sales__c}" style="currency"
                                               currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                <td>
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Opening_Order_TPT__c}" style="currency"
                                               currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                <td>
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Opening_Order_TPT_Per__c}" style="percent-fixed"
                                               maximumFractionDigits="2" />
                </td>
            </aura:if>
            
            
            
            
            
            
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Budgeted_ASP1__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_to_Budget__c}" style="percent-fixed"
                                           maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Latest_Estimate__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_as_of_Latest_Estimate__c}"
                                           style="percent-fixed" maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Lowest_Price_SKU__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Approved_Lowest_Price_SKU__c}" style="currency" currencyCode="USD" maximumFractionDigits="2"/></td>
            <aura:if isTrue="{!v.bidType !='New Product Launch'}">
                <aura:if
                         isTrue="{!and(v.bidType !='Price Change',and(v.bidType !='Customer Rebate Change',v.bidType !='Sales Out Rebate'))}">
                    <aura:if isTrue="{!v.loggedInUserName!=v.isMarketingApprovePerson}">
                        <td ondblclick="{!c.inlineEditISOV}">
                            <span class="slds-grid slds-grid_align-spread">
                                <aura:if isTrue="{!v.ISOVEditMode == false}">
                                    <span class="">{!v.singleRec.Phoenix_Initial_Stocking_Order_Volume__c}</span>
                                    <button onclick="{!c.inlineEditISOV}"
                                            class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                            tabindex="0">
                                        <lightning:icon iconName="utility:edit" size="xx-small" alternativeText="edit" />
                                    </button>
                                    <aura:set attribute="else">
                                        <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                                 style="position: absolute; top: 0px;width:max-content;">
                                            <div class="slds-popover__body">
                                                <div class="slds-form-element slds-grid slds-wrap">
                                                    <div class="slds-form-element__control slds-grow">
                                                        <ui:inputNumber class="slds-input inputWidth"
                                                                        labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                        aura:id="inputISOVId" blur="{!c.closeISOVBox}"
                                                                        change="{!c.onCISUChange}"
                                                                        value="{!v.singleRec.Phoenix_Initial_Stocking_Order_Volume__c}" />
                                                    </div>
                                                </div>
                                            </div>
                                            <span id="form-end" tabindex="0"></span>
                                        </section>
                                    </aura:set>
                                </aura:if>
                            </span>
                        </td>
                        <td ondblclick="{!c.inlineEditISOC}">
                            <span class="slds-grid slds-grid_align-spread">
                                <aura:if isTrue="{!v.ISOCEditMode == false}">
                                    <span class="">{!v.singleRec.Phoenix_Initial_Stocking_Order_Comments__c}</span>
                                    <button onclick="{!c.inlineEditISOC}"
                                            class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                            tabindex="0">
                                        <lightning:icon iconName="utility:edit" size="xx-small" alternativeText="edit" />
                                    </button>
                                    <aura:set attribute="else">
                                        <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                                 style="position: absolute; top: 0px;width:max-content;">
                                            <div class="slds-popover__body">
                                                <div class="slds-form-element slds-grid slds-wrap">
                                                    <div class="slds-form-element__control slds-grow">
                                                        <ui:inputText class="slds-input inputWidth"
                                                                      labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                      aura:id="inputISOCId" blur="{!c.closeISOCBox}"
                                                                      change="{!c.onCISUChange}"
                                                                      value="{!v.singleRec.Phoenix_Initial_Stocking_Order_Comments__c}" />
                                                    </div>
                                                </div>
                                            </div>
                                            <span id="form-end" tabindex="0"></span>
                                        </section>
                                    </aura:set>
                                </aura:if>
                            </span>
                        </td>
                        
                        <aura:set attribute="else">
                            <td class="slds-text-align_right">{!v.singleRec.Phoenix_Initial_Stocking_Order_Volume__c}</td>
                            <td class="slds-text-align_right">{!v.singleRec.Phoenix_Initial_Stocking_Order_Comments__c}</td>
                        </aura:set>
                    </aura:if>
                </aura:if>
                <aura:if  isTrue="{!and(and(v.bidType!='Price Change',v.bidType!='Sales Out Promotional Discount'),and(v.bidType!='Sales Out Rebate',v.bidType!='Customer Rebate Change'))}">
                    
                    <aura:if
                             isTrue="{!and(and(v.singleRec.Phoenix_SCM_Approval_Y_N__c!='N- Not Approved',v.singleRec.Phoenix_SCM_Final_Approval__c==true),not(empty(v.singleRec.Phoenix_SCM_Approval_Y_N__c)))}">
                        
                        <td class="slds-text-align_right">{!v.singleRec.Phoenix_Estimated_Lead_Time_Days__c}</td>
                        <td class="slds-text-align_right">{!v.singleRec.Phoenix_SCM_Approval_Y_N__c}</td>
                        <td class="slds-text-align_right">{!v.singleRec.Phoenix_SCM_Notes__c}</td>
                        <aura:set attribute="else">
                            <td class="slds-text-align_right"></td>
                            <td class="slds-text-align_right"></td>
                            <td class="slds-text-align_right"></td>
                        </aura:set>
                    </aura:if>
                </aura:if>
            </aura:if>
            <aura:if isTrue="{!v.loggedInUserName!=v.isMarketingApprovePerson}">
                <td ondblclick="{!c.inlineEditSalesNotes}">
                    <span class="slds-grid slds-grid_align-spread">
                        <!-- show input and output section based on boolean flag -->
                        <aura:if isTrue="{!v.SalesNotesEditMode == false}">
                            <span class="">{!v.singleRec.Phoenix_Sales_Notes__c}</span>
                            <button onclick="{!c.inlineEditSalesNotes}"
                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                    tabindex="0">
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <!-- Inline Edit Section in else case-->
                            <aura:set attribute="else">
                                <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                         style="position: absolute; top: 0px;width:max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputText class="slds-input inputWidth"
                                                              labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                              aura:id="inputSalesNoteId" blur="{!c.closeSalesNotesBox}"
                                                              change="{!c.onCISUChange}"
                                                              value="{!v.singleRec.Phoenix_Sales_Notes__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align_right">{!v.singleRec.Phoenix_Sales_Notes__c}</td>
                </aura:set>
            </aura:if>
            <aura:if isTrue="{!or(v.loggedInUserName==v.singleRec.Phoenix_Product_Director__c,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,or(v.isMarketingApprovePerson==v.singleRec.Phoenix_Product_Director__c,v.isdeligationApprover)))}">
                <aura:if isTrue="{!v.bidType!='Volume Review Only'}">
                    <td ondblclick="{!c.inlineEditMarketingApproval}">
                        <span class="slds-grid slds-grid_align-spread">
                            <aura:if isTrue="{!v.MarketApprovalEditMode == false}">
                                <span class="">{!v.singleRec.Phoenix_Marketing_Approval__c}</span>
                                <button onclick="{!c.inlineEditMarketingApproval}"
                                        class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                        tabindex="0">
                                    <lightning:icon iconName="utility:edit" size="xx-small" />
                                </button>
                                <aura:set attribute="else">
                                    <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                             style="position: absolute; top: 0px;width:max-content;">
                                        <div class="slds-popover__body">
                                            <div class="slds-form-element slds-grid slds-wrap">
                                                <div class="slds-form-element__control slds-grow">
                                                    <lightning:select name="MarketApproval" aura:id="inputMarketApprovalId"
                                                                      onblur="{!c.closeMarketApprovalBox}" onchange="{!c.onCISUChange}">
                                                        <option value="{!v.singleRec.Phoenix_Marketing_Approval__c}">
                                                            {!v.singleRec.Phoenix_Marketing_Approval__c}</option>
                                                        <aura:if
                                                                 isTrue="{!(v.singleRec.Phoenix_Marketing_Approval__c != '--None--')}">
                                                            <option value="">--None--</option>
                                                        </aura:if>
                                                        <aura:if
                                                                 isTrue="{!(v.singleRec.Phoenix_Marketing_Approval__c != 'Approved')}">
                                                            <option value="Approved">Approved</option>
                                                        </aura:if>
                                                        <aura:if
                                                                 isTrue="{!(v.singleRec.Phoenix_Marketing_Approval__c != 'Not Approved')}">
                                                            <option value="Not Approved">Not Approved</option>
                                                        </aura:if>
                                                    </lightning:select>
                                                </div>
                                            </div>
                                        </div>
                                        <span id="form-end" tabindex="0"></span>
                                    </section>
                                </aura:set>
                            </aura:if>
                        </span>
                    </td>
                </aura:if>
                <aura:if isTrue="{!v.bidType!='Volume Review Only'}">
                    <td ondblclick="{!c.inlineEditMarketingNotes}">
                        <span class="slds-grid slds-grid_align-spread">
                            <aura:if isTrue="{!v.MarkNotesEditMode == false}">
                                <span class="">{!v.singleRec.Phoenix_Marketing_Notes__c}</span>
                                <button onclick="{!c.inlineEditMarketingNotes}"
                                        class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                        tabindex="0">
                                    <lightning:icon iconName="utility:edit" size="xx-small" />
                                </button>
                                <aura:set attribute="else">
                                    <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                             style="position: absolute; top: 0px;width:max-content;">
                                        <div class="slds-popover__body">
                                            <div class="slds-form-element slds-grid slds-wrap">
                                                <div class="slds-form-element__control slds-grow">
                                                    <ui:inputText class="slds-input inputWidth"
                                                                  labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                  aura:id="inputMarketNotesId" blur="{!c.closeMarketNotesBox}"
                                                                  change="{!c.onCISUChange}"
                                                                  value="{!v.singleRec.Phoenix_Marketing_Notes__c}" />
                                                </div>
                                            </div>
                                        </div>
                                        <span id="form-end" tabindex="0"></span>
                                    </section>
                                </aura:set>
                            </aura:if>
                        </span>
                    </td>
                </aura:if>
                <aura:set attribute="else">
                    <aura:if isTrue="{!v.bidType!='Volume Review Only'}">
                        <td> {!v.singleRec.Phoenix_Marketing_Approval__c}</td>
                        <td>{!v.singleRec.Phoenix_Marketing_Notes__c}</td>
                    </aura:if>
                </aura:set>
            </aura:if>
            <aura:if isTrue="{!v.bidType!='Volume Review Only'}">
                <aura:if isTrue="{!v.singleRec.Phoenix_Final_Finance_Approval__c==true}">
                    <td >{!v.singleRec.Phoenix_Finance_Approval__c}</td>
                    <td>{!v.singleRec.Phoenix_Finance_Comments__c}</td>
                    <aura:set attribute="else">
                        <td class="slds-text-align_right"></td>
                        <td class="slds-text-align_right"></td>
                    </aura:set>
                </aura:if>
            </aura:if>
            <aura:if
                     isTrue="{!and(and(v.isContractsApprovePerson==true,v.BidAprrovalStatus=='Contracts'),v.loggedInUserName==v.singleRec.Phoenix_Bid__r.Phoenix_Customer__r.Phoenix_Contracts_Approver__r.Name)}">
                <td ondblclick="{!c.inlineEditContractApproval}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.ContractApprovalEditMode == false}">
                            <span class="">{!v.singleRec.Phoenix_Contract_Approval__c}</span>
                            <button onclick="{!c.inlineEditContractApproval}"
                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                    tabindex="0">
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <aura:set attribute="else">
                                <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                         style="position: absolute; top: 0px;width:max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <lightning:select name="ContractApproval"
                                                                  aura:id="inputContractApprovalId"
                                                                  onblur="{!c.closeContractApprovalBox}" onchange="{!c.onCISUChange}">
                                                    <option value="{!v.singleRec.Phoenix_Contract_Approval__c}">
                                                        {!v.singleRec.Phoenix_Contract_Approval__c}</option>
                                                    <aura:if
                                                             isTrue="{!(v.singleRec.Phoenix_Contract_Approval__c != 'Approved')}">
                                                        <option value="Approved">Approved</option>
                                                    </aura:if>
                                                    <aura:if
                                                             isTrue="{!(v.singleRec.Phoenix_Contract_Approval__c != 'Not Approved')}">
                                                        <option value="Not Approved">Not Approved</option>
                                                    </aura:if>
                                                </lightning:select>
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                <td ondblclick="{!c.inlineEditContractComments}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.ContractCommentsEditMode == false}">
                            <span class="">{!v.singleRec.Phoenix_Contract_Comments__c}</span>
                            <button onclick="{!c.inlineEditContractComments}"
                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                    tabindex="0">
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <aura:set attribute="else">
                                <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                         style="position: absolute; top: 0px;width:max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputText class="slds-input inputWidth"
                                                              labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                              aura:id="inputContractCommentsId"
                                                              blur="{!c.closeContractCommentslBox}" change="{!c.onCISUChange}"
                                                              value="{!v.singleRec.Phoenix_Contract_Comments__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align_right"> {!v.singleRec.Phoenix_Contract_Approval__c}</td>
                    <td class="slds-text-align_right">{!v.singleRec.Phoenix_Contract_Comments__c}</td>
                </aura:set>
            </aura:if>
            <td>{!v.singleRec.Phoenix_WAC_Check__c}</td>
            <aura:if isTrue="{!or(v.bidType =='RFP Bids',v.bidType =='Product Addition')}">
                <td class="slds-text-align_right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_IOD_Qty__c}" style="decimal"
                                               maximumFractionDigits="2" />
                </td>
            </aura:if>
            
        </aura:if>
        <!-- vandana verified end -->
        
        <aura:if isTrue="{!not(and(or(v.BidAprrovalStatus=='Draft', and(or(v.isMarketingApprovePerson==v.singleRec.Phoenix_Product_Director__c,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,v.isdeligationApprover)),or(v.BidAprrovalStatus=='SCM &amp; Marketing',v.BidAprrovalStatus=='Marketing'))),v.singleRec.Phoenix_Marketing_Final_Approval__c!=true))}">
            <th scope="row" class="{! v.showErrorClass == true ? 'slds-cell-edit slds-has-error' : 'slds-cell-edit'}">
                
            </th>
            <th scope="row" class="{! v.showErrorClass == true ? 'slds-cell-edit slds-has-error' : 'slds-cell-edit'}">
                <span class="slds-grid slds-grid_align-spread">
                    <span class="" title="NDC">{!v.singleRec.Phoenix_NDC__c}</span>
                </span>
            </th>
            <th scope="row">{!v.singleRec.Phoenix_Product_Code1__c}</th>
            <th scope="row">
                <!--Added by Naseer to replace Product Family with Lookup-->
                <lightning:formattedUrl value="{!'/' + v.singleRec.Product_Family__c}"
                                        label="{!v.singleRec.Product_Family_Name__c}" target="_self" />
                <!--End-->
                <!--{!v.singleRec.Phoenix_Product_Family__c}-->
            </th>
            <th scope="row">{!v.singleRec.Phoenix_Pkg_Size__c}</th>
            <th scope="row">
                <span class="slds-grid slds-grid_align-spread">
                    <span class="" title="Product">
                        <lightning:formattedUrl value="{!'/' + v.singleRec.Phoenix_Product__r.Id}"
                                                label="{!v.singleRec.Phoenix_Product__r.Name}" target="_self" />
                    </span>
                </span>
            </th>
            
            
            
            
            <!-- logic for Re-Bid functionality- starts-->
            <aura:if isTrue="{!v.isReBid}">
                <td class="slds-text-align_right"> <a href="{!'/'+v.singleRec.Phoenix_Previous_Bid__c}"
                                                      target="_blank">{!v.singleRec.Phoenix_Previous_Bid__r.Name}</a></td>
                <td class="slds-text-align_right"> <a onclick="{!c.showSelectedproducts}">{!v.singleRec.Phoenix_Previous_LineItem__r.Name}</a></td>
            </aura:if>
            <!-- logic for Re-Bid functionality- ends-->
            
            <td class="slds-text-align_right">{!v.singleRec.Phoenix_Case_Pack__c}</td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_MOQ1__c}" maximumFractionDigits="2" />
            </td>
            <td >{!v.singleRec.Phoenix_Compare_To_Brand_Name1__c}</td>
            <td>{!v.singleRec.Phoenix_Product_Director__c}</td>
            <td class="slds-text-align_right">{!v.singleRec.Phoenix_Orange_Book_Rating1__c}</td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Throughput_cost__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_WAC__c}" style="currency" currencyCode="USD" maximumFractionDigits="2"/>
            </td>
            <td class="slds-text-align_left">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_IMS_Market_Share__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <aura:if isTrue="{!v.singleRec.Phoenix_REMS__c}">
                <td style="color:red;">Yes</td>
                <aura:set attribute="else">
                    <td>No</td>
                </aura:set>
            </aura:if>
            <aura:if isTrue="{!v.bidType!='New Product Launch'}">
                <td class="slds-text-align_right">
                    <div class="slds-grid" style="width:200px">
                        <div class="slds-grid slds-has-flexi-truncate">
                            <p class="slds-truncate" title="{!v.singleRec.Phoenix_Current_Position__c}">
                                {!v.singleRec.Phoenix_Current_Position__c}</p>
                        </div>
                    </div>
                </td>
            </aura:if>
            <td class="" ondblclick="{!c.inlineEditPositions}">
                <span class="slds-grid slds-grid_align-spread">
                    <span>
                        <div class="slds-grid" style="width:200px">
                            <div class="slds-grid slds-has-flexi-truncate">
                                <p class="slds-truncate" title="{!v.singleRec.Phoenix_Proposed_Position__c}">
                                    {!v.singleRec.Phoenix_Proposed_Position__c}
                                </p>
                                
                            </div>
                        </div>
                    </span>
                </span>
            </td>
            <aura:if isTrue="{!v.bidType !='New Product Launch'}">
                <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Current_Indirect_Selling_Unit__c}"  maximumFractionDigits="0"/>
                </td>
                <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_12_Months_IndirectSaleUnit__c}"  maximumFractionDigits="0"/>
                </td>
                <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Override_Current_Indirect_Units__c}"  maximumFractionDigits="0"/>
                </td>
            </aura:if>
            <aura:if  isTrue="{!v.bidType !='Price Change'}">
                <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Indirect_Selling_Unit__c}"  maximumFractionDigits="0"/>
                </td>
            </aura:if>
            <aura:if isTrue="{!v.bidType!='New Product Launch'}">
                <aura:if isTrue="{!v.bidType!='Price Change'}">
                    <aura:if isTrue="{!and(and(v.singleRec.Phoenix_SCM_Approval_Y_N__c!='N- Not Approved',v.singleRec.Phoenix_SCM_Final_Approval__c==true),not(empty(v.singleRec.Phoenix_SCM_Approval_Y_N__c)))}">
                        <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Total_SCM_Approved_Qty__c}"  maximumFractionDigits="0"/></td>
                        <aura:set attribute="else">
                            <td class="slds-text-align_right"></td>
                        </aura:set>
                    </aura:if>
                </aura:if>
            </aura:if>
            <aura:if isTrue="{!v.bidType !='New Product Launch'}">
                <aura:if isTrue="{!v.templateType=='Humana Indirect CII'}">
                    <td class="slds-text-align_right">
                        <lightning:formattedNumber value="{!v.singleRec.Phoenix_Current_Direct_Price__c}" style="currency"
                                                   currencyCode="USD" maximumFractionDigits="2" />
                    </td>
                </aura:if>
                <td class="slds-text-align_right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Current_Indirect_Price__c}" style="currency"
                                               currencyCode="USD" maximumFractionDigits="2" />
                </td>
            </aura:if>
            
            <aura:if isTrue="{!v.bidType !='Volume Review Only'}">
                <td class="slds-text-align_right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Guidance_Price__c}" style="currency"
                                               currencyCode="USD" maximumFractionDigits="2" />
                </td>
                
                <td class="slds-text-align_right">
                    <div
                         >
                        <lightning:formattedNumber
                                                   
                                                   value="{!v.singleRec.Phoenix_ProposedContract_Bid_Price_Sales__c}" style="currency"
                                                   currencyCode="USD" maximumFractionDigits="2"/>
                    </div>
                </td>
            </aura:if>
            <aura:if isTrue="{!and(v.bidType !='Volume Review Only',v.bidType  !='New Product Launch')}">
                <td class="slds-text-align_right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Reduction__c}" style="percent-fixed"  maximumFractionDigits="2"  />
                </td>
            </aura:if>
            
            
            <aura:if isTrue="{!v.bidType =='New Product Launch'}">
                <td class="slds-text-align_right"> <lightning:formattedNumber value="{!v.singleRec.Brand_WAC__c}"
                                                                              style="currency" currencyCode="USD" maximumFractionDigits="2" /></td>
                <td class="slds-text-align_right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Brand_WAC_Per__c}" style="percent-fixed"
                                               maximumFractionDigits="2" />
                </td>
            </aura:if>
            
            
            
            <aura:if isTrue="{!v.bidType !='Volume Review Only'}">
                <aura:if isTrue="{!v.templateType=='Humana Indirect CII'}">
                    <td class="slds-text-align_right">
                        <!--    <span> <lightning:icon iconName="utility:info" class="infoColor" title="{!('% of WAC: '+v.singleRec.wacPercent +' || % of Current Contract Price: '+v.singleRec.currentContractPrice)}" size="x-small"/>  -->
                        <span
                              style="{!lessthan(v.Deadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'color:red':''}">
                            <lightning:formattedNumber
                                                       title="{!lessthan(v.Deadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'Internal Dead Net Price is less than Lowest Price/SKU or Approved Lowest Price/SKU':''}"
                                                       value="{!v.singleRec.Phoenix_ProposedContractBidPriceMktng__c}" style="currency" maximumFractionDigits="2"
                                                       currencyCode="USD" />
                        </span>
                    </td>
                </aura:if>
                
                <td class="slds-text-align_right">
                    <span>  <aura:if isTrue="{!v.singleRec.Phoenix_Wholesaler_Diff_Price_Indirect__c>0}">
                                        <lightning:icon iconName="utility:info" class="infoColor" title="{!('% of WAC: '+v.singleRec.wacPercent +' || % of Current Contract Price: '+v.singleRec.currentContractPrice)}" size="x-small"/>  
                                        </aura:if>
                        <lightning:formattedNumber value="{!v.singleRec.Phoenix_Wholesaler_Diff_Price_Indirect__c}"
                                                   style="currency" currencyCode="USD" maximumFractionDigits="2"/>
                    </span>
                </td>
            </aura:if>
            <aura:if isTrue="{!v.templateType=='Humana Indirect CII'}">
                <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Net_Price_afterRebates_after_VIP__c}" style="currency" currencyCode="USD" maximumFractionDigits="2"/></td>
            </aura:if>
            <!-- till here verified -->
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Contract_Mngment_Fee_Wholesaler__c}"
                                           style="percent-fixed" maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_CM_FEE__c}" style="currency" currencyCode="USD" maximumFractionDigits="2"/></td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Indirect_CD_Per__c}" style="percent-fixed"
                                           maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_INDIRECT_CD__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            
            <td class="slds-text-align--right">
                <div style="{!v.isAccpetable ?'color:green':!v.isNotAccpetable ?'color:red': ''}">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Internal_Dead_Net_Price__c}"
                                               title="{!v.isAccpetable ?'Deadnet price is greater than LE+10% of LE (or) BASP+10% of BASP':!v.isNotAccpetable ?'Deadnet price is less than LE-10% of LE (or) BASP-10% of BASP': ''}"
                                               style="currency" currencyCode="USD" />
                </div>
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Proposed_TPT_Direct__c}"
                                           style="currency" currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Proposed_TPT_Per_Direct__c}"
                                           style="percent-fixed"  maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Medicaid_Returns_Per_Unit_in__c}"
                                           style="currency" currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Net_Sales_Internal__c}" style="currency"
                                           currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
            </td>
            <!--<td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Less_Cost__c}" style="currency" currencyCode="USD" maximumFractionDigits="2" /></td>-->
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Th_Put_Margin__c}" style="currency"
                                           currencyCode="USD" minimumFractionDigits="0" />
            </td>
            
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_TP_Margin__c}" style="percent-fixed"
                                           maximumFractionDigits="2" />
            </td>
            
            <aura:if isTrue="{!v.bidType =='New Product Launch'}">
                <td>
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Opening_Order__c}"
                                               maximumFractionDigits="2" />
                </td>
                <td>
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Opening_Order_Net_sales__c}" style="currency"
                                               currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                <td>
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Opening_Order_TPT__c}" style="currency"
                                               currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                <td>
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Opening_Order_TPT_Per__c}" style="percent-fixed"
                                               maximumFractionDigits="2" />
                </td>
            </aura:if>
            
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Budgeted_ASP1__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_to_Budget__c}" style="percent-fixed"
                                           maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Latest_Estimate__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_as_of_Latest_Estimate__c}"
                                           style="percent-fixed" maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Lowest_Price_SKU__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Approved_Lowest_Price_SKU__c}" style="currency" currencyCode="USD" maximumFractionDigits="2"/></td>
            <aura:if isTrue="{!v.bidType !='New Product Launch'}">
                <aura:if
                         isTrue="{!and(v.bidType !='Price Change',and(v.bidType !='Customer Rebate Change',v.bidType !='Sales Out Rebate'))}">
                    <td >{!v.singleRec.Phoenix_Initial_Stocking_Order_Volume__c}</td>
                    <td >{!v.singleRec.Phoenix_Initial_Stocking_Order_Comments__c}</td>
                </aura:if>
                <aura:if
                         isTrue="{!and(and(v.bidType!='Price Change',v.bidType!='Sales Out Promotional Discount'),and(v.bidType!='Sales Out Rebate',v.bidType!='Customer Rebate Change'))}">
                    <aura:if isTrue="{!and(and(v.singleRec.Phoenix_SCM_Approval_Y_N__c!='N- Not Approved',v.singleRec.Phoenix_SCM_Final_Approval__c==true),not(empty(v.singleRec.Phoenix_SCM_Approval_Y_N__c)))}">
                        <td class="slds-text-align_right">{!v.singleRec.Phoenix_Estimated_Lead_Time_Days__c}</td>
                        <td >{!v.singleRec.Phoenix_SCM_Approval_Y_N__c}</td>
                        <td >{!v.singleRec.Phoenix_SCM_Notes__c}</td>
                        <aura:set attribute="else">
                            <td class="slds-text-align_right"></td>
                            <td class="slds-text-align_right"></td>
                            <td class="slds-text-align_right"></td>
                        </aura:set>
                    </aura:if>
                </aura:if>
            </aura:if>
            <td>{!v.singleRec.Phoenix_Sales_Notes__c}</td>
            <aura:if isTrue="{!v.bidType!='Volume Review Only'}">
                <td>{!v.singleRec.Phoenix_Marketing_Approval__c}</td>
                <td>{!v.singleRec.Phoenix_Marketing_Notes__c}</td>
            </aura:if>
            <aura:if isTrue="{!v.bidType!='Volume Review Only'}">
                <aura:if isTrue="{!v.singleRec.Phoenix_Final_Finance_Approval__c==true}">
                    <td >{!v.singleRec.Phoenix_Finance_Approval__c}</td>
                    <td>{!v.singleRec.Phoenix_Finance_Comments__c}</td>
                    <aura:set attribute="else">
                        <td class="slds-text-align_right"></td>
                        <td class="slds-text-align_right"></td>
                    </aura:set>
                </aura:if>
            </aura:if>
            <td> {!v.singleRec.Phoenix_Contract_Approval__c}</td>
            <td >{!v.singleRec.Phoenix_Contract_Comments__c}</td>
            <td >{!v.singleRec.Phoenix_WAC_Check__c}</td>
            <aura:if isTrue="{!or(v.bidType =='RFP Bids',v.bidType =='Product Addition')}">
                <td class="slds-text-align_right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_IOD_Qty__c}" style="decimal"
                                               maximumFractionDigits="2" />
                </td>
            </aura:if> 
        </aura:if>
        <td>
            <lightning:button variant="base" label="BH" title="BH" onclick="{!c.displayBidHist}"
                              name="{!v.singleRec.Id}" />
            <lightning:button variant="base" label="NH" title="NH" onclick="{!c.displayProdNPRHist}"
                              name="{!v.singleRec.Id}" />
            <lightning:button variant="base" label="MS" title="MS" onclick="{!c.displayIMSMarketShare}"
                              name="{!v.singleRec.Id}" />
            <lightning:button variant="base" label="PT" title="PT" onclick="{!c.displayHistoricalPricing}"
                              name="{!v.singleRec.Id}" />
            <lightning:button variant="base" label="FR" title="FR" onclick="{!c.displayFutureRecords}"
                              name="{!v.singleRec.Id}" />
        </td>
    </tr>
    <aura:if isTrue="{!v.sNo==v.ItemsLength}">
        <tr>
            <th scope="row"><!--Delete --></th>
            <th scope="row"><!--NDC --></th>
            <th scope="row"><!--SAP --></th>
            <th scope="row"><!--Product name --></th>
            <th scope="row"><!--Pkg Size --></th>
            <th scope="row">Totals</th>
            <aura:if isTrue="{!v.isReBid}">
                <td class="slds-text-align_right"></td>
                <td class="slds-text-align_right"></td>
            </aura:if>
            <td class="slds-text-align_right"><!--Casepack --></td>
            <td class="slds-text-align_right"><!--MOQ --></td>
            <td class="slds-text-align_right"><!--CMp Brand Name --></td>
            <td class="slds-text-align_right"><!--Product Dire --></td>
            <td class="slds-text-align_right"><!--Orgenage book rating --></td>
            
            <td class="slds-text-align_right"><!--TP Cost --></td>
            <td class="slds-text-align_right"><!--WAC --></td>
            
            <td class="slds-text-align_right"><!--REMS --></td>
            <td class="slds-text-align_right"><!--IMS --></td>
            <aura:if isTrue="{!v.bidType!='New Product Launch'}">
                <td class="slds-text-align_right"><!--Currnet Position --></td>
            </aura:if>
            <td class="slds-text-align_right"><!--Proposed Position --></td>
            <aura:if isTrue="{!v.bidType!='New Product Launch'}">
                <td class="slds-text-align_right"> <lightning:formattedNumber value="{!v.CISUTotal}" minimumFractionDigits="0" maximumFractionDigits="0"/><!--3M mon Anul Indir Units --></td>
                <td class="slds-text-align_right"> <lightning:formattedNumber value="{!v.actSalInd12months
                                                                                     }" minimumFractionDigits="0" maximumFractionDigits="0"/><!--3M mon Anul Dir Selling unit --></td>
                <td class="slds-text-align_right"> <lightning:formattedNumber value="{!v.overRideIndirectUnits}" minimumFractionDigits="0" maximumFractionDigits="0"/></td>                   
                
            </aura:if>
            <aura:if isTrue="{!v.bidType!='Price Change'}">
                <td class="slds-text-align_right"> <lightning:formattedNumber value="{!v.PISUTotal}" minimumFractionDigits="0" maximumFractionDigits="0"/></td>                    
            </aura:if>
            <aura:if isTrue="{!v.bidType!='New Product Launch'}">
                <aura:if isTrue="{!v.bidType!='Price Change'}">
                    <aura:if isTrue="{!and(and(v.singleRec.Phoenix_SCM_Approval_Y_N__c!='N- Not Approved',v.singleRec.Phoenix_SCM_Final_Approval__c==true),not(empty(v.singleRec.Phoenix_SCM_Approval_Y_N__c)))}">
                        <td class="slds-text-align_right"> <lightning:formattedNumber value="{!v.scmAPQTY}" minimumFractionDigits="0" maximumFractionDigits="0"/></td>                    
                        <aura:set attribute="else">
                            <td class="slds-text-align_right"></td>
                        </aura:set>
                    </aura:if>
                </aura:if>
            </aura:if>
            <aura:if isTrue="{!v.bidType!='New Product Launch'}">
                <aura:if isTrue="{!v.templateType=='Humana Indirect CII'}">
                    <td class="slds-text-align_right"><!--current direct price --></td>
                </aura:if>
                <td class="slds-text-align_right"></td>
            </aura:if>
            <aura:if isTrue="{!v.bidType !='Volume Review Only'}">
                <td class="slds-text-align_right"></td>
                <td class="slds-text-align_right"></td>
                <aura:if isTrue="{!v.bidType !='New Product Launch'}">
                    <td class="slds-text-align_right"><!--reduction --></td>
                </aura:if>
            </aura:if>
            <aura:if isTrue="{!v.bidType =='New Product Launch'}">
                <td class="slds-text-align_right"><!--brand wac --></td>
                <td class="slds-text-align_right"><!--brand wac % --></td>
            </aura:if>
            
            
            <aura:if isTrue="{!v.bidType !='Volume Review Only'}">
                <aura:if isTrue="{!v.templateType=='Humana Indirect CII'}">
                    <td class="slds-text-align_right"><!--marketing price direct --></td>
                </aura:if>
                <td class="slds-text-align_right"><!--marketing price Indirect --></td>
            </aura:if>
            <aura:if isTrue="{!v.templateType=='Humana Indirect CII'}">
                <td class="slds-text-align_right"><!-- --></td>
            </aura:if>
            <td class="slds-text-align_right"><!-- --></td>
            <td class="slds-text-align_right"><!-- --></td>
            <td class="slds-text-align_right"><!-- --></td>
            <td class="slds-text-align_right"><!-- --></td>
            <td class="slds-text-align_right"><!-- --></td>
            <td class="slds-text-align_right"><!-- --></td>
            <td class="slds-text-align_right"><!-- --></td>
            <td class="slds-text-align_right"><!-- --></td>
            <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.netSalesIntTotal}" style="currency" currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0"/></td>
            
            <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.ThptMrgnDTotal}" style="currency" currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0"/></td>
            <td class="slds-text-align_right"><lightning:formattedNumber value="{!(and(v.ThptMrgnDTotal != null,and(v.netSalesIntTotal !=0 ,v.netSalesIntTotal!=null)) ? (v.ThptMrgnDTotal/v.netSalesIntTotal):0)}" style="percent" 
                                                                         minimumFractionDigits="2" maximumFractionDigits="2"/></td>
            
            
            <aura:if isTrue="{!v.bidType =='New Product Launch'}">
                <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.OpeningOrderTotal}"/> </td>
                <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.OpeningOrderNetSalesTotal}" style="currency" currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0"/></td>
                <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.OpeningOrderTPTTotal}" style="currency" currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0"/></td>
                <td class="slds-text-align--right"><lightning:formattedNumber value="{!v.OpeningOrderTPTPercTotal}" style="percent-fixed" minimumFractionDigits="2"/></td>
            </aura:if>
            
            <td class="slds-text-align_right"><!-- --></td>
            <td class="slds-text-align_right"><!-- --></td>
            <td class="slds-text-align_right"><!-- --></td>
            <td class="slds-text-align_right"><!-- --></td>
            <td class="slds-text-align_right"><!-- lowest price--></td>
            <td class="slds-text-align_right"><!-- approved lowest price--></td>
            <aura:if isTrue="{!v.bidType !='New Product Launch'}">
                <aura:if isTrue="{!and(v.bidType !='Price Change',and(v.bidType !='Customer Rebate Change',v.bidType !='Sales Out Rebate'))}">
                    <td class="slds-text-align_right"><!-- --></td>
                    <td class="slds-text-align_right"><!-- --></td>
                </aura:if>
                <aura:if isTrue="{!and(and(v.bidType!='Price Change',v.bidType!='Sales Out Promotional Discount'),and(v.bidType!='Sales Out Rebate',v.bidType!='Customer Rebate Change'))}">
                    <td class="slds-text-align_right"><!-- --></td>
                    <td class="slds-text-align_right"><!-- --></td>
                    <td class="slds-text-align_right"><!-- --></td>
                </aura:if>
            </aura:if>
            <td class="slds-text-align_right"><!-- --></td>
            <aura:if isTrue="{!v.bidType!='Volume Review Only'}">
                <td class="slds-text-align_right"><!-- --></td>
                <td class="slds-text-align_right"><!-- --></td>
            </aura:if>
            <aura:if isTrue="{!v.bidType!='Volume Review Only'}">
                <td class="slds-text-align_right"><!-- --></td>
                <td class="slds-text-align_right"><!-- --></td>
            </aura:if>
            <td class="slds-text-align_right"><!-- --></td>
            <td class="slds-text-align_right"><!-- --></td>
            <td class="slds-text-align_right"><!-- --></td>
            <aura:if isTrue="{!or(v.bidType =='RFP Bids',v.bidType =='Product Addition')}">
                <td class="slds-text-align_right"></td>
            </aura:if> 
            <td class="slds-text-align_right"></td>
            
        </tr>
    </aura:if>
    <aura:if isTrue="{!v.marketingPricePopUp}">
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            
            <div class="slds-modal__container" style="width:50% ! important;">
                
                <!-- Modal/Popup Box Header Starts here-->
                <header class="slds-modal__header">
                    <lightning:buttonIcon iconName="utility:close"
                                          onclick="{!c.closeMktgPopup}"
                                          alternativeText="close"
                                          variant="bare-inverse"
                                          class="slds-modal__close"/>
                    <h2 class="slds-text-heading_medium slds-hyphenate"><b>Warning</b></h2>      
                </header>
                <div class="slds-modal__content slds-p-around_medium" >
                    <center> 
                        <aura:if isTrue="{!v.singleRec.Latest_Line_Item__r.Phoenix_Final_Status__c == 'Not Approved'}">
                            This is a price fetched from a Direct RFP <a href="{!'/' + v.singleRec.Latest_Line_Item__r.Phoenix_Bid__c}" target="_blank">{!v.BidNameForPopup}</a> if you want to change the price please do in the parent bid, if the marketing step is completed then recall the bid and change the price the price gets automatically reflected in this bid.
                            <aura:set attribute="else">
                                Please ensure to complete the pricing for a Direct RFP <a href="{!'/' + v.singleRec.Latest_Line_Item__r.Phoenix_Bid__c}" target="_blank">{!v.BidNameForPopup}</a>, before to proceed further.       
                            </aura:set>
                        </aura:if>
                    </center>
                    
                </div>
                <footer class="slds-modal__footer">
                    <lightning:button variant="neutral"
                                      label="Cancel"
                                      title="Cancel"
                                      onclick="{! c.closeMktgPopup }"/>
                    <aura:if isTrue="{!v.ShowSaveButton}">
                        <lightning:button variant="neutral" label="Save" title="Save" onclick="{!c.onCISUChange }" />
                    </aura:if>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </aura:if>
</aura:component>