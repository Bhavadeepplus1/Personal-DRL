<aura:component controller="Phoenix_AddProdcutRemDiscCtrl" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickActionWithOutHeader" access="global" >
    <aura:attribute name="recordId" type="String"  />
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:attribute name="filetype" type="List" default="['.eml','.PST','.EDB','.MBOX','.OST','.odt','.wps','.rtf','.msg','.pps','.png','.war','.pjp','.apng','.gif','.pjp','.pjpeg','.jfif','.webp','.avif','.jpg','.jpeg','.pdf','.xlsm','.xlsx','.xlsb','.CSV','.xltx','.html', '.htt', '.mht',' .svg', '.swf', '.thtml','.xhtml','.txt','.odp','.pptx','.ppt','.docx','.doc','.docm','.dotx','.dot','.zip','.zipx','.tar','.xls']"/>
    <aura:attribute name="wrap" type="Object" description="To hold all objects" />
   <aura:attribute name="isView" type="Boolean" access="GLOBAL" default="false"/>
    <aura:attribute name="showFiles" type="Boolean" access="GLOBAL" default="false"/>
    <aura:attribute name="multiple" type="Boolean" default="true" />
       <aura:attribute name="fileList" type="List"  /> 
    <aura:attribute name="selectedProductsIds" type="list" description="Selected Product Ids" default="[]"/>
    <aura:attribute name="selectedContractIds" type="list" description="Selected Contract Ids" default="[]"/>
    
    <aura:attribute name="QLlineItems" type="Object[]" description="Selected Product details" default="[]"/>
    <aura:attribute name="ContrItems" type="Object[]" description="Selected contract details" default="[]"/>
    <aura:attribute name="QLlist" type="list" description="All bid line Product details" default="[]" />
    <aura:attribute name="contractCopyList" type="list" description="All Contract copy list" default="[]" />
    <aura:attribute name="contractList" type="list" description="All contract details" default="[]" />
    <aura:attribute name="insertedProdrecords" type="list" description="All Product details" default="[]" />
    <aura:attribute name="QLlist1" type="list" description="All Product details" default="[]" />
    <aura:attribute name="modalProductList" type="Object[]" description="used to store the selected products to display in Modal popup"/>
    <aura:attribute name="ProductList" type="Object[]" description="used to store the product list to display in table"/>
    <aura:attribute name="ProductCopyList" type="Object[]" description="used to store the product list to display in table"/>
    
    <aura:attribute name="Allproduct" type="Object[]" description="used to store the product list to display in table"/>
    <aura:attribute name="selectproduct" type="Object[]" description="used to store the product list"/>
    <aura:attribute name="allData" type="List" description="used to store the product list"/>
    <aura:attribute name="allContracts" type="List" description="used to store the Contract list"/>
    <aura:attribute name="allContractCopy" type="List" description="used to store the Contract list"/>
    <aura:attribute name="searchText" type="String"/>
    <aura:attribute name="showselectedContracts" type="Boolean" default="false"/>
    <aura:attribute name="selectedContracts" type="List"/>
    <aura:attribute name="searchContract" type="String"/>
    <aura:attribute name="currencyCode" type="String" default="$"/>
    <aura:attribute name="searchFamily" type="String"/>
    <aura:attribute name="selectedCount" type="integer" default="0" description="selected Product Records Count"/>
    <aura:attribute name="contractCount" type="integer" default="0" description="selected Product Records Count"/>
    
    <aura:attribute name="showbutton" type="Boolean" default="true" description="disable the button when no records selected"/>
    <aura:attribute name="search" type="Boolean" default="true" description="use for display search records"/>
    
    <aura:attribute name="currentPageNumber" type="Integer" default="1"/>
    <aura:attribute name="pageSize" type="Integer" default="100"/>
    <aura:attribute name="totalPages" type="Integer" default="0"/>
    <aura:attribute name="pageList" type="List"/>
    <aura:attribute name="currentPageNumber1" type="Integer" default="1"/>
    <aura:attribute name="totalPages1" type="Integer" default="0"/>
    <aura:attribute name="pageList1" type="List"/>
    <aura:attribute name="totalRecordsCount" type="Integer" default="0" description="display the total number of records"/>
    <aura:attribute name="showProducts" type="Boolean" default="false" />
    <aura:attribute name="showApprovals" type="Boolean" default="false" />
    <aura:attribute name="showNoProdcuts" type="Boolean" default="false" />
    <aura:attribute name="isQLlistempty" type="Boolean" default="false" />
    <aura:attribute name="noProducts" type="Boolean" default="false" />
    <aura:attribute name="noData" type="Boolean" default="false" />
    <aura:attribute name="noProd" type="Boolean" default="false" />
    <aura:attribute name="noContrData" type="Boolean" default="false" />
    <aura:attribute name="noContractData" type="Boolean" default="false" />
    <aura:attribute name="isModalOpen" type="Boolean" default="false" />
    <aura:attribute name="showSelectedProducts" type="Boolean" default="false" />
    <aura:attribute name="showContracts" type="Boolean" default="false" />
    <aura:attribute name="showuploadFile" type="Boolean" default="false" />
    <aura:attribute name="showTooltip" type="Boolean" default="false" />
    <aura:attribute name="showbidType" type="Boolean" default="false" />
    <aura:attribute name="showSpinnerSelProds" type="Boolean" default="false" />
    <aura:attribute name="selectAll" type="Boolean" default="false" />
    <aura:attribute name="selectAllContr" type="Boolean" default="false" />
    <aura:attribute name="arrowDirection" type="string" default="arrowup" description="Use for change arrow sign direction on header based on click"/>
    <aura:attribute name="isAsc" type="boolean" default="true" description="boolean flag for pass sorting condition to apex class"/>
    <aura:attribute name="selectedTabsoft" type="string" default="ProductName" description="Use for show/hide arraow sign on header based on conditions"/>
    <aura:attribute name="RxSrxList" type="List"  />
    <aura:attribute name="isRxChecked" type="boolean" default="false" />
      <aura:attribute name="showDraftView" type="boolean" default='true'/>
    <aura:attribute name="isSRxChecked" type="boolean" default="false" />
    <aura:attribute name="isOtcChecked" type="boolean" default="false" />
     <aura:attribute name="lstSelectedPDRecords" type="sObject[]" default="[]" description="Use,for store SELECTED sObject Records"/>
    <aura:attribute name="listOfSearchPDRecords" type="List" description="Use,for store the list of search records which returns from apex class" />
    <aura:attribute name="defaultlistOfProductDirectors" type="List" />
    <aura:attribute name="MessagePD" type="String" default=""/>
    <aura:attribute name="selectedProductsCount" type="Integer" default="0"/>
 
    <aura:attribute name="SearchKeyWordPD" type="string"/>
    
    
        <aura:handler name="PDSelectedRecordEvent" event="c:Phoenix_AddProductDirectorSearchEvt" action="{!c.handleComponentEventProdDir}"/>
    <aura:html tag="style">
        
        .cuf-content {
        padding: 0 0rem !important;
        }
        .slds-p-around--medium {
        padding: 0rem !important;
        }       
        
        
        
        .slds-modal__container{
        max-width: 100rem !important;
        width:100% !important;
        
        
        }
        customClass slds-modal__container{
        max-width: 50rem !important;
        width:50% !important;
        }
        .slds-button slds-button_brand{
        padding: initial; !important;
        }
        
         .slds-modal__content
        {
        height:unset !important;
        max-height:unset !important;
        overflow-x:auto;
        <aura:if isTrue= "{!v.showNoProdcuts}">
        background-color: transparent;
        
    </aura:if>
         <!--<aura:if isTrue= "{!v.showuploadFile}">
        max-width: 50rem !important;
        width:50% !important;
        
    </aura:if>-->
         <aura:if isTrue= "{!v.showProducts}">
        background-color: white;
    </aura:if>
        box-shadow: none !important;
        
        }
        
        .slds-modal__close {
        display:none !important;
        }
        
        
        .slds-button__icon slds-button__icon_left{
        
        margin-left: 6px; !important;
        }
        
        <!-- .slds-modal__content slds-p-around_large{
        width:100%; !important;
        }-->
    </aura:html>
      <aura:if isTrue="{!v.showDraftView}">
    <aura:if isTrue="{!v.showNoProdcuts}">
        <div class="panel slds-modal slds-fade-in-open"   tabindex="-1" role="dialog" aria-modal="true"  style="opacity: 1;outline:none;">  
            
            <div class="modal-container slds-modal__container" style="width:50rem !important;background-color:transparent;"> 
                <div class="modal-header slds-modal__header" style="padding-right: 5px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px;">
                    
                    <h2  class="slds-modal__title slds-hyphenate"
                        style="color:#675e5e">
                        <p style="font-size:21px;"><b>Select Products</b></p> 
                        
                    </h2>
                    
                </div>
                <div class="matchPanelError" tabindex="0" role="alert"
                     style="text-align:center;background-color:white;">
                    <br/>
                    <aura:if isTrue="{! !v.noProd}">
                        <span>Please select Bid Type as Mass Product Removals or Product Discontinuation Process to add products.</span>
                        <aura:set attribute="else">
                            <span>No products found.</span>
                        </aura:set>
                    </aura:if>
                    <br/> <br/>
                </div>
                
                <div class="modal-footer slds-modal__footer" style="background-color:white;">
                    <lightning:button variant="neutral" label="Close" onclick="{!c.closeModal}" />
                    
                </div>
            </div>
        </div>
    </aura:if>
    <aura:if isTrue="{!v.showProducts}">
        
        <aura:if isTrue="{!v.showSpinnerSelProds}">
            <lightning:spinner variant="brand" class="spinColor" size="large" />
        </aura:if>
        <div class="panel slds-modal slds-fade-in-open"   tabindex="-1" role="dialog" aria-modal="true"  style="opacity: 1;outline:none;">  
            
            <div class="modal-container slds-modal__container">            
                <div class="modal-header slds-modal__header" style="padding-right: 0px; padding-top: 5px; padding-bottom: 0px; padding-left: 0px;">
                
                <h2  class="slds-modal__title slds-hyphenate"  style="color:#675e5e">
                   
                    <p style="font-size:21px;"><b>Select Products</b></p> 
                        <span style="float:right">
                            <lightning:buttonIcon iconName="utility:close" alternativeText="Close"
                                                  class="customCloseIcon" onclick="{!c.closeModal}" />
                        </span>
                </h2>
                <div class="slds-grid slds-wrap">
                    <div class="slds-col  slds-grid slds-size_1-of-1 slds-m-left_small">
                       
                        
                        <div class="slds-col slds-size_7-of-12 slds-m-top_large">
							<span onkeypress="{!c.keyCheck}" >
                            <lightning:input value="{!v.searchText}" type="search"
                                             variant="label-hidden" placeholder="Search Products with Name,Product Code,Product Family,NDC,NDC with dashes,GPI,GPI with dashes,GCN,GCN-SEQ,Brand Name,UPC.."
                                             aura:id="SearchBox" label="Product Name" onchange="{!c.onsearch}"
                                             /></span>
                            </div>
                            
                            
                            
                            <div class="slds-col slds-size_3-of-12 slds-m-top_large sapdata" style="padding-left:13px;">

                                <div onmouseleave="{!c.onblurProDir}" aura:id="searchResPD" class="slds-form-element slds-lookup slds-is-close">
                                    <div class="slds-form-element__control">
                                        <div class="slds-input-has-icon slds-input-has-icon--right">
                                            <div aura:id="lookup-pill-PD" class="slds-pill-container">
                                                <div aura:id="lookupFieldPD" class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right"  style="width: 100%;">
                                                <span onkeypress="{!c.keyCheck}" >  
													  <ui:inputText                                                                
                                                                  updateOn="keyup"
                                                                  keyup="{!c.keyPressControllerProdDir}"
                                                                  class="slds-lookup__search-input slds-input inputSize"
                                                                  value="{!v.SearchKeyWordPD}"
                                                                  placeholder="Search Product Directors here.."/></span>
                                                    <span class="slds-icon_container slds-icon-utility-search slds-input__icon slds-input__icon_right">
                                                        <lightning:icon iconName="utility:search" size="x-small" alternativeText="icon"/>
                                                    </span>
                                                </div> 
                                                <aura:iteration items="{!v.lstSelectedPDRecords}" var="sr">
                                                    <lightning:pill class="slds-m-around_xx-small" label="{!sr}" name="{!sr}" onremove="{! c.clearProdDir }">
                                                    </lightning:pill>
                                                </aura:iteration>
                                            </div>
                                        </div>
                                    </div>
                                    <ul style="min-height:30px;margin-top:0px !important" class="slds-listbox slds-listbox_vertical slds-dropdown slds-dropdown_fluid slds-lookup__menu slds" role="listbox">
                                        <lightning:spinner class="slds-hide" variant="brand" size="small" aura:id="mySpinner"/>
                                        <center> {!v.MessagePD}</center>
                                        <aura:iteration items="{!v.listOfSearchPDRecords}" var="singleRec">
                                            <c:Phoenix_AddProductDirectorSearchCmp oRecord="{!singleRec}"/>
                                        </aura:iteration>
                                    </ul>
                                </div>
                            </div>
                        
							 <div  class="slds-col slds-size_2-of-12 slds-m-top_medium slds-m-left_small" style="margin-top: 1.6%;width: 7rem !important;">
                            
                            <span>
                                <lightning:button onclick="{!c.onsearchFamily}" variant="neutral"
                                                  label="Search" iconName="utility:search" />
                                
                            </span>
                        </div>
                        
                        
                        
                    </div>
                    
                    
                    
                </div>
              
                    <div class="slds-grid slds-wrap">
                        <div class="slds-col  slds-grid slds-size_1-of-1 slds-m-left_small"> 
                        <div class="slds-col slds-size_2-of-12 slds-m-top_large sapdata" style="margin-bottom: 2px">

                             <span class="slds-badge slds-badge_lightest" style="display:inline-block;">
                                    Selected Products : {!v.selectedCount  + v.selectedProductsCount}
                                </span>
                                
                            </div>
                             
                     <div class="slds-col slds-size_3-of-12 slds-m-top_large sapdata" style="margin-bottom: 2px">

                                <a onclick="{!c.showSelectedproducts}"><b>View Selected Products</b></a>
                            </div>
                             <div class="slds-col slds-size_1-of-12 slds-m-top_large">
                            <lightning:input aura:id="RX" type="checkbox" label="Rx" onchange="{!c.searchSrxRxOttc}" checked="{!v.isRxChecked}"/>
                        </div>
                        <div class="slds-col slds-size_1-of-12 slds-m-top_large">
                            <lightning:input aura:id="SRX" type="checkbox" label="SRx" onchange="{!c.searchSrxRxOttc}" checked="{!v.isSRxChecked}" />
                        </div>
                        <div class="slds-col slds-size_1-of-12 slds-m-top_large">
                            <lightning:input aura:id="OTC" type="checkbox" label="OTC" onchange="{!c.searchSrxRxOttc}" checked="{!v.isOtcChecked}" />
                        </div>
                            
                               
                        </div>
                    </div>
              
                <aura:if isTrue="{!v.noProducts}">
                    <div class="matchPanelError" tabindex="0" role="alert"
                         style="color:#c23934;text-align:center;">
                        <span>No items to display</span>
                    </div>
                </aura:if>
            </div>
                <aura:if isTrue="{!v.showProducts}">
                    <div id="myDIV" class="modal-body scrollable slds-modal__content slds-p-around--medium" data-scoped-scroll="true" style="background-color:#f3f2f2;padding:0px;">
                        <div>
                            
                            <div class="slds-col  slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_12-of-12 slds-p-top_large" style="padding:0px;">
                                  
                                    <aura:if isTrue="{!v.noData}">
                                        <div class="matchPanelError" tabindex="0" role="alert"
                                             style="color:#c23934;text-align:center;">
                                            <span>No search results found.</span>
                                        </div>
                                    </aura:if>
                                    <aura:if isTrue="{!v.isModalOpen}">
                                        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                                            
                                            <div class="slds-modal__container" style="width:50% ! important;padding:0px 0px 0px 0px;">
                                                
                                                <!-- Modal/Popup Box Header Starts here-->
                                                <header class="slds-modal__header">
                                                    <lightning:buttonIcon iconName="utility:close"
                                                                          onclick="{!c.closePopup}"
                                                                          alternativeText="close"
                                                                          variant="bare-inverse"
                                                                          class="slds-modal__close"/>
                                                     <aura:if isTrue="{! not(empty(v.modalProductList))}">
                                                        <h2 class="slds-text-heading_medium slds-hyphenate"><b>Selected Products</b></h2>
                                                    </aura:if>
                                                </header>
                                                <!--Modal/Popup Box Body Starts here-->
                                                <!--div class="slds-scrollable" style="height: 100rem; width: 46rem"-->
                                                <div class="slds-modal__content slds-p-around_medium" style="padding:0px 0px 0px 0px;" >
                                                    
                                                 <aura:if isTrue="{! not(empty(v.modalProductList))}">
                                                        <table
                                                               class="slds-table slds-table_cell_buffered slds-max-medium-table_stacked-horizontal slds-table_bordered"
                                                               style="border:1px solid #eaeaea;">
                                                            <thead>
                                                                
                                                                <tr class="slds-text-title">
                                                                    
                                                                    <th scope="col" class="slds-cell-wrap ">
                                                                        <div class="slds-truncate" title="Product Name">
                                                                            Product Name
                                                                        </div>
                                                                    </th>
                                                                    <th scope="col" class="slds-cell-wrap ">
                                                                        <div class="slds-truncate" title="Product Name">
                                                                            Product Family
                                                                        </div>
                                                                    </th>
                                                                      <th scope="col" class="slds-cell-wrap ">
                                                                    <div class="slds-truncate" title=" NDC-11">
                                                                        NDC-11
                                                                    </div>
                                                                </th>
                                                                 <th scope="col" class="slds-cell-wrap ">
                                                                    <div class="slds-truncate" title="Product Code">
                                                                        Product Code
                                                                    </div>
                                                                </th>
                                                                    
                                                                    
                                                                </tr>
                                                            </thead> 
                                                            <tbody>
                                                                <aura:iteration items="{!v.modalProductList}" var="prodItem"
                                                                                indexVar="itemIndex">
                                                                    <tr>
                                                                        <td class="slds-cell-wrap" scope="col">
                                                                            <a href="{!'/'+prodItem.prdlist.Id}"
                                                                               target="_blank">{!prodItem.prdlist.Name}</a>
                                                                        </td> 
                                                                        <td class="slds-cell-wrap " scope="col">
                                                                            <a href="{!'/'+prodItem.prdlist.Product_Family__c}"
                                                                               target="_blank">{!prodItem.prdlist.Product_Family__r.Name}</a>
                                                                            <!--{!prodItem.prdlist.Product_Family__r.Name}-->
                                                                        </td>
                                                                         <td class="slds-cell-wrap " scope="col">
                                                                        {!prodItem.prdlist.Phoenix_NDC_11__c}
                                                                    </td>
                                                                     <td class="slds-cell-wrap " scope="col">
                                                                        {!prodItem.prdlist.ProductCode}
                                                                    </td>
                                                                    </tr>
                                                                </aura:iteration>
                                                            </tbody>
                                                        </table>
                                                        <aura:set attribute="else">
                                                            <p style="text-align:center;background-color:white;">Please Select Products to Display.</p>  
                                                        </aura:set>
                                                    </aura:if>
                                                </div>
                                                <!--/div-->
                                                <!--Modal/Popup Box Footer Starts here-->
                                                <footer class="slds-modal__footer">
                                                    <lightning:button variant="neutral"
                                                                      label="Close"
                                                                      title="Close"
                                                                      onclick="{! c.closePopup }"/>
                                                    
                                                </footer>
                                            </div>
                                            
                                        </section>
                                        <div class="slds-backdrop slds-backdrop_open"></div>
                                        
                                    </aura:if > 
                                    
                                    
                                    
                                    <aura:if isTrue="{!not(empty(v.ProductList))}">
                                    <table class="maintable slds-table slds-table_cell_buffered slds-max-medium-table_stacked-horizontal slds-table_bordered" style="border:1px solid #eaeaea;padding-left: 5px">
                                            <thead>
                                               
                                                <tr class="slds-text-title">
                                                    <th style="height: 29px;width: 57px;padding-bottom: 11px;">
                                                        <lightning:input type="checkbox"
                                                                         class="slds-checkbox"
                                                                         name=""
                                                                         checked="{!v.selectAll}"
                                                                         aura:id="checkbox"
                                                                         onchange="{!c.selectAllCheckbox}" />
                                                    </th>
                                                    <th scope="col" class="slds-cell-wrap " onclick="{!c.sortProductName}">
                                                        
                                                        <div class="slds-truncate" title="Product Name">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">Product Name</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'ProductName') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'ProductName') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                                    
                                                    <th scope="col" class="slds-cell-wrap " onclick="{!c.sortProductCode}">
                                                        <div class="slds-truncate" title="Product Code">
                                                            
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">Product Code</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'ProductCode') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'ProductCode') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                                    
                                                    
                                                    <th scope="col" class="slds-cell-wrap " onclick="{!c.sortNDC11}">
                                                        <div class="slds-truncate" title=" NDC - 11 ">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name"> NDC - 11</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'NDC11') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'NDC11') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                                     <th scope="col" class="slds-cell-wrap " onclick="{!c.sortUPC}">
                                                    <div class="slds-truncate" title="UPC">
                                                        <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset">
                                                            <span class="slds-assistive-text">Sort</span>
                                                            <span class="slds-truncate" title="Name">UPC</span>  
                                                            <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'UPC') }">&nbsp;  &#9660; </aura:if>  
                                                            <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'UPC') }"> &nbsp;  &#9650; </aura:if>                        
                                                        </a>
                                                    </div>
                                                </th>
                                                    <th scope="col" class="slds-cell-wrap " onclick="{!c.sortGPI}">
                                                        <div class="slds-truncate" title="GPI">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">GPI</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'GPI') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'GPI') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                                     <th scope="col" class="slds-cell-wrap " onclick="{!c.sortGCN}">
                                                    <div class="slds-truncate" title="GCN">
                                                        <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset">
                                                            <span class="slds-assistive-text">Sort</span>
                                                            <span class="slds-truncate" title="Name">GCN</span>  
                                                            <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'GCN') }">&nbsp;  &#9660; </aura:if>  
                                                            <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'GCN') }"> &nbsp;  &#9650; </aura:if>                        
                                                        </a>
                                                    </div>
                                                </th>
                                                    <th scope="col" class="slds-cell-wrap " onclick="{!c.sortProductFamily}">
                                                        <div class="slds-truncate" title="Product Family">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">Product Family</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'ProductFamily') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'ProductFamily') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                                    
                                                    
                                                    
                                                    <th scope="col" class="slds-cell-wrap " onclick="{!c.sortStrength}">
                                                        <div class="slds-truncate" title="Strength">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">Strength</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'Strength') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'Strength') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                                    <th scope="col" class="slds-cell-wrap " onclick="{!c.sortPackSize}">
                                                        <div class="slds-truncate" title="Pack Size">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">Pack Size</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'PackSize') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'PackSize') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                                    <th scope="col" class="slds-cell-wrap " onclick="{!c.sortWAC}">
                                                        <div class="slds-truncate" title="WAC">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">WAC</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'WAC') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'WAC') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                                    <th scope="col" class="slds-cell-wrap " onclick="{!c.sortProductDirector}">
                                                        <div class="slds-truncate" title="Product Director">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">Product Director</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'ProductDirector') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'ProductDirector') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                                    <th scope="col" class="slds-cell-wrap " onclick="{!c.sortBrandName}">
                                                        <div class="slds-truncate" title="Brand Name (Compare To)">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">Brand Name (Compare To)</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'BrandName') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'BrandName') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                                     <th scope="col" class="slds-cell-wrap " onclick="{!c.sortDiscontinuation}">
                                                    <div class="slds-truncate" title="Date of Discontinuation">
                                                        <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset">
                                                            <span class="slds-assistive-text">Sort</span>
                                                            <span class="slds-truncate" title="Name">Date of Discontinuation</span>  
                                                            <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'Discontinuation') }">&nbsp;  &#9660; </aura:if>  
                                                            <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'Discontinuation') }"> &nbsp;  &#9650; </aura:if>                        
                                                        </a>
                                                    </div>
                                                </th>
                                                    
                                                    
                                                    
                                                    
                                                    
                                                    
                                                    
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <aura:iteration items="{!v.ProductList}" var="prodItem"
                                                                indexVar="itemIndex">
                                                    <tr class="slds-text-title" >
                                                        <td class="slds-cell-wrap" scope="col" style="padding-left:0px;">
                                                            <lightning:input type="checkbox"
                                                                             class="slds-checkbox"
                                                                             name="{!prodItem.prdlist.Id}"
                                                                             checked="{!prodItem.isSelected}"
                                                                             aura:id="checkbox"
                                                                             onchange="{!c.checkBoxChangeHandler}" />
                                                        </td>
                                                        <td class="slds-cell-wrap" scope="col" style="padding-left:0px;">
                                                            <a href="{!'/'+prodItem.prdlist.Id}"
                                                               target="_blank">{!prodItem.prdlist.Name}</a>
                                                        </td>
                                                        
                                                        <td class="slds-cell-wrap " scope="col" style="padding-left:0px;">
                                                            {!prodItem.prdlist.ProductCode}
                                                        </td>
                                                        <td class="slds-cell-wrap " scope="col" style="padding-left:0px;">
                                                            {!prodItem.prdlist.Phoenix_NDC_11__c}
                                                        </td>
                                                         <td class="slds-cell-wrap " scope="col" style="padding-left:0px;">
                                                        {!prodItem.prdlist.Phoenix_UPC_Universal_Product_Code__c}
                                                    </td>
                                                        <td class="slds-cell-wrap " scope="col" style="padding-left:0px;">
                                                            {!prodItem.prdlist.Phoenix_GPI_Generic_Product_Identifier__c}
                                                        </td>
                                                        <td class="slds-cell-wrap " scope="col" style="padding-left:0px;">
                                                        {!prodItem.prdlist.Phoenix_GCN_Generic_Code_Number__c}
                                                    </td>
                                                        <td class="slds-cell-wrap " scope="col" style="padding-left:0px;">
                                                            <a href="{!'/'+prodItem.prdlist.Product_Family__c}"
                                                               target="_blank">{!prodItem.prdlist.Product_Family__r.Name}</a>
<!--                                                            {!prodItem.prdlist.Family}-->
                                                        </td>
                                                        <td class="slds-cell-wrap " scope="col" style="padding-left:0px;">
                                                            {!prodItem.prdlist.Phoenix_Strength__c}
                                                        </td>
                                                        <td class="slds-cell-wrap " scope="col" style="padding-left:0px;">
                                                            {!prodItem.prdlist.Phoenix_Pkg_Size__c}
                                                        </td>
                                                        <td class="slds-cell-wrap " scope="col" style="padding-left:0px;">
                                                            {!prodItem.currencyCode} {!prodItem.prdlist.Phoenix_WAC__c}
                                                        </td>
                                                        
                                                        <td class="slds-cell-wrap " scope="col" style="padding-left:0px;">
                                                            {!prodItem.prdlist.Phoenix_Product_Director__r.Name}
                                                        </td>
                                                        <td class="slds-cell-wrap " scope="col" style="padding-left:0px;">
                                                            {!prodItem.prdlist.Phoenix_Compare_to_Brand_Name__c}
                                                        </td>
                                                         <td class="slds-cell-wrap " scope="col" style="padding-left:0px;">
                                                             <lightning:formattedDateTime value="{!prodItem.prdlist.Phoenix_Date_of_Discontinuation__c}"/>
                                                        
                                                    </td>
                                                    
                                                    
                                                </tr>
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                </aura:if>
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-footer slds-modal__footer slds-p-vertical_x-small" style="background-color:white;">
                        <aura:if isTrue="{!not(empty(v.ProductList))}">
                            <lightning:layout multipleRows="true" class="slds-grid slds-gutters">
                                <lightning:layoutItem flexibility="auto"></lightning:layoutItem>
                                <lightning:layoutItem flexibility="auto">
                                     <div class="slds-float_right">
                                    <lightning:button label="First" iconName="utility:left"
                                                      iconPosition="left" onclick="{!c.onFirst}"
                                                      disabled="{! v.currentPageNumber == 1}" />
                                    <lightning:button iconName="utility:chevronleft" iconPosition="left"
                                                      onclick="{!c.onPrev}" disabled="{! v.currentPageNumber == 1}" />
                                    <span class="slds-p-horizontal_x-small">
                                        <a onclick="{!c.processMe}" name="1"
                                           class="{! (v.currentPageNumber == 1) ? 'selected' : ''}">1</a>
                                    </span>
                                    <span class="slds-p-horizontal_xxx-small">
                                        <a>...</a>
                                    </span>
                                    <aura:iteration items="{!v.pageList}" var="item">
                                        <span class="slds-p-horizontal_x-small">
                                            <a onclick="{!c.processMe}" name="{!item}"
                                               class="{! (v.currentPageNumber == item) ? 'selected' : ''}">{!item}</a>
                                        </span>
                                    </aura:iteration>
                                    <span class="slds-p-horizontal_xxx-small">
                                        <a>...</a>
                                    </span>
                                    <span class="slds-p-horizontal_x-small">
                                        <a onclick="{!c.processMe}" name="{!v.totalPages}"
                                           class="{! (v.currentPageNumber == v.totalPages) ? 'selected' : ''}">{!v.totalPages}</a>
                                    </span>
                                    <lightning:button iconName="utility:chevronright" iconPosition="right"
                                                      disabled="{! v.currentPageNumber == v.totalPages}"
                                                      onclick="{!c.onNext}" />
                                    <lightning:button label="Last" iconName="utility:right"
                                                      iconPosition="right"
                                                      disabled="{! v.currentPageNumber == v.totalPages}"
                                                      onclick="{!c.onLast}" />
                                    </div>
                                </lightning:layoutItem>
                                 <lightning:layoutItem flexibility="auto">
                           <div class="slds-float_right">
                                <lightning:button variant="neutral" label="Back" onclick="{!c.closeModal}" />
                            <lightning:button variant="brand" label="Next" disabled="{!v.showbutton}"
                                              onclick="{!c.processProducts}" />
                                     </div>
                                </lightning:layoutItem>
                            </lightning:layout>
                            
                           
                            
                            
                            
                            <aura:set attribute="else">
                                <div class="" style="background-color:white;">
                                    <lightning:button variant="neutral" label="Back" onclick="{!c.closeModal}" />
                                </div>
                            </aura:set>
                        </aura:if>
                    </div>
                </aura:if>
            </div>
        </div>
        
    </aura:if>
    
    <aura:if isTrue="{!v.showContracts}">
        <aura:if isTrue="{!v.showSpinnerSelProds}">
            <lightning:spinner variant="brand" class="spinColor" size="large" />
        </aura:if>
        <div class="panel slds-modal slds-fade-in-open"   tabindex="-1" role="dialog" aria-modal="true"  style="opacity: 1;outline:none;">  
            <!--<section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_large" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1">-->
            <div class="slds-modal__container" style="max-width: 100rem !important;width: 100% !important;padding-top: 10px;" >
                
                <div class="modal-header slds-modal__header" style="padding-right: 5px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px;">
                    <aura:if isTrue="{!v.showbidType}">
                        
                        <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate" style="color:#675e5e;font-size: large;"><b>Select Contracts - Bid Product Removal</b>
                        <span style="float:right">
                            <lightning:buttonIcon iconName="utility:close" alternativeText="Close"
                                                  class="customCloseIcon" onclick="{!c.closeModal}" />
                        </span>
                        </h2>
                        <aura:set attribute="else">
                            <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate" style="color:#675e5e;font-size: large;"><b>Select Contracts - Bid Product Discontinuation</b>
                         <span style="float:right">
                                <lightning:buttonIcon iconName="utility:close" alternativeText="Close"
                                                      class="customCloseIcon" onclick="{!c.closeModal}" />
                                </span></h2>

                        </aura:set>
                    </aura:if>
                     <div class="slds-grid slds-wrap">
                                <div class="slds-col  slds-grid slds-size_1-of-1 slds-m-left_small">
                                      <div class="slds-col slds-size_1-of-12 slds-m-top_large">
                                        <span class="slds-badge slds-badge_lightest" style="display:inline-block;">
                                              Selected Contracts : {!v.contractCount}
                                          </span></div>
                                      <div class="slds-col slds-size_1-of-12 slds-m-top_large">
                                    </div>
                                        <div class="slds-col slds-size_6-of-12 slds-m-top_large">
                                             <lightning:input value="{!v.searchContract}" type="search"
                                                         variant="label-hidden" placeholder="Search Contract Name,Contract Number,Customer Name...."
                                                         aura:id="SearchBox" label="Search Contract Name,Contract Number,Customer Name...." onchange="{!c.onContractsearch}"
                                                         style="margin-top:0px;" />
                                    </div>
                                     <div  class="slds-col slds-size_1-of-12 slds-m-top_medium slds-m-left_small" style="margin-top: 1.5%;width: 7rem !important;">
                                        <span style="float:right;margin-top:3px;">
                                             <lightning:button onclick="{!c.searchcontractTable}" variant="brand"
                                                              label="Search" iconName="utility:search" />
                                         </span>
                                    </div>
                                    
                         </div>
                    </div>
                    
                </div>
                <div id="mycontrDIV" class="modal-body scrollable slds-modal__content slds-p-around--medium" data-scoped-scroll="true" style="background-color:#f3f2f2;padding:0px">
                    <div>
                        <aura:if isTrue="{!v.noContrData}">
                            <div class="matchPanelError" tabindex="0" role="alert"
                                 style="text-align:center;">
                                <span>No Contracts found.</span>
                            </div>
                        </aura:if>
                        <aura:if isTrue="{!v.noContractData}">
                            <div class="matchPanelError" tabindex="0" role="alert"
                                 style="color:#c23934;text-align:center;">
                                <span>No search results found.</span>
                            </div>
                        </aura:if>
                        
                        
                        <aura:if isTrue="{!not(empty(v.contractList))}">
                                    <table class="customtable slds-table slds-table_cell_buffered slds-max-medium-table_stacked-horizontal slds-table_bordered" style="border:1px solid #eaeaea;padding-left: 5px">
                                <thead>
                                    <tr class="slds-text-title">
                                        <th style="height: 29px;width: 57px;padding-bottom: 11px;">
                                            <div class="slds-truncate">
                                                <lightning:input type="checkbox"
                                                                 class="slds-checkbox"
                                                                 name=""
                                                                 checked="{!v.selectAllContr}"
                                                                 aura:id="checkbox"
                                                                 onchange="{!c.onselectAllContract}" />
                                            </div>
                                            
                                        </th>
                                        
                                        
                                        <th scope="col" class="slds-cell-wrap " onclick="{!c.sortContractNumber}">
                                                        
                                                        <div class="slds-truncate" title="Contract Number">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">Contract Number</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'ContractNumber') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'ContractNumber') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                         <th scope="col" class="slds-cell-wrap " onclick="{!c.sortCustomer}">
                                                        
                                                        <div class="slds-truncate" title="Customer">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">Customer</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'Customer') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'Customer') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                          <th scope="col" class="slds-cell-wrap " onclick="{!c.sortNPR}">
                                                        
                                                        <div class="slds-truncate" title="NPR">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">NPR</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'NPR') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'NPR') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                        
                                         <th scope="col" class="slds-cell-wrap " onclick="{!c.sortProduct}">
                                                        
                                                        <div class="slds-truncate" title="Product">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">Product</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'Product') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'Product') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                        <th scope="col" class="slds-cell-wrap " onclick="{!c.sortProductFamily}">
                                                        
                                                        <div class="slds-truncate" title="Product Family">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">Product Family</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'ProductFamily') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'ProductFamily') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                         <th scope="col" class="slds-cell-wrap " onclick="{!c.sortNDC}">
                                                        
                                                        <div class="slds-truncate" title="NDC">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">NDC</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'NDC') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'NDC') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                          <th scope="col" class="slds-cell-wrap " onclick="{!c.sortRequiredNoticePeriod}">
                                                        
                                                        <div class="slds-truncate" title="Required Notice Period">
                                                            <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" style="padding-left: 0px">
                                                                <span class="slds-assistive-text">Sort</span>
                                                                <span class="slds-truncate" title="Name">Required Notice Period</span>  
                                                                <aura:if isTrue="{! and(v.arrowDirection == 'arrowdown', v.selectedTabsoft == 'RequiredNoticePeriod') }">&nbsp;  &#9660; </aura:if>  
                                                                <aura:if isTrue="{! and(v.arrowDirection != 'arrowdown', v.selectedTabsoft == 'RequiredNoticePeriod') }"> &nbsp;  &#9650; </aura:if>                        
                                                            </a>
                                                        </div>
                                                    </th>
                                       
                                        </tr>
                                </thead>
                                <tbody>
                                    <aura:iteration items="{!v.contractList}" var="prodItem" indexVar="itemIndex">
                                        <tr class="slds-text-title" >
                                            <td class="slds-cell-wrap" scope="col" style="padding-left:0px;">
                                                <lightning:input type="checkbox"
                                                                 class="slds-checkbox"
                                                                 name="{!prodItem.npr.Id}"
                                                                 checked="{!prodItem.contrFlag}"
                                                                 aura:id="checkbox"
                                                                 onchange="{!c.contractCheckBoxHandler}" />
                                            </td>
                                           
                                            <td class="slds-cell-wrap" scope="col" style="padding-left:0px;">
                                                <a href="{!'/'+prodItem.contrt.Id}"
                                                   target="_blank">{!prodItem.contrt.Phoenix_Contract_Number__c}</a>
                                                
                                            </td>
                                            
                                            <td class="slds-cell-wrap" scope="col" style="padding-left:0px;">
                                                <a href="{!'/'+prodItem.contrt.Phoenix_Customer__c}"
                                                   target="_blank">{!prodItem.contrt.Phoenix_Customer__r.Name}</a>
                                            </td>
                                            
                                            <td class="slds-cell-wrap" scope="col" style="padding-left:0px;">
                                                <a href="{!'/'+prodItem.npr.Id}"
                                                   target="_blank">{!prodItem.npr.Name}</a>
                                            </td>
                                            <td class="slds-cell-wrap" scope="col" style="padding-left:0px;">
                                                <a href="{!'/'+prodItem.npr.Phoenix_Product__c}"
                                                   target="_blank">{!prodItem.prodName}</a>
                                                
                                            </td>
                                            <td class="slds-cell-wrap" scope="col" style="padding-left:0px;">
                                                {!prodItem.family}
                                            </td>
                                            <td class="slds-cell-wrap" scope="col" style="padding-left:0px;">
                                                {!prodItem.NDC}
                                            </td>
                                            
                                            
                                            <td class="slds-cell-wrap" scope="col" style="padding-left:0px;">
                                                <aura:if isTrue="{!v.showbidType}">
                                                    
                                                    {!prodItem.contrt.Phoenix_Terms_Matrix__r.Phoenix_Days_Notice_for_Prod_Rem_Disco__c}
                                                    <aura:set attribute="else">
                                                        
                                                        {!prodItem.contrt.Phoenix_Terms_Matrix__r.Phoenix_Days_Notice_Prod_Discontinuation__c}
                                                    </aura:set>
                                                </aura:if>
                                            </td>
                                            
                                        </tr>
                                        
                                    </aura:iteration>
                                </tbody>
                            </table>
                        </aura:if>
                        
                    </div>
                </div>
                <div class="modal-footer slds-modal__footer slds-p-vertical_x-small" style="background-color:white;">
                    <aura:if isTrue="{!not(empty(v.contractList))}">
                        <lightning:layout multipleRows="true" class="slds-grid slds-gutters">
                            <lightning:layoutItem flexibility="auto"></lightning:layoutItem>
                            <lightning:layoutItem flexibility="auto">
                                 <div class="slds-float_right">
                                <lightning:button label="First" iconName="utility:left"
                                                  iconPosition="left" onclick="{!c.onPageFirst}"
                                                  disabled="{! v.currentPageNumber1 == 1}" />
                                <lightning:button iconName="utility:chevronleft" iconPosition="left"
                                                  onclick="{!c.onPagePrev}" disabled="{! v.currentPageNumber1 == 1}" />
                                <span class="slds-p-horizontal_x-small">
                                    <a onclick="{!c.PageprocessMe}" name="1"
                                       class="{! (v.currentPageNumber1 == 1) ? 'selected' : ''}">1</a>
                                </span>
                                <span class="slds-p-horizontal_xxx-small">
                                    <a>...</a>
                                </span>
                                <aura:iteration items="{!v.pageList1}" var="item">
                                    <span class="slds-p-horizontal_x-small">
                                        <a onclick="{!c.PageprocessMe}" name="{!item}"
                                           class="{! (v.currentPageNumber1 == item) ? 'selected' : ''}">{!item}</a>
                                    </span>
                                </aura:iteration>
                                <span class="slds-p-horizontal_xxx-small">
                                    <a>...</a>
                                </span>
                                <span class="slds-p-horizontal_x-small">
                                    <a onclick="{!c.PageprocessMe}" name="{!v.totalPages1}"
                                       class="{! (v.currentPageNumber1 == v.totalPages1) ? 'selected' : ''}">{!v.totalPages1}</a>
                                </span>
                                <lightning:button iconName="utility:chevronright" iconPosition="right"
                                                  disabled="{! v.currentPageNumber1 == v.totalPages1}"
                                                  onclick="{!c.onPageNext}" />
                                <lightning:button label="Last" iconName="utility:right"
                                                  iconPosition="right"
                                                  disabled="{! v.currentPageNumber1 == v.totalPages1}"
                                                  onclick="{!c.onPageLast}" />
                                </div>
                            </lightning:layoutItem>
                             <lightning:layoutItem flexibility="auto">
                           <div class="slds-float_right">
                                <lightning:button variant="neutral" label="Back" onclick="{!c.ShowSelectedProdList}"/>
                    <lightning:button variant="neutral" label="Cancel" onclick="{!c.closeModal}" />
                    <lightning:button variant="brand" label="Next" disabled="{!v.selectedContractIds.length==0}"
                                      onclick="{!c.showSelContracts}" />
                                 </div>
                            </lightning:layoutItem>
                        </lightning:layout>
                    </aura:if>
                    
                   
                </div>
            </div>
        </div>
    </aura:if>
    <aura:if isTrue="{!v.showselectedContracts}">
        <aura:if isTrue="{!v.showSpinnerSelProds}">
            <lightning:spinner variant="brand" class="spinColor" size="large" />
        </aura:if>
        <div class="panel slds-modal slds-fade-in-open"   tabindex="-1" role="dialog" aria-modal="true"  style="opacity: 1;outline:none;">  
            <!--<section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_large" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1">-->
            <div class="slds-modal__container" style="max-width: 100rem !important;width: 100% !important;padding-top: 10px;" >
                
                <div class="modal-header slds-modal__header" style="padding-right: 5px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px;">
                    <aura:if isTrue="{!v.showbidType}">
                        
                        <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate" style="color:#675e5e;font-size: large;"><b>Selected Contracts - Bid Product Removal</b>
                         <span style="float:right">
                                <lightning:buttonIcon iconName="utility:close" alternativeText="Close"
                                                      class="customCloseIcon" onclick="{!c.closeModal}" />
                            </span></h2>

                        <aura:set attribute="else">
                            <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate" style="color:#675e5e;font-size: large;"><b>Selected Contracts - Bid Product Discontinuation</b>
                         <span style="float:right">
                                <lightning:buttonIcon iconName="utility:close" alternativeText="Close"
                                                      class="customCloseIcon" onclick="{!c.closeModal}" />
                                </span></h2>

                        </aura:set>
                    </aura:if>
                </div>
                <div class="modal-body scrollable slds-modal__content slds-p-around--medium" data-scoped-scroll="true" style="background-color:white;padding:0px 0px 0px 0px;">
                    <div class="slds-modal__content slds-p-around_large" style="padding:7px;">
                        
                        
                        
                        
                        <aura:if isTrue="{!v.noContrData}">
                            <div class="matchPanelError" tabindex="0" role="alert"
                                 style="text-align:center;">
                                <span>No Contracts found.</span>
                            </div>
                        </aura:if>
                        
                        
                        
                        <aura:if isTrue="{!not(empty(v.selectedContracts))}">
                            <table class="customtable slds-table slds-table_cell_buffered slds-max-medium-table_stacked-horizontal slds-table_bordered"
                                   style="border:1px solid #eaeaea;">
                                <thead>
                                    <tr class="slds-text-title">
                                        <th scope="col" class="slds-cell-wrap slds-text-align_left">
                                            <div class="slds-truncate"> </div>
                                        </th>
                                       
                                        <th scope="col" class="slds-cell-wrap slds-text-align_left">
                                            <div class="slds-truncate">Contract Number</div>
                                        </th>
                                        <th scope="col" class="slds-cell-wrap slds-text-align_left">
                                            <div class="slds-truncate">Customer</div>
                                        </th>
                                        
                                        <th scope="col" class="slds-cell-wrap slds-text-align_left">
                                            <div class="slds-truncate">NPR</div>
                                        </th>
                                        <th scope="col" class="slds-cell-wrap slds-text-align_left">
                                            <div class="slds-truncate">Product</div>
                                        </th>
                                        <th scope="col" class="slds-cell-wrap slds-text-align_left">
                                            <div class="slds-truncate">Product Family</div>
                                        </th>
                                        <th scope="col" class="slds-cell-wrap slds-text-align_left">
                                            <div class="slds-truncate">NDC</div>
                                        </th>
                                        
                                        <th scope="col" class="slds-cell-wrap slds-text-align_left">
                                            <div class="slds-truncate">Required Notice Period</div>
                                        </th>
                                        
                                        
                                        
                                        
                                        
                                        
                                    </tr>
                                </thead>
                                <tbody>
                                    <aura:iteration items="{!v.selectedContracts}" var="prodItem" indexVar="itemIndex">
                                        <tr class="slds-text-title" >
                                            <td class="slds-cell-wrap" scope="col" title="Delete contract" >
                                                <lightning:button class="customBIcon"
                                                                  iconName="action:delete" iconPosition="left"
                                                                  onclick="{!c.removeDeletedRow }"
                                                                  name="{!prodItem.npr.Id}" />
                                            </td>
                                           
                                            <td class="slds-cell-wrap slds-text-align_left" scope="col" style="padding-left: 0px;">
                                                <a href="{!'/'+prodItem.contrt.Id}"
                                                   target="_blank">{!prodItem.contrt.Phoenix_Contract_Number__c}</a>
                                                
                                            </td>
                                            
                                            <td class="slds-cell-wrap slds-text-align_left" scope="col" style="padding-left: 0px;">
                                                <a href="{!'/'+prodItem.contrt.Phoenix_Customer__c}"
                                                   target="_blank">{!prodItem.contrt.Phoenix_Customer__r.Name}</a>
                                            </td>
                                            
                                            <td class="slds-cell-wrap slds-text-align_left" scope="col" style="padding-left: 0px;">
                                                <a href="{!'/'+prodItem.npr.Id}"
                                                   target="_blank">{!prodItem.npr.Name}</a>
                                            </td>
                                            <td class="slds-cell-wrap slds-text-align_left" scope="col" style="padding-left: 0px;">
                                                <a href="{!'/'+prodItem.npr.Phoenix_Product__c}"
                                                   target="_blank">{!prodItem.prodName}</a>
                                                
                                            </td>
                                            <td class="slds-cell-wrap slds-text-align_left" scope="col" style="padding-left: 0px;">
                                                {!prodItem.family}
                                            </td>
                                            <td class="slds-cell-wrap slds-text-align_left" scope="col" style="padding-left: 0px;">
                                                {!prodItem.NDC}
                                            </td>
                                            
                                            
                                            <td class="slds-cell-wrap slds-text-align_left" scope="col" style="padding-left: 0px;">
                                                <aura:if isTrue="{!v.showbidType}">
                                                    
                                                    {!prodItem.contrt.Phoenix_Terms_Matrix__r.Phoenix_Days_Notice_for_Prod_Rem_Disco__c}
                                                    <aura:set attribute="else">
                                                        
                                                        {!prodItem.contrt.Phoenix_Terms_Matrix__r.Phoenix_Days_Notice_Prod_Discontinuation__c}
                                                    </aura:set>
                                                </aura:if>
                                            </td>
                                            
                                        </tr>
                                        
                                    </aura:iteration>
                                </tbody>
                            </table>
                        </aura:if>
                        <aura:if isTrue="{!v.isQLlistempty}">
                            <div style="text-align:center;">Please Add Contract</div>
                        </aura:if>
                        
                    </div>
                </div>
                <div class="modal-footer slds-modal__footer" style="background-color:white;padding:4px;">
                  <lightning:button variant="neutral" label="Back" onclick="{!c.ShowContractList}"/>
                    <lightning:button variant="brand" label="Save &amp; Close" onclick="{!c.insertProducts}" disabled="{!v.showbutton}" />
                    <lightning:button variant="brand" label="Save &amp; Next" disabled="{!v.showbutton}"
                                      onclick="{!c.fileUpload}" />
                </div>
            </div>
        </div>
    </aura:if>
    <aura:if isTrue="{!v.showuploadFile}">
        <aura:if isTrue="{!v.showSpinnerSelProds}">
            <lightning:spinner variant="brand" class="spinColor" size="large" />
        </aura:if>
        <div class="panel slds-modal slds-fade-in-open"   tabindex="-1" role="dialog" aria-modal="true"  style="opacity: 1;outline:none;">  
            <div class="slds-modal__container" style="max-width: 100rem !important; width: 100% !important;padding-top: 10px;" >
                
                <div class="modal-header slds-modal__header" style="padding-right: 5px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px;">
                    
                    
                    <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate" style="color:#675e5e;font-size: large;"><b>Upload Files</b>
                        <span style="float:right">
                            <lightning:buttonIcon iconName="utility:close" alternativeText="Close"
                                                  class="customCloseIcon" onclick="{!c.closeModal}" />
                        </span></h2>
                    
                </div>
                <div class="modal-body scrollable slds-modal__content slds-p-around--medium" data-scoped-scroll="true" style="background-color:white;padding:0px 0px 0px 0px;">
                    <div class="slds-modal__content slds-p-around_large" style="padding:7px;">
                        <div class="slds-scope" >
                            <div class="slds-grid slds-wrap slds-text-align_left custom-container">
                                <div class="slds-size_1-of-4 slds-max-small-size_1-of-1 sapdata" style="padding-left: 60px;">
                                    <br/>
                                    FTS Exposure File
                                    
                                </div>
                                
                                <div class="slds-size_1-of-4 slds-max-small-size_1-of-1 sapdata">
                                    
                                    <lightning:fileUpload label=""
                                                          variant="label-hidden"
                                                          name="fileUploader"
                                                          multiple="true"
                                                          accept="{!v.filetype}"
                                                          recordId="{!v.recordId}"
                                                          onuploadfinished="{!c.handleUploadFinished}" class="hideSpan"/>
                                    
                                    
                                    
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap slds-text-align_left custom-container">
                                <div class="slds-size_1-of-4 slds-max-small-size_1-of-1 sapdata" style="padding-left: 60px;">
                                    <br/>
                                    Liquidation of Inventory (WS / Inhouse) File
                                    
                                </div>
                                <div class="slds-size_1-of-4 slds-max-small-size_1-of-1 sapdata">
                                    
                                    <lightning:fileUpload label=""
                                                          variant="label-hidden"
                                                          name="fileUploader"
                                                          multiple="true"
                                                          accept="{!v.filetype}"
                                                          recordId="{!v.recordId}"
                                                          onuploadfinished="{!c.handleUploadFinished}" class="hideSpan"/>
                                    
                                    
                                    
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap slds-text-align_left custom-container">
                                <div class="slds-size_1-of-4 slds-max-small-size_1-of-1 sapdata" style="padding-left: 60px;">
                                    <br/>
                                    Other File
                                    
                                </div>
                                <div class="slds-size_1-of-4 slds-max-small-size_1-of-1 sapdata">
                                    
                                    <lightning:fileUpload label=""
                                                          variant="label-hidden"
                                                          name="fileUploader"
                                                          multiple="true"
                                                          accept="{!v.filetype}"
                                                          recordId="{!v.recordId}"
                                                          onuploadfinished="{!c.handleUploadFinished}" class="hideSpan"/>
                                    
                                    
                                    
                                </div>
                            </div>
                        </div>   
                        <b><h2 style="font-size:15px;padding-bottom:10px;padding-left:55px;">List of Attachments ({!v.fileList.length})</h2></b>
                                    <div class="container desktop forceContentFilePicker" style="width: 100%; display: flex; background-color: var(--lwc-colorBackgroundAlt,rgb(255, 255, 255));">
                                        <!--div class="slds-border_left" ></div-->
                                        <div class="rightPanel" style="float:right;width:100%;overflow-y: visible;" >
                                            <div class="searchResultsContainer multiAttach"   style="overflow: auto; clear: both; padding-right: 0;">
                                                <ul style="list-style:none;padding-left:40px;margin:0px;">
                                                    
                                                    <aura:iteration items="{!v.fileList}" var="file" indexVar="itemIndex">
                                                        <li class="slds-var-p-horizontal_medium slds-var-p-vertical_xx-small forceContentVirtualRelatedListStencil forceRecordLayout" style="{!if(itemIndex==(v.fileList.length-1),'border-top:var(--lwc-borderWidthThin,1px) solid var(--lwc-colorBorderSeparatorAlt,rgb(221, 219, 218));height: auto; margin: 0; padding: 0; list-style: none; font-weight: var(--lwc-fontWeightRegular,400); font-size: var(--lwc-fontSizeMedium,0.8125rem);border-bottom:1px solid #dddbda;','border-top:var(--lwc-borderWidthThin,1px) solid var(--lwc-colorBorderSeparatorAlt,rgb(221, 219, 218));height: auto; margin: 0; padding: 0; list-style: none; font-weight: var(--lwc-fontWeightRegular,400); font-size: var(--lwc-fontSizeMedium,0.8125rem);')}" >
                                                            <div class="filerow" style="padding: var(--lwc-spacingXxSmall,0.25rem) 0 var(--lwc-spacingXxSmall,0.25rem) var(--lwc-spacingMedium,1rem);display: flex; table-layout: fixed; width: 100%;padding-bottom:8px;">
                                                                <div class="slds-size_12-of-12 slds-grid slds-nowrap">
                                                                    <p  data-name="{!file.Id}" style="cursor:pointer;">
                                                                        <a  name="{!file.Id}" onclick="{!c.deleteAttachment}">
                <lightning:icon iconName="utility:delete" iconPosition="left" alternativeText="delete" size="x-small" />
            </a>
                                                                       <!-- <lightning:button class="customBIcon"
                                                                                          iconName="action:delete" iconPosition="left"
                                                                                          onclick="{!c.deleteAttachment }"
                                                                                          name="{!file.Id}"  />-->&nbsp; 
                                                                        <a href="{!'/'+file.Id}"
                                                                           target="_blank"  >{!itemIndex+1}.&nbsp;{!file.Title} </a>   
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </li>
                                                    </aura:iteration>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                               
                        
                        
                        
                        
                    </div>
                </div>
                <div class="modal-footer slds-modal__footer" style="background-color:white;padding:4px;">
                    <lightning:button variant="brand" label="Save"
                                      onclick="{!c.clickApproval}" />
                </div>
            </div>
        </div>
    </aura:if>
           <aura:set attribute="else">
            <div style="text-align: center;padding: 1%;background-color: white;">Bid is already submitted for approval. You cannot add products.</div> 
            <div class="modal-footer slds-modal__footer" role="banner" style="overflow-x:auto;">
                <div class="slds-grid">
                    <div class="slds-col slds-has-flexi-truncate">
                        <div class="slds-media" >
                            <div class="slds-media__body" ></div>
                            <div class="slds-col slds-no-flex slds-align-bottom" style="float: right;padding-top:0%;">
                                <div class="slds-button-group" role="group" style="font-size:11px;">
                                    <lightning:button label="Cancel" title="Cancel" class="btn2" onclick="{!c.closeModal}" variant="brand">
                                    </lightning:button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </aura:set>
    </aura:if>
    
    
</aura:component>