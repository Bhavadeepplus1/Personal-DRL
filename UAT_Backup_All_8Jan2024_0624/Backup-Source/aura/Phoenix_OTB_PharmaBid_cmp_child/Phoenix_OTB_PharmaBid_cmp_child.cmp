<aura:component controller="Phoenix_OTB_PharmaBidCls" implements="flexipage:availableForAllPageTypes,force:hasRecordId,force:appHostable,lightning:isUrlAddressable" access="global">     
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>    
    <aura:attribute name="objInfoForPicklistValues" type="account" default="{sobjectType : 'Phoenix_Bid_Line_Item__c'}" description="object information to fetch picklist values"/>
    <aura:attribute name="ratingPicklistOpts" type="string[]" description="store picklist options values"/>
    <aura:attribute name="showSaveCancelBtn" type="boolean"/>
    <aura:attribute name="showErrorClass" type="boolean" default="false"/>
    <aura:attribute name="conAppStepButtonDisable" type="boolean" default="true"/>
    <aura:attribute name="sNo" type="string" />
    <aura:attribute name="lineItemId" type="String" />
    <!-- Future Record attributes -->
    <aura:attribute name="displayFutureDisplay" type="boolean" default="false" />
    <aura:attribute name="productId" type="String" />
    
    <aura:attribute name="CISUEditMode" type="boolean" default="false" />
    <aura:attribute name="CDSUEditMode" type="boolean" default="false" />
    <aura:attribute name="PISUditMode" type="boolean" default="false" />
    <aura:attribute name="PDSUEditMode" type="boolean" default="false" />
    <aura:attribute name="WDPIEditMode" type="boolean" default="false" />
    <aura:attribute name="GDPEditMode" type="boolean" default="false" />
    <aura:attribute name="PCBPSEditMode" type="boolean" default="false" />
    <aura:attribute name="PCBPSEditMode1" type="boolean" default="false" />
    <aura:attribute name="FAPCEditMode" type="boolean" default="false" />
    <aura:attribute name="PCREditMode" type="boolean" default="false" />
    <aura:attribute name="PPUREditMode" type="boolean" default="false" />
    <aura:attribute name="ISOVEditMode" type="boolean" default="false" /> 
    <aura:attribute name="ISOCEditMode" type="boolean" default="false" /> 
    <aura:attribute name="BudASPEditMode" type="boolean" default="false" />
    <aura:attribute name="SalesNotesEditMode" type="boolean" default="false" />
    <aura:attribute name="SCMNotesEditMode" type="boolean" default="false" />
    <aura:attribute name="PriNotesEditMode" type="boolean" default="false" />
    <aura:attribute name="MarkNotesEditMode" type="boolean" default="false" />
    <aura:attribute name="PCBPEditMode" type="boolean" default="false" />
    <aura:attribute name="isSpinner" type="boolean" default="false" />
    <aura:attribute name="rebateTypeEdit" type="boolean" default="false" />
    <aura:attribute name="feeTypeEdit" type="boolean" default="false" />
    <aura:attribute name="MarketApprovalEditMode" type="boolean" default="false" />
    <aura:attribute name="ContractApprovalEditMode" type="boolean" default="false" />
    <aura:attribute name="ContractCommentsEditMode" type="boolean" default="false" />
    
    <aura:attribute name="DirectESIEditMode" type="boolean" default="false" />
    <aura:attribute name="IndirectESIEditMode" type="boolean" default="false" /> 
    <aura:attribute name="DirectKrogerEditMode" type="boolean" default="false" /> 
    <aura:attribute name="IndirectKrogerEditMode" type="boolean" default="false" />
    <aura:attribute name="DirectRxOutReachEditMode" type="boolean" default="false" />
    <aura:attribute name="IndirectRxOutReachEditMode" type="boolean" default="false" />
    <aura:attribute name="DirectSuperValuEditMode" type="boolean" default="false" />
    <aura:attribute name="IndirectSuperValuEditMode" type="boolean" default="false" />
    <aura:attribute name="DirectCignaEditMode" type="boolean" default="false" />
    <aura:attribute name="IndirectCignaEditMode" type="boolean" default="false" />
    <aura:attribute name="DirectCordantEditMode" type="boolean" default="false" />
    <aura:attribute name="IndirectCordantEditMode" type="boolean" default="false" />
    <aura:attribute name="DirectAccordoEditMode" type="boolean" default="false" />
    <aura:attribute name="IndirectAccordoEditMode" type="boolean" default="false" />
    <aura:attribute name="OthersDirectEditMode" type="boolean" default="false" />
    <aura:attribute name="OthersIndirectEditMode" type="boolean" default="false" />
    
    <aura:attribute name="ProDirectUnitsEditMode" type="boolean" default="false" />
    <aura:attribute name="ProIndirectUnitsEditMode" type="boolean" default="false" />
    <aura:attribute name="GuidancePriceEditMode" type="boolean" default="false" />
    <aura:attribute name="SalesPriceDirectEditMode" type="boolean" default="false" />
    <aura:attribute name="SalesPriceIndirectEditMode" type="boolean" default="false" />
    <aura:attribute name="ProDirContrEditMode" type="boolean" default="false" />
    <aura:attribute name="ProIndirContrEditMode" type="boolean" default="false" />
    <aura:attribute name="RebFeePercentEditMode" type="boolean" default="false" />
    <aura:attribute name="PURDollarEditMode" type="boolean" default="false" />
    <aura:attribute name="VIRDollarEditMode" type="boolean" default="false" />
    <aura:attribute name="ExpiryDtEditMode" type="boolean" default="false" />
    <aura:attribute name="BatchNumEditMode" type="boolean" default="false" />
    <aura:attribute name="CustServCommentsEditMode" type="boolean" default="false" />
    <aura:attribute name="CMFeePerEditMode" type="boolean" default="false" />
    <aura:attribute name="RDCNLCPerEditMode" type="boolean" default="false" />
    <aura:attribute name="CustServApprovalEditMode" type="boolean" default="false" />
    <aura:attribute name="InventoryUnitsEditMode" type="boolean" default="false" />
    
    <aura:attribute name="CustServUpdateCommentsEditMode" type="boolean" default="false" />
    <aura:attribute name="CustServUpdateApprovalEditMode" type="boolean" default="false" />
    
    <aura:attribute name="OverrideDirEditMode" type="boolean" default="false" />
    
    <aura:attribute name="singleRec" type="sobject"/>
    <aura:attribute name="isSpecificCust" type="boolean" default="false"/>
    <aura:attribute name="templateType" type="string" default=""/>
    <aura:attribute name="bidType" type="string" default=""/>
    <aura:attribute name="loggedInUserName" type="string" default=""/>
    <aura:attribute name="loggedInUserId" type="string" default=""/>
    <aura:attribute name="delegatedUserId" type="string" default=""/>
    <aura:attribute name="marketingApprover" type="string" default=""/>
    <aura:attribute name="BidAprrovalStatus" type="string" default=""/>
    <aura:attribute name="isMarketingApprovePerson" type="string" />
    <aura:attribute name="isContractsApprovePerson" type="string" />
    <aura:attribute name="isCustServiceApprovePerson" type="string"/>
    <aura:attribute name="errMsg" type="String" access="global"/>
    <aura:attribute name="err" type="boolean" default="false" />
    <aura:attribute name="ShowSaveButton" type="boolean" default="false" />
    
    
    <aura:attribute name="ItemsLength" type="Decimal"/> 
    <aura:attribute name="CDSUTotal" type="Decimal"/>
    <aura:attribute name="CISUTotal" type="Decimal"/>
    <aura:attribute name="PISUTotal" type="Decimal"/>
    <aura:attribute name="PDSUTotal" type="Decimal"/>
    <aura:attribute name="netSalesIntTotal" type="Decimal" />
    <aura:attribute name="LCostTotal" type="Decimal" />
    <aura:attribute name="ThptMrgnDTotal" type="Decimal" />
    <aura:attribute name="intDeadNetTotal" type="Decimal" />
    <aura:attribute name="proNetSaleDir" type="Decimal" /> 
    <aura:attribute name="proNetSaleInd" type="Decimal" /> 
    <aura:attribute name="proTPTDir" type="Decimal" /> 
    <aura:attribute name="proTPTInd" type="Decimal" /> 
    <aura:attribute name="proTPTPerDir" type="Decimal" /> 
    <aura:attribute name="proTPTPerIndir" type="Decimal" /> 
    <aura:attribute name="BlendedTPMargin" type="Decimal" />
    <!--re bid-->
    <aura:attribute name="ReBidListAll" type="List" />
    <aura:attribute name="togglehover" type="boolean" default="false"/>
    <aura:attribute name="isModalOpen" type="Boolean" default="false" />
    <aura:attribute name="tableRef" type="String"/>
    <aura:attribute name="isReBid" type="boolean"  />
    <aura:attribute name="isAccpetable" type="boolean"  />
    <aura:attribute name="isNotAccpetable" type="boolean"  />
    <aura:attribute name="isIndirAccpetable" type="boolean"  />
    <aura:attribute name="isIndirNotAccpetable" type="boolean"  />
    <aura:attribute name="conAppName" type="string"  />
    <aura:attribute name="scmQty" type="Decimal" />
    
    <!-- re bid-->
    <!-- Deligation attributes -->
    <aura:attribute name="isdeligationApprover" type="Boolean" default="false" />
    <aura:attribute name="splitdeligatedUser" type="String" default="" />
    <aura:attribute name="deligatedUserName" type="String" default="" />
    <aura:attribute name="ismarketingDeligator" type="boolean" default="false" />
    
    <!--Pricing History Analytics- Attributes-START -->
    
    <aura:registerEvent name="lightningEvent1" type="c:Phoenix_BidPricingHistoryEvt"/>
    <aura:attribute name="displayBidHist" type="String" default="false"/>
    <aura:attribute name="displayProdNPRHist" type="String" default="false"/>
    <aura:attribute name="displayIMS" type="String" default="false"/>
    <aura:attribute name="displayHistPricing" type="String" default="false"/>
    <aura:attribute name="recordId" type="Id" />
    <aura:attribute name="bidLineItemId" type="String" />
    <!---Pricing History Analytics- Attributes END-->
    <aura:attribute name="isGoalseekModalOpen" type="Boolean" default="false" />
    <aura:attribute name="isGoalseekModalOpenIndirect" type="Boolean" default="false" />
    <aura:attribute name="expectDdeadnet" type="Decimal" />
    <aura:attribute name="expectCustmerDdeadnet" type="Decimal" />
    <aura:attribute name="RequiredPrice" type="Decimal" />
    <aura:attribute name="bidRecordParent" type="sObject"  />
    <aura:attribute name="isClicked" type="boolean" default="false" />
    <aura:attribute name="date" type="Date"/>
    <!--<aura:handler name="change" value="{!v.singleRec.Phoenix_Expiry_Date__c}" action="{!c.onCISUChange}"/> -->
    <aura:attribute name="attrName" type="Date" default="" />  
    <aura:attribute name="otbDirIndirect" type="String" />
    <aura:registerEvent name="calcEvent" type="c:TotalCalculationEvt"/>
    
    <!-- attributes for rounded dead net when comparing with low/SKU -->
    <aura:attribute name="directDeadnet" type="Decimal" />
    <aura:attribute name="indirectDeadnet" type="Decimal" />
    <aura:handler name="change" value="{!v.otbDirIndirect}" action="{!c.otbDirIndirChanged}"/>
    
    <aura:registerEvent name="lightningEvent" type="c:RefreshBidLineItemCmpEvt"/>
    
    <aura:if isTrue="{!v.isSpinner}">
        <div class="">
            <lightning:spinner alternativeText="Loading" variant="brand" />
        </div>
    </aura:if>
    
    
    
    <aura:if isTrue="{!v.isGoalseekModalOpen}">
        
        
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                 aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            
            <div class="slds-modal__container" style="width:50% ! important;">
                
                <!-- Modal/Popup Box Header Starts here-->
                <header class="slds-modal__header">
                    <lightning:buttonIcon iconName="utility:close" onclick="{!c.closeGoalseekPopup}"
                                          alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                    <h2 class="slds-text-heading_medium slds-hyphenate"><b>Goal Seek</b></h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium">
                    <div class="slds-grid">
                        <div class="slds-m-right_small">
                            <lightning:input type="number" formatter="currency" step="0.01" class="lableInput"
                                             name="input1" label="Direct Dead Net"
                                             value="{!v.expectDdeadnet}" onchange="{!c.calcGoalSeek}" />
                        </div>
                        <!-- <div class="slds-m-right_small">
                            <lightning:input type="number" formatter="currency" step="0.01" class="lableInput"
                                             name="input2" label="Indirect Dead Net"
                                             value="{!v.expectCustmerDdeadnet}" onchange="{!c.calcIndirectDeadNetGoalSeek}" />
                        </div>-->
                        <div class="slds-col slds-size_1-of-3 slds-m-left_small slds-m-top_xxx-small">
                            Required Price
                            <div class="myclass">
                                <lightning:formattedNumber id="myinput" value="{!v.RequiredPrice}" style="currency"
                                                           currencyCode="USD" maximumFractionDigits="2" />
                            </div>
                            <aura:if isTrue="{!v.err}">
                                <div class="slds-section">
                                    <ui:message title="" severity="error">
                                        <strong style="color:red">{!v.errMsg}</strong>
                                    </ui:message>
                                </div>
                            </aura:if>
                        </div>
                    </div>
                </div>
                
                <footer class="slds-modal__footer">
                    <lightning:button variant="neutral" label="Cancel" title="Cancel"
                                      onclick="{! c.closeGoalseekPopup }" />
                    <aura:if isTrue="{!v.ShowSaveButton}">
                        <lightning:button variant="neutral" label="Save" title="Save" onclick="{!c.onCISUChange }" />
                    </aura:if>
                    
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </aura:if>
    
    <!--goal seek indirect deadnet popup-->
    <aura:if isTrue="{!v.isGoalseekModalOpenIndirect}">
        
        
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                 aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            
            <div class="slds-modal__container" style="width:50% ! important;">
                
                <!-- Modal/Popup Box Header Starts here-->
                <header class="slds-modal__header">
                    <lightning:buttonIcon iconName="utility:close" onclick="{!c.closeGoalseekPopupIndirect}"
                                          alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                    <h2 class="slds-text-heading_medium slds-hyphenate"><b>Goal Seek</b></h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium">
                    <div class="slds-grid">
                        <!--   <div class="slds-m-right_small">
                            <lightning:input type="number" formatter="currency" step="0.01" class="lableInput"
                                             name="input1" label="Direct Dead Net"
                                             value="{!v.expectDdeadnet}" onchange="{!c.calcGoalSeek}" />
                        </div>-->
                        <div class="slds-m-right_small">
                            <lightning:input type="number" formatter="currency" step="0.01" class="lableInput"
                                             name="input2" label="Indirect Dead Net"
                                             value="{!v.expectCustmerDdeadnet}" onchange="{!c.calcIndirectDeadNetGoalSeek}" />
                        </div>
                        <div class="slds-col slds-size_1-of-3 slds-m-left_small slds-m-top_xxx-small">
                            Required Price
                            <div class="myclass">
                                <lightning:formattedNumber id="myinput" value="{!v.RequiredPrice}" style="currency"
                                                           currencyCode="USD" maximumFractionDigits="2" />
                            </div>
                            <aura:if isTrue="{!v.err}">
                                <div class="slds-section">
                                    <ui:message title="" severity="error">
                                        <strong style="color:red">{!v.errMsg}</strong>
                                    </ui:message>
                                </div>
                            </aura:if>
                        </div>
                    </div>
                </div>
                
                <footer class="slds-modal__footer">
                    <lightning:button variant="neutral" label="Cancel" title="Cancel"
                                      onclick="{! c.closeGoalseekPopupIndirect }" />
                    <aura:if isTrue="{!v.ShowSaveButton}">
                        <lightning:button variant="neutral" label="Save" title="Save" onclick="{!c.onCISUChange }" />
                    </aura:if>
                    
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </aura:if>
    
    
    <!--Bid Histroy Analytics Modal Popup-START-->
    <aura:if isTrue="{!v.displayBidHist}">
        <c:Phoenix_BidPricingHistory tableRef="{!v.tableRef}" recordId="{!v.recordId}"
                                     displayBidHist="{!v.displayBidHist}" bidLineItemId="{!v.bidLineItemId}" />
    </aura:if>
    <!--Bid Histroy Analytics Modal Popup-END-->
    <!--Historical Pricing Analytics Modal Popup-START-->
    <aura:if isTrue="{!v.displayHistPricing}">
        <c:Phoenix_HistPricingAnalytics tableRef="{!v.tableRef}" recordId="{!v.recordId}"
                                        displayHistPricing="{!v.displayHistPricing}" bidLineItemId="{!v.bidLineItemId}" />
    </aura:if>
    <!--Historical Pricing Analytics Modal Popup-END-->
    <!--NPR Product Histroy Analytics Modal Popup-START-->
    <aura:if isTrue="{!v.displayProdNPRHist}">
        <c:Phoenix_NPRHistory tableRef="{!v.tableRef}" recordId="{!v.recordId}"
                              displayProdNPRHist="{!v.displayProdNPRHist}" bidLineItemId="{!v.bidLineItemId}" />
    </aura:if>
    <!--NPR Product Histroy Analytics Modal Popup-END-->
    <!--IMS Market Share Analytics Modal Popup-START-->
    <aura:if isTrue="{!v.displayIMS}">
        <c:Phoenix_IMSMaketShare tableRef="{!v.tableRef}" recordId="{!v.recordId}" displayIMS="{!v.displayIMS}"
                                 bidLineItemId="{!v.bidLineItemId}" />
    </aura:if>
    <!--IMS Market Share Analytics Modal Popup-END-->
    <aura:if isTrue="{!v.displayFutureDisplay}">
        <c:Phoenix_FutureNPRData
                                 productId ="{!v.productId}" lineItemId="{!v.lineItemId}" tableRef="{!v.tableRef}" displayFutureDisplay="{!v.displayFutureDisplay}"/>
    </aura:if>
    
    <aura:if isTrue="{!v.isModalOpen}">
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            
            <div class="slds-modal__container" style="width:50% ! important;">
                
                <!-- Modal/Popup Box Header Starts here-->
                <header class="slds-modal__header">
                    <lightning:buttonIcon iconName="utility:close"
                                          onclick="{!c.closePopup}"
                                          alternativeText="close"
                                          variant="bare-inverse"
                                          class="slds-modal__close"/>
                    <aura:if isTrue="{! not(empty(v.ReBidListAll))}">
                        <h2 class="slds-text-heading_medium slds-hyphenate"><b>Previous Prices</b></h2>
                    </aura:if>
                </header>
                <!--Modal/Popup Box Body Starts here-->
                <!--div class="slds-scrollable" style="height: 100rem; width: 46rem"-->
                <div class="slds-modal__content slds-p-around_medium" >
                    
                    <aura:if isTrue="{! not(empty(v.ReBidListAll))}">
                        <table class="slds-table slds-table_cell_buffered slds-max-medium-table_stacked-horizontal slds-table_bordered" style="border:1px solid #eaeaea;">
                            <thead>
                                
                                <tr class="slds-text-title">
                                    
                                    <th scope="col" class="slds-cell-wrap "> <div class="slds-truncate" title="Bid"> Bid </div>  </th>
                                    <th scope="col" class="slds-cell-wrap "> <div class="slds-truncate" title="Created Date">Created Date</div>  </th>
                                    <th scope="col" class="slds-cell-wrap "> <div class="slds-truncate" title="Bid Status"> Bid Status</div>  </th>
                                    <th scope="col" class="slds-cell-wrap slds-text-align_right"> <div class="slds-truncate" title="Contract Price">Proposed Direct Contract Price</div> </th>      
                                    <th scope="col" class="slds-cell-wrap slds-text-align_right"> <div class="slds-truncate" title="Contract Price">Proposed Indirect Contract Price</div> </th>      
                                </tr>
                            </thead> 
                            <tbody>
                                <aura:iteration items="{!v.ReBidListAll}" var="prodItem" indexVar="itemIndex">
                                    <tr>
                                        <td class="slds-cell-wrap" scope="col"> <a href="{!'/'+prodItem.Phoenix_Bid__c}" target="_blank">{!prodItem.Phoenix_Bid__r.Name}</a></td> 
                                        <td class="slds-cell-wrap" scope="col"><lightning:formattedDateTime value="{!prodItem.Phoenix_Bid__r.CreatedDate}"/></td>
                                        <td class="slds-cell-wrap" scope="col">{!prodItem.Phoenix_Bid__r.Phoenix_Approval_Status__c}</td>
                                        <td class="slds-cell-wrap slds-text-align_right" scope="col"><lightning:formattedNumber value="{!prodItem.Phoenix_ProposedContractBidPriceMktng__c}" style="currency" currencyCode="USD"></lightning:formattedNumber> </td>
                                        <td class="slds-cell-wrap slds-text-align_right" scope="col"><lightning:formattedNumber value="{!prodItem.Phoenix_Wholesaler_Diff_Price_Indirect__c}" style="currency" currencyCode="USD"></lightning:formattedNumber> </td>
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <aura:set attribute="else">
                            <p style="text-align:center">No previous prices found.</p>  
                        </aura:set>
                    </aura:if>
                </div>
                <!--/div-->
                <!--Modal/Popup Box Footer Starts here-->
                <footer class="slds-modal__footer">
                    <lightning:button variant="neutral"
                                      label="Cancel"
                                      title="Cancel"
                                      onclick="{! c.closePopup }"/>
                    
                </footer>
            </div>
            
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
        
    </aura:if > 
    
    
    <tr class="editTrClass">
        
        <th scope="row" class="{! v.showErrorClass == true ? 'slds-cell-edit slds-has-error' : 'slds-cell-edit'}">
            <aura:if isTrue="{!v.BidAprrovalStatus=='Draft'}">
                <a name="{!v.lineItemId}" onclick="{!c.deleteLineItem}">
                    <lightning:icon iconName="utility:delete" alternativeText="delete" size="x-small" />
                </a>
            </aura:if>
        </th>
        <th scope="row" class="{! v.showErrorClass == true ? 'slds-cell-edit slds-has-error' : 'slds-cell-edit'}">
            <span class="slds-grid slds-grid_align-spread">
                <span class="" title="NDC">{!v.singleRec.Phoenix_NDC__c}</span>
            </span>
        </th>
        <th scope="row" >{!v.singleRec.Phoenix_Product_Code1__c}</th>
        <th scope="row" >
            <!--Added by Naseer to replace Product Family with Lookup-->
            <aura:if isTrue="{!v.singleRec.Product_Family__c}">
                <lightning:formattedUrl value="{!'/' + v.singleRec.Product_Family__c}"
                                        label="{!v.singleRec.Product_Family_Name__c}" target="_blank" />
                <aura:set attribute="else">
                    {!v.singleRec.Phoenix_Product_Family__c}
                </aura:set>
            </aura:if>
            <!--End-->
            <!--{!v.singleRec.Phoenix_Product_Family__c}-->
        </th>
        <th scope="row" ><lightning:formattedNumber value="{!v.singleRec.Phoenix_Pkg_Size__c}"/></th>
        <th scope="row" >
            <span class="slds-grid slds-grid_align-spread">
                <span class="" title="Product">
                    <lightning:formattedUrl value="{!'/' + v.singleRec.Phoenix_Product__r.Id}"  label="{!v.singleRec.Phoenix_Product__r.Name}" target="_self" />  
                </span>
            </span>
        </th>
        <!-- logic for Re-Bid functionality- starts-->
        <aura:if isTrue="{!v.isReBid}">
            <td> <a href="{!'/'+v.singleRec.Phoenix_Previous_Bid__c}"
                    target="_blank">{!v.singleRec.Phoenix_Previous_Bid__r.Name}</a></td>
            <td> <a onclick="{!c.showSelectedproducts}">{!v.singleRec.Phoenix_Previous_LineItem__r.Name}</a></td>
        </aura:if>
        <!-- logic for Re-Bid functionality- ends-->
        
        <td><lightning:formattedNumber value="{!v.singleRec.Phoenix_Case_Pack__c}"/></td>
          <td><lightning:formattedNumber value="{!v.singleRec.Minimum_Order_Quantity__c}"/></td>
        <td>{!v.singleRec.Phoenix_Compare_To_Brand_Name1__c}</td>
        <td>{!v.singleRec.Phoenix_Product_Director__c}</td>
        <td class="slds-text-align--right">
            <lightning:formattedNumber value="{!v.singleRec.Phoenix_Throughput_cost__c}" style="currency" currencyCode="USD" maximumFractionDigits="2"/>
        </td>
        <td class="slds-text-align--right">
            <lightning:formattedNumber value="{!v.singleRec.Phoenix_WAC__c}" style="currency" currencyCode="USD" maximumFractionDigits="2"/>
        </td>           
        <!--- <td>{!v.singleRec.Phoenix_IMS_Market_Share__c}</td>-->
        
        <aura:if isTrue="{!v.bidType=='Platform OTB'}">
            <!--<aura:if isTrue="{!or(or(v.BidAprrovalStatus=='Draft', and(or(v.BidAprrovalStatus=='Marketing',v.BidAprrovalStatus=='Marketing'),or(v.isMarketingApprovePerson==v.singleRec.Phoenix_Product_Director__c,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,v.isdeligationApprover)))),v.singleRec.Phoenix_Marketing_Final_Approval__c!=true)}">-->
            <aura:if isTrue="{!or(v.BidAprrovalStatus=='Draft',and(v.BidAprrovalStatus=='Marketing',or(v.loggedInUserId == v.marketingApprover,v.loggedInUserId == v.delegatedUserId)))}">
                <aura:if isTrue="{!v.otbDirIndirect=='Direct'}" >
                    <td class="slds-text-align--right" ondblclick="{!c.inlineEditProDirectUnits}">
                        <span class="slds-grid slds-grid_align-spread">
                            <aura:if isTrue="{!v.ProDirectUnitsEditMode == false}">
                                
                                <span><lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Direct_Selling_Unit__c}" maximumFractionDigits="0"/></span>
                                <button onclick="{!c.inlineEditProDirectUnits}" class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small">
                                    <lightning:icon iconName="utility:edit" size="xx-small" />
                                </button>
                                <aura:set attribute="else">
                                    <section  tabindex="0" class="slds-popover slds-popover_edit" role="dialog" style="position: absolute; top: 0px;width: max-content;">
                                        <div class="slds-popover__body">
                                            <div class="slds-form-element slds-grid slds-wrap">
                                                <div class="slds-form-element__control slds-grow">
                                                    <ui:inputNumber class="slds-input inputWidth"
                                                                    labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                    aura:id="ProDirectUnits"
                                                                    blur="{!c.closeProDirectUnits}"
                                                                    change="{!c.onCISUChange}"                                                      
                                                                    value="{!v.singleRec.Phoenix_Proposed_Direct_Selling_Unit__c}" />
                                                </div>
                                            </div>
                                        </div>
                                        <span id="form-end" tabindex="0"></span>
                                    </section>
                                </aura:set>
                            </aura:if>
                        </span>
                    </td>
                    
                    <aura:set attribute="else">
                        <td></td>
                    </aura:set>
                </aura:if>
                <aura:set attribute="else">
                    <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Direct_Selling_Unit__c}"  minimumFractionDigits="0" maximumFractionDigits="0"/></td>
                </aura:set> 
            </aura:if>                           
            
            <aura:if isTrue="{!or(v.BidAprrovalStatus=='Draft',and(v.BidAprrovalStatus=='Marketing',or(v.loggedInUserId == v.marketingApprover,v.loggedInUserId == v.delegatedUserId)))}">
                <aura:if isTrue="{!v.otbDirIndirect=='Indirect'}" >
                    <td class="slds-text-align--right" ondblclick="{!c.inlineEditProIndirectUnits}">
                        <span class="slds-grid slds-grid_align-spread">
                            <aura:if isTrue="{!v.ProIndirectUnitsEditMode == false}">
                                <span  ><lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Indirect_Selling_Unit__c}" maximumFractionDigits="0"/></span>
                                <button onclick="{!c.inlineEditProIndirectUnits}" class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="0"  >
                                    <lightning:icon iconName="utility:edit" size="xx-small" />
                                </button>
                                <aura:set attribute="else">
                                    <section  tabindex="0" class="slds-popover slds-popover_edit" role="dialog" style="position: absolute; top: 0px;width: max-content;">
                                        <div class="slds-popover__body">
                                            <div class="slds-form-element slds-grid slds-wrap">
                                                <div class="slds-form-element__control slds-grow">
                                                    <ui:inputNumber class="slds-input inputWidth"
                                                                    labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                    aura:id="ProIndirectUnits"
                                                                    blur="{!c.closeProIndirectUnits}"
                                                                    change="{!c.onCISUChange}"                                                      
                                                                    value="{!v.singleRec.Phoenix_Proposed_Indirect_Selling_Unit__c}" />
                                                </div>
                                            </div>
                                        </div>
                                        <span id="form-end" tabindex="0"></span>
                                    </section>
                                </aura:set>
                            </aura:if>
                        </span>
                    </td>
                    <aura:set attribute="else">
                        <td></td>
                    </aura:set>
                </aura:if>
                
                <aura:set attribute="else">
                    <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Indirect_Selling_Unit__c}"  minimumFractionDigits="0" maximumFractionDigits="0"/></td>
                    
                </aura:set>  
            </aura:if>
            <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Listing_Price__c}"  minimumFractionDigits="0" maximumFractionDigits="0"/></td>
            <!-- <aura:if isTrue="{!or(or(v.BidAprrovalStatus=='Draft', and(or(v.BidAprrovalStatus=='Marketing',v.BidAprrovalStatus=='Marketing'),or(v.loggedInUserId == v.marketingApprover,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,v.isdeligationApprover)))),v.singleRec.Phoenix_Marketing_Final_Approval__c!=true)}">-->
            
            
            <!--<aura:if isTrue="{!or(and(v.BidAprrovalStatus=='Draft',v.loggedInUserId == v.marketingApprover),and(v.BidAprrovalStatus=='Marketing',or(v.loggedInUserId == v.marketingApprover,v.loggedInUserId == v.delegatedUserId)))}">
                -->
            
            
            <aura:if isTrue="{!or(and(v.BidAprrovalStatus=='Draft',v.loggedInUserId == v.marketingApprover),and(v.BidAprrovalStatus=='Marketing',or(v.loggedInUserId == v.marketingApprover,v.loggedInUserId == v.delegatedUserId)))}">
                <aura:if isTrue="{!v.otbDirIndirect=='Direct'}" >                    
                    <td class="slds-text-align--right" ondblclick="{!c.inlineEditPCBP}">
                        <span class="slds-grid slds-grid_align-spread">
                            <!-- show input and output section based on boolean flag -->
                            <aura:if isTrue="{!v.PCBPEditMode == false}">
                                
                                <a name="{!v.lineItemId}" onclick="{!c.openGoalseek}" title="Goal Seek">
                                    <lightning:icon iconName="utility:campaign" alternativeText="delete"
                                                    size="x-small" />
                                </a>
                                
                                <span class="slds-text-align_right">
                                    <div style="{!lessthan(v.directDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'color:red':''}">
                                        <lightning:formattedNumber title="{!lessthan(v.directDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'Direct Dead Net is less than Lowest Price/SKU': ''}"
                                                                   value="{!v.singleRec.Phoenix_ProposedContractBidPriceMktng__c}"
                                                                   style="currency" currencyCode="USD" />
                                    </div>
                                    
                                </span>
                                <button onclick="{!c.inlineEditPCBP}"
                                        class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                        tabindex="0">
                                    <lightning:icon iconName="utility:edit" size="xx-small" />
                                </button>
                                <!-- Inline Edit Section in else case-->
                                <aura:set attribute="else">
                                    <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                             style="position: absolute; top: 0px;width:max-content;">
                                        <div class="slds-popover__body">
                                            <div class="slds-form-element slds-grid slds-wrap">
                                                <div class="slds-form-element__control slds-grow">
                                                    <ui:inputNumber class="slds-input inputWidth MarketingPrice"
                                                                    labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                    aura:id="inputPCBPId" blur="{!c.closePCBPBox}"
                                                                    change="{!c.onCISUChange}"
                                                                    value="{!v.singleRec.Phoenix_ProposedContractBidPriceMktng__c}" />
                                                </div>
                                            </div>
                                        </div>
                                        <span id="form-end" tabindex="0"></span>
                                    </section>
                                </aura:set>
                            </aura:if>
                        </span>
                    </td>
                    
                    <aura:set attribute="else">
                        <td></td>
                    </aura:set>                     
                </aura:if>
                
                
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <div
                             style="{!lessthan(v.directDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'color:red':''}">
                            <lightning:formattedNumber
                                                       title="{!lessthan(v.directDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'Direct Dead Net is less than Lowest Price/SKU':''}"
                                                       value="{!v.singleRec.Phoenix_ProposedContractBidPriceMktng__c}" style="currency"
                                                       currencyCode="USD" />
                        </div>
                        
                    </td>
                </aura:set>
                
            </aura:if>
            
            <!-- <aura:if isTrue="{!and(v.loggedInUserName==v.singleRec.Phoenix_Product_Director__c,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,or(v.BidAprrovalStatus=='Marketing',or(v.isMarketingApprovePerson==v.singleRec.Phoenix_Product_Director__c,v.isdeligationApprover))))}">
                   -->
            <aura:if isTrue="{!or(and(v.BidAprrovalStatus=='Draft',v.loggedInUserId == v.marketingApprover),and(v.BidAprrovalStatus=='Marketing',or(v.loggedInUserId == v.marketingApprover,v.loggedInUserId == v.delegatedUserId)))}">
                <aura:if isTrue="{!v.otbDirIndirect=='Indirect'}" >                    
                    <td class="slds-text-align--right" ondblclick="{!c.inlineEditWholeDiffPriInd}">
                        <span class="slds-grid slds-grid_align-spread">
                            <!-- show input and output section based on boolean flag -->
                            <aura:if isTrue="{!v.WDPIEditMode == false}">
                                <a name="{!v.lineItemId}" onclick="{!c.openGoalseekIndirect}" title="Goal Seek">
                                    <lightning:icon iconName="utility:campaign" alternativeText="delete"
                                                    size="x-small" />
                                </a>
                                <span class="slds-text-align_right">
                                    <div style="{!v.isIndirAccpetable ?'color:green':!v.isIndirNotAccpetable ?'color:red': ''}">
                                        <!-- style="{!lessthan(v.indirectDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'color:red':''}"> title="{!lessthan(v.indirectDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'Indirect Dead Net is less than Lowest Price/SKU':''}"
                                                                   -->
                                        <lightning:formattedNumber title="{!v.isIndirAccpetable ?'Indirect Dead Net Price is greater than LE+10 %(LE) (or) BASP+10% of BASP':!v.isIndirNotAccpetable ?'Indirect Dead Net Price is less than LE-10 %(LE) (or) BASP-10% of BASP': ''}"
                                                                   value="{!v.singleRec.Phoenix_Wholesaler_Diff_Price_Indirect__c}"
                                                                   style="currency" currencyCode="USD" />
                                    </div>
                                    
                                </span>
                                <button onclick="{!c.inlineEditWholeDiffPriInd}"
                                        class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                        tabindex="0">
                                    <lightning:icon iconName="utility:edit" size="xx-small" />
                                </button>
                                <!-- Inline Edit Section in else case-->
                                <aura:set attribute="else">
                                    <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                             style="position: absolute; top: 0px;width:max-content;">
                                        <div class="slds-popover__body">
                                            <div class="slds-form-element slds-grid slds-wrap">
                                                <div class="slds-form-element__control slds-grow">
                                                    <ui:inputCurrency class="slds-input inputWidth"
                                                                      labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                      aura:id="inputWDPIId" blur="{!c.closeWDPIBox}"
                                                                      change="{!c.onCISUChange}"
                                                                      value="{!v.singleRec.Phoenix_Wholesaler_Diff_Price_Indirect__c}" />
                                                </div>
                                            </div>
                                        </div>
                                        <span id="form-end" tabindex="0"></span>
                                    </section>
                                </aura:set>
                            </aura:if>
                        </span>
                    </td>
                    <aura:set attribute="else">
                        <td></td>
                    </aura:set>                            
                </aura:if>
                
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <div style="{!v.isIndirAccpetable ?'color:green':!v.isIndirNotAccpetable ?'color:red': ''}">
                            <!-- style="{!lessthan(v.indirectDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'color:red':''}"> title="{!lessthan(v.indirectDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'Indirect Dead Net is less than Lowest Price/SKU':''}"
                                                       -->
                            <lightning:formattedNumber title="{!v.isIndirAccpetable ?'Indirect Dead Net Price is greater than LE+10 %(LE) (or) BASP+10% of BASP':!v.isIndirNotAccpetable ?'Indirect Dead Net Price is less than LE-10 %(LE) (or) BASP-10% of BASP': ''}"
                                                       value="{!v.singleRec.Phoenix_Wholesaler_Diff_Price_Indirect__c}" style="currency"
                                                       currencyCode="USD" />
                        </div>
                    </td>
                </aura:set>
            </aura:if>
            <!--  <aura:if isTrue="{!and(v.loggedInUserName==v.singleRec.Phoenix_Product_Director__c,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,or(v.BidAprrovalStatus=='Marketing',or(v.isMarketingApprovePerson==v.singleRec.Phoenix_Product_Director__c,v.isdeligationApprover))))}">
                   -->
            <aura:if isTrue="{!or(v.BidAprrovalStatus=='Draft',and(v.BidAprrovalStatus=='Marketing',or(v.loggedInUserId == v.marketingApprover,v.loggedInUserId == v.delegatedUserId)))}">
                <td class="slds-text-align--right" ondblclick="{!c.inlineEditRebFeePercent}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.RebFeePercentEditMode == false}">
                            <span  ><lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Current_Rebate__c}" style="percent-fixed" maximumFractionDigits="2"/></span>
                            <button onclick="{!c.inlineEditRebFeePercent}" class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="0"  >
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <aura:set attribute="else">
                                <section  tabindex="0" class="slds-popover slds-popover_edit" role="dialog" style="position: absolute; top: 0px;width: max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputNumber class="slds-input inputWidth"
                                                                labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                aura:id="RebFeePercent"
                                                                blur="{!c.closeRebFeePercent}"
                                                                change="{!c.onCISUChange}"                                                      
                                                                value="{!v.singleRec.Phoenix_Proposed_Current_Rebate__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <div>
                            <lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Current_Rebate__c}" style="percent-fixed"
                                                       maximumFractionDigits="2" />
                        </div>
                    </td>
                </aura:set>          
            </aura:if>
            
            
            <td class="slds-text-align--right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Net_Price_after_Rebates_Terms__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <aura:if isTrue="{!or(and(v.BidAprrovalStatus=='Draft',v.loggedInUserId == v.marketingApprover),and(v.BidAprrovalStatus=='Marketing',or(v.loggedInUserId == v.marketingApprover,v.loggedInUserId == v.delegatedUserId)))}">
                <td class="slds-text-align--right" ondblclick="{!c.inlineEditPURDollar}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.PURDollarEditMode == false}">
                            <span  ><lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Per_Unit_Rebate__c}" style="currency" currencyCode="USD" maximumFractionDigits="0"/></span>
                            <button onclick="{!c.inlineEditPURDollar}" class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="0"  >
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <aura:set attribute="else">
                                <section  tabindex="0" class="slds-popover slds-popover_edit" role="dialog" style="position: absolute; top: 0px;width: max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputNumber class="slds-input inputWidth"
                                                                labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                aura:id="PURDollar"
                                                                blur="{!c.closePURDollar}"
                                                                change="{!c.onCISUChange}"                                                      
                                                                value="{!v.singleRec.Phoenix_Proposed_Per_Unit_Rebate__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                <aura:set attribute="else">
                    
                    <td class="slds-text-align--right">
                        <div>
                            <lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Per_Unit_Rebate__c}" style="currency"
                                                       currencyCode="USD" maximumFractionDigits="0" />
                        </div>
                        
                    </td>
                    
                </aura:set>      
                
            </aura:if>
            
            
            
            <td class="slds-text-align--right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Direct_CD__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <aura:if isTrue="{!v.otbDirIndirect == 'Direct'}">
                <td class="slds-text-align--right">
                    <div style="{!v.isAccpetable ?'color:green':!v.isNotAccpetable ?'color:red': ''}">
                        <lightning:formattedNumber title="{!v.isAccpetable ?'Direct Dead Net Price is greater than LE+10 %(LE) (or) BASP+10% of BASP':!v.isNotAccpetable ?'Direct Dead Net Price is less than LE-10 %(LE) (or) BASP-10% of BASP': ''}"
                                                   value="{!v.singleRec.Phoenix_Direct_Dead_Net__c}"
                                                   style="currency" currencyCode="USD" />
                        
                    </div>   
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="currency"
                                                   currencyCode="USD" maximumFractionDigits="2" />
                    </td>
                    
                </aura:set>
            </aura:if>
            
            
            <aura:if isTrue="{!v.otbDirIndirect=='Direct'}" >
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Direct_TP_In__c}" style="currency"
                                               currencyCode="USD" maximumFractionDigits="2" />
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="currency"
                                                   currencyCode="USD" maximumFractionDigits="2" />
                    </td>
                    
                </aura:set>     
                
            </aura:if>    
            <aura:if isTrue="{!v.otbDirIndirect=='Direct'}" >
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Direct_TP__c}" style="percent-fixed"
                                               maximumFractionDigits="2" />
                </td>  
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="percent-fixed"
                                                   currencyCode="USD" maximumFractionDigits="2" />
                    </td>
                    
                </aura:set>     
            </aura:if>
            
            <aura:if isTrue="{!v.otbDirIndirect=='Direct'}" >
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Proposed_Net_Sales_Direct__c}" style="currency"
                                               currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="currency"
                                                   currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                    </td>
                    
                </aura:set>     
            </aura:if>
            
            <aura:if isTrue="{!v.otbDirIndirect=='Direct'}" >
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Proposed_TPT_Direct__c}" style="currency"
                                               currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="currency"
                                                   currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                    </td>
                    
                </aura:set>     
            </aura:if>
            
            <aura:if isTrue="{!v.otbDirIndirect=='Direct'}" >
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Proposed_TPT_Per_Direct__c}" style="percent-fixed"
                                               maximumFractionDigits="2" />
                </td> 
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="percent-fixed"
                                                   maximumFractionDigits="2" />
                    </td> 
                </aura:set>     
            </aura:if>
            
            
            <aura:if isTrue="{!or(and(v.BidAprrovalStatus=='Draft',v.loggedInUserId == v.marketingApprover),and(v.BidAprrovalStatus=='Marketing',or(v.loggedInUserId == v.marketingApprover,v.loggedInUserId == v.delegatedUserId)))}">
                <aura:if isTrue="{!v.otbDirIndirect=='Indirect'}" >  
                    <td class="slds-text-align--right" ondblclick="{!c.inlineEditCMFeePer}">
                        <span class="slds-grid slds-grid_align-spread">
                            <aura:if isTrue="{!v.CMFeePerEditMode == false}">
                                <span  ><lightning:formattedNumber value="{!v.singleRec.Phoenix_Contract_Mngment_Fee_Wholesaler__c}" style="percent-fixed" maximumFractionDigits="2"/></span>
                                <button onclick="{!c.inlineEditCMFeePer}" class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="0"  >
                                    <lightning:icon iconName="utility:edit" size="xx-small" />
                                </button>
                                <aura:set attribute="else">
                                    <section  tabindex="0" class="slds-popover slds-popover_edit" role="dialog" style="position: absolute; top: 0px;width: max-content;">
                                        <div class="slds-popover__body">
                                            <div class="slds-form-element slds-grid slds-wrap">
                                                <div class="slds-form-element__control slds-grow">
                                                    <ui:inputNumber class="slds-input inputWidth"
                                                                    labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                    aura:id="CMFeePer"
                                                                    blur="{!c.closeCMFeePer}"
                                                                    change="{!c.onCISUChange}"                                                      
                                                                    value="{!v.singleRec.Phoenix_Contract_Mngment_Fee_Wholesaler__c}" />
                                                </div>
                                            </div>
                                        </div>
                                        <span id="form-end" tabindex="0"></span>
                                    </section>
                                </aura:set>
                            </aura:if>
                        </span>
                    </td>
                    <aura:set attribute="else">
                        <td class="slds-text-align--right">
                            <lightning:formattedNumber value="{!v.singleRec.Phoenix_Contract_Mngment_Fee_Wholesaler__c}"  style="percent-fixed"
                                                       maximumFractionDigits="2" />
                        </td>
                        
                    </aura:set>    
                </aura:if>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="{!v.singleRec.Phoenix_Contract_Mngment_Fee_Wholesaler__c}"  style="percent-fixed"
                                                   maximumFractionDigits="2" />
                    </td>
                    
                </aura:set>    
                
            </aura:if>
            
            
            <td class="slds-text-align--right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Contract_Mngmnt_Fee_Wholesaler__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            
            <aura:if isTrue="{!v.otbDirIndirect == 'Indirect'}">
                <td class="slds-text-align--right">
                    <div style="{!v.isIndirAccpetable ?'color:green':!v.isIndirNotAccpetable ?'color:red': ''}">
                        <lightning:formattedNumber title="{!v.isIndirAccpetable ?'Indirect Dead Net Price is greater than LE+10 %(LE) (or) BASP+10% of BASP':!v.isIndirNotAccpetable ?'Indirect Dead Net Price is less than LE-10 %(LE) (or) BASP-10% of BASP': ''}"
                                                   value="{!v.singleRec.Phoenix_Indirect_Dead_Net__c}"
                                                   style="currency" currencyCode="USD" />
                        
                        
                        
                    </div>
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="currency"
                                                   currencyCode="USD" maximumFractionDigits="2" />
                    </td>
                    
                </aura:set>
            </aura:if>
            
            
            <aura:if isTrue="{!v.otbDirIndirect=='Indirect'}" >
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Indirect_TP__c}" style="currency"
                                               currencyCode="USD" maximumFractionDigits="2" />
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="currency"
                                                   currencyCode="USD" maximumFractionDigits="2" />
                    </td>
                    
                </aura:set>     
                
            </aura:if>    
            <aura:if isTrue="{!v.otbDirIndirect=='Indirect'}" >
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Indirect_TP__c}" style="percent-fixed"
                                               maximumFractionDigits="2" />
                </td>  
                
                
                
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Proposed_Net_Sales_Indirect__c}" style="currency"
                                               currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                
                
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Proposed_TPT_Indirect__c}" style="currency"
                                               currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Proposed_TPT_Per_Indirect__c}" style="percent-fixed"
                                               maximumFractionDigits="2" />
                </td>
                
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="percent-fixed"
                                                   currencyCode="USD" maximumFractionDigits="2" />
                    </td>
                    
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0" style="currency"
                                                   currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                    </td>
                    
                    
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0" style="currency"
                                                   currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                    </td>
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="percent-fixed"
                                                   maximumFractionDigits="2" />
                    </td>   
                    
                    
                </aura:set>     
                
            </aura:if>
            <td class="slds-text-align--right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Lowest_Price_SKU__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <!-- <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Approved_Lowest_Price_SKU__c}" style="currency" currencyCode="USD" maximumFractionDigits="2"/></td>
            -->
            
            
            
            <!-- <aura:if isTrue="{!or(v.loggedInUserName==v.singleRec.Phoenix_Product_Director__c,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,or(v.isMarketingApprovePerson==v.singleRec.Phoenix_Product_Director__c,v.isdeligationApprover)))}">
                -->
            
            <aura:if isTrue="{!or(and(v.isMarketingApprovePerson == v.loggedInUserName,v.BidAprrovalStatus=='Marketing') ,and(or(v.BidAprrovalStatus=='Marketing',v.BidAprrovalStatus=='Draft'),v.loggedInUserId == v.marketingApprover))}">
                <td ondblclick="{!c.inlineEditMarketingApproval}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.MarketApprovalEditMode == false}">
                            <span class="">{!v.singleRec.Phoenix_Marketing_Approval__c}</span>
                            <button onclick="{!c.inlineEditMarketingApproval}"
                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                    tabindex="0">
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <aura:set attribute="else">
                                <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                         style="position: absolute; top: 0px;width:max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <lightning:select name="MarketApproval"
                                                                  aura:id="inputMarketApprovalId"
                                                                  onblur="{!c.closeMarketApprovalBox}"
                                                                  onchange="{!c.onCISUChange}">
                                                    <option value="{!v.singleRec.Phoenix_Marketing_Approval__c}">
                                                        {!v.singleRec.Phoenix_Marketing_Approval__c}</option>
                                                    <aura:if isTrue="{!(v.singleRec.Phoenix_Marketing_Approval__c != 'Approved')}">
                                                        <option value="Approved">Approved</option>
                                                    </aura:if>
                                                    <aura:if isTrue="{!(v.singleRec.Phoenix_Marketing_Approval__c != 'Not Approved')}">
                                                        <option value="Not Approved">Not Approved</option>
                                                    </aura:if>
                                                </lightning:select>
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                
                <aura:set attribute="else">
                    <aura:if isTrue="{!v.bidType!='Volume Review Only'}">
                        <td> {!v.singleRec.Phoenix_Marketing_Approval__c}</td>
                    </aura:if>
                </aura:set>
            </aura:if>
            
            <aura:if isTrue="{!or(and(v.isMarketingApprovePerson == v.loggedInUserName,v.BidAprrovalStatus=='Marketing') ,and(or(v.BidAprrovalStatus=='Marketing',v.BidAprrovalStatus=='Draft'),v.loggedInUserId == v.marketingApprover))}">
                
                <td ondblclick="{!c.inlineEditMarketingNotes}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.MarkNotesEditMode == false}">
                            <span class="">{!v.singleRec.Phoenix_Marketing_Notes__c}</span>
                            <button onclick="{!c.inlineEditMarketingNotes}"
                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                    tabindex="0">
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <aura:set attribute="else">
                                <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                         style="position: absolute; top: 0px;width:max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputText class="slds-input inputWidth"
                                                              labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                              aura:id="inputMarketNotesId" blur="{!c.closeMarketNotesBox}"
                                                              change="{!c.onCISUChange}"
                                                              value="{!v.singleRec.Phoenix_Marketing_Notes__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                
                <aura:set attribute="else">
                    <td>{!v.singleRec.Phoenix_Marketing_Notes__c}</td>
                </aura:set>
            </aura:if>
            
            <aura:if isTrue="{!v.singleRec.Phoenix_Final_Finance_Approval__c==true}">
                <td>{!v.singleRec.Phoenix_Finance_Approval__c}</td>
                <td>{!v.singleRec.Phoenix_Finance_Comments__c}</td>
                <aura:set attribute="else">
                    <td></td>
                    <td></td>
                </aura:set>
            </aura:if>
            
            
            <aura:if isTrue="{!or(and(v.BidAprrovalStatus=='Draft',v.loggedInUserId == v.marketingApprover),and(v.BidAprrovalStatus=='Marketing',or(v.loggedInUserId == v.marketingApprover,v.loggedInUserId == v.delegatedUserId)))}">
                <td class="slds-text-align--right" ondblclick="{!c.inlineEditBatchNum}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.BatchNumEditMode == false}">
                            <span class="">{!v.singleRec.Phoenix_Batch_Number__c}</span>
                            
                            <button onclick="{!c.inlineEditBatchNum}" class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="0"  >
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <aura:set attribute="else">
                                <section  tabindex="0" class="slds-popover slds-popover_edit" role="dialog" style="position: absolute; top: 0px;width: max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputText class="slds-input inputWidth"
                                                              labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                              aura:id="BatchNum"
                                                              blur="{!c.closeBatchNum}"
                                                              change="{!c.onCISUChange}"                                                      
                                                              value="{!v.singleRec.Phoenix_Batch_Number__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                <td ondblclick="{!c.inlineEditExpiryDt}">
                    <span class="slds-grid slds-grid_align-spread">
                        <!-- show input and output section based on boolean flag -->
                        <aura:if isTrue="{!v.ExpiryDtEditMode == false}">
                            <span><lightning:formattedDateTime value="{!v.singleRec.Phoenix_Expiry_Date__c}" year="numeric" month="numeric" day="numeric" timeZone="UTC"></lightning:formattedDateTime></span>
                            <button onclick="{!c.inlineEditExpiryDt}" class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="0"  >
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <!-- Inline Edit Section in else case-->
                            <aura:set attribute="else">
                                <ui:inputDate class="testClass"
                                              aura:id="ExpiryDt"
                                              labelClass="{!v.sNo}"
                                              change="{!c.onCISUChange}"
                                              displayDatePicker="true"
                                              value="{!v.singleRec.Phoenix_Expiry_Date__c}"/>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">{!v.singleRec.Phoenix_Batch_Number__c}</td>
                    <td class="slds-text-align--right">{!v.singleRec.Phoenix_Expiry_Date__c}</td>
                </aura:set>
            </aura:if>
            
            
        </aura:if>
        
        <aura:if isTrue="{!v.bidType=='Platform PO OTB'}">
            
            <aura:if isTrue="{!and(or(v.BidAprrovalStatus=='Draft', and(or(v.BidAprrovalStatus=='Marketing',v.BidAprrovalStatus=='Marketing'),or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,v.isdeligationApprover))),v.singleRec.Phoenix_Marketing_Final_Approval__c!=true)}">
                
                <aura:if isTrue="{!v.otbDirIndirect=='Direct'}" >
                    <td class="slds-text-align--right" ondblclick="{!c.inlineEditProDirectUnits}">
                        <span class="slds-grid slds-grid_align-spread">
                            <aura:if isTrue="{!v.ProDirectUnitsEditMode == false}">
                                
                                <span  ><lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Direct_Selling_Unit__c}" maximumFractionDigits="0"/></span>
                                <button onclick="{!c.inlineEditProDirectUnits}" class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="0"  >
                                    <lightning:icon iconName="utility:edit" size="xx-small" />
                                </button>
                                <aura:set attribute="else">
                                    <section  tabindex="0" class="slds-popover slds-popover_edit" role="dialog" style="position: absolute; top: 0px;width: max-content;">
                                        <div class="slds-popover__body">
                                            <div class="slds-form-element slds-grid slds-wrap">
                                                <div class="slds-form-element__control slds-grow">
                                                    <ui:inputNumber class="slds-input inputWidth"
                                                                    labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                    aura:id="ProDirectUnits"
                                                                    blur="{!c.closeProDirectUnits}"
                                                                    change="{!c.onCISUChange}"                                                      
                                                                    value="{!v.singleRec.Phoenix_Proposed_Direct_Selling_Unit__c}" />
                                                </div>
                                            </div>
                                        </div>
                                        <span id="form-end" tabindex="0"></span>
                                    </section>
                                </aura:set>
                            </aura:if>
                        </span>
                    </td>
                    
                    <aura:set attribute="else">
                        <td></td>
                    </aura:set>
                </aura:if>
                <aura:set attribute="else">
                    <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Direct_Selling_Unit__c}"  minimumFractionDigits="0" maximumFractionDigits="0"/></td>
                </aura:set> 
            </aura:if>                           
            
            <aura:if isTrue="{!and(or(v.BidAprrovalStatus=='Draft', and(or(v.BidAprrovalStatus=='Marketing',v.BidAprrovalStatus=='Marketing'),or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,v.isdeligationApprover))),v.singleRec.Phoenix_Marketing_Final_Approval__c!=true)}">
                
                <aura:if isTrue="{!v.otbDirIndirect=='Indirect'}" >
                    <td class="slds-text-align--right" ondblclick="{!c.inlineEditProIndirectUnits}">
                        <span class="slds-grid slds-grid_align-spread">
                            <aura:if isTrue="{!v.ProIndirectUnitsEditMode == false}">
                                <span  ><lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Indirect_Selling_Unit__c}" maximumFractionDigits="0"/></span>
                                <button onclick="{!c.inlineEditProIndirectUnits}" class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="0"  >
                                    <lightning:icon iconName="utility:edit" size="xx-small" />
                                </button>
                                <aura:set attribute="else">
                                    <section  tabindex="0" class="slds-popover slds-popover_edit" role="dialog" style="position: absolute; top: 0px;width: max-content;">
                                        <div class="slds-popover__body">
                                            <div class="slds-form-element slds-grid slds-wrap">
                                                <div class="slds-form-element__control slds-grow">
                                                    <ui:inputNumber class="slds-input inputWidth"
                                                                    labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                    aura:id="ProIndirectUnits"
                                                                    blur="{!c.closeProIndirectUnits}"
                                                                    change="{!c.onCISUChange}"                                                      
                                                                    value="{!v.singleRec.Phoenix_Proposed_Indirect_Selling_Unit__c}" />
                                                </div>
                                            </div>
                                        </div>
                                        <span id="form-end" tabindex="0"></span>
                                    </section>
                                </aura:set>
                            </aura:if>
                        </span>
                    </td>
                    <aura:set attribute="else">
                        <td></td>
                    </aura:set>
                </aura:if>
                
                <aura:set attribute="else">
                    <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Indirect_Selling_Unit__c}"  minimumFractionDigits="0" maximumFractionDigits="0"/></td>
                    
                </aura:set>  
            </aura:if>
            
            <!-- <aura:if isTrue="{!and(and(v.singleRec.Phoenix_SCM_Approval_Y_N__c!='N- Not Approved',v.singleRec.Phoenix_SCM_Final_Approval__c==true),not(empty(v.singleRec.Phoenix_SCM_Approval_Y_N__c)))}">
                <td class="slds-text-align_right">
                    <div style="{!lessthan(v.singleRec.Phoenix_Total_SCM_Approved_Qty__c,v.singleRec.Phoenix_Final_Total_Selling_Unit__c)?'color:red':''}">
                        <lightning:formattedNumber value="{!v.singleRec.Phoenix_Total_SCM_Approved_Qty__c}" />
                    </div>
                </td>
                <aura:set attribute="else">
                    <td></td>
                </aura:set>
            </aura:if> -->
            
            <aura:if isTrue="{!or(v.BidAprrovalStatus=='Draft',and(and(v.BidAprrovalStatus=='Marketing',v.singleRec.Phoenix_Marketing_Final_Approval__c!=true) ,or(or(v.loggedInUserId == v.marketingApprover,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,v.isdeligationApprover)))))}">
                <td class="slds-text-align--right" ondblclick="{!c.inlineEditGuidancePrice}">
                    <span class="slds-grid slds-grid_align-spread">
                        <!-- show input and output section based on boolean flag -->
                        <aura:if isTrue="{!v.GDPEditMode == false}">
                            <span class="">
                                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Guidance_Price__c}"
                                                           style="currency" currencyCode="USD" /></span>
                            <button onclick="{!c.inlineEditGuidancePrice}"
                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                    tabindex="0">
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <!-- Inline Edit Section in else case-->
                            <aura:set attribute="else">
                                <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                         style="position: absolute; top: 0px;width: max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputCurrency class="slds-input inputWidth guidancePrice"
                                                                  labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                  aura:id="inputGDPId" blur="{!c.closeGDPBox}"
                                                                  change="{!c.onCISUChange}"
                                                                  value="{!v.singleRec.Phoenix_Guidance_Price__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>  
                
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <div>
                            <lightning:formattedNumber value="{!v.singleRec.Phoenix_Guidance_Price__c}" style="currency"
                                                       currencyCode="USD" />
                        </div>
                    </td>
                </aura:set>   
            </aura:if>
            
            <aura:if isTrue="{!or(v.isMarketingApprovePerson == v.loggedInUserName ,or(v.BidAprrovalStatus=='Draft',v.isdeligationApprover))}">
                
                <aura:if isTrue="{!v.otbDirIndirect=='Direct'}" >                    
                    <td class="slds-text-align--right" ondblclick="{!c.inlineEditPCBP}">
                        <span class="slds-grid slds-grid_align-spread">
                            <!-- show input and output section based on boolean flag -->
                            <aura:if isTrue="{!v.PCBPEditMode == false}">
                                
                                <a name="{!v.lineItemId}" onclick="{!c.openGoalseek}" title="Goal Seek">
                                    <lightning:icon iconName="utility:campaign" alternativeText="delete"
                                                    size="x-small" />
                                </a>
                                
                                <span class="slds-text-align_right">
                                    <div
                                         style="{!lessthan(v.directDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'color:red':''}">
                                        <lightning:formattedNumber
                                                                   title="{!lessthan(v.directDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'Direct Dead Net is less than Lowest Price/SKU':''}"
                                                                   value="{!v.singleRec.Phoenix_ProposedContractBidPriceMktng__c}"
                                                                   style="currency" currencyCode="USD" />
                                    </div>
                                    
                                </span>
                                <button onclick="{!c.inlineEditPCBP}"
                                        class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                        tabindex="0">
                                    <lightning:icon iconName="utility:edit" size="xx-small" />
                                </button>
                                <!-- Inline Edit Section in else case-->
                                <aura:set attribute="else">
                                    <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                             style="position: absolute; top: 0px;width:max-content;">
                                        <div class="slds-popover__body">
                                            <div class="slds-form-element slds-grid slds-wrap">
                                                <div class="slds-form-element__control slds-grow">
                                                    <ui:inputNumber class="slds-input inputWidth MarketingPrice"
                                                                    labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                    aura:id="inputPCBPId" blur="{!c.closePCBPBox}"
                                                                    change="{!c.onCISUChange}"
                                                                    value="{!v.singleRec.Phoenix_ProposedContractBidPriceMktng__c}" />
                                                </div>
                                            </div>
                                        </div>
                                        <span id="form-end" tabindex="0"></span>
                                    </section>
                                </aura:set>
                            </aura:if>
                        </span>
                    </td>
                    
                    <aura:set attribute="else">
                        <td></td>
                    </aura:set>                     
                </aura:if>
                
                
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <div
                             style="{!lessthan(v.directDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'color:red':''}">
                            <lightning:formattedNumber title="{!lessthan(v.directDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'Direct Dead Net is less than Lowest Price/SKU':''}"
                                                       value="{!v.singleRec.Phoenix_ProposedContractBidPriceMktng__c}" style="currency"
                                                       currencyCode="USD" />
                        </div>
                    </td>
                </aura:set>
                
            </aura:if>
            
            <aura:if isTrue="{!or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,or(v.BidAprrovalStatus=='Draft',v.isdeligationApprover))}">
                
                <aura:if isTrue="{!v.otbDirIndirect=='Indirect'}" >                    
                    <td class="slds-text-align--right" ondblclick="{!c.inlineEditWholeDiffPriInd}">
                        <span class="slds-grid slds-grid_align-spread">
                            <!-- show input and output section based on boolean flag -->
                            <aura:if isTrue="{!v.WDPIEditMode == false}">
                                <a name="{!v.lineItemId}" onclick="{!c.openGoalseekIndirect}" title="Goal Seek">
                                    <lightning:icon iconName="utility:campaign" alternativeText="delete"
                                                    size="x-small" />
                                </a>
                                <span class="slds-text-align_right">
                                    <div style="{!v.isIndirAccpetable ?'color:green':!v.isIndirNotAccpetable ?'color:red': ''}">
                                        <!-- style="{!lessthan(v.indirectDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'color:red':''}"> title="{!lessthan(v.indirectDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'Indirect Dead Net is less than Lowest Price/SKU':''}"-->
                                        <lightning:formattedNumber title="{!v.isIndirAccpetable ?'Indirect Dead Net Price is greater than LE+10 %(LE) (or) BASP+10% of BASP':!v.isIndirNotAccpetable ?'Indirect Dead Net Price is less than LE-10 %(LE) (or) BASP-10% of BASP': ''}"
                                                                   value="{!v.singleRec.Phoenix_Wholesaler_Diff_Price_Indirect__c}"
                                                                   style="currency" currencyCode="USD" />
                                    </div>
                                    
                                </span>
                                <button onclick="{!c.inlineEditWholeDiffPriInd}"
                                        class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                        tabindex="0">
                                    <lightning:icon iconName="utility:edit" size="xx-small" />
                                </button>
                                <!-- Inline Edit Section in else case-->
                                <aura:set attribute="else">
                                    <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                             style="position: absolute; top: 0px;width:max-content;">
                                        <div class="slds-popover__body">
                                            <div class="slds-form-element slds-grid slds-wrap">
                                                <div class="slds-form-element__control slds-grow">
                                                    <ui:inputCurrency class="slds-input inputWidth"
                                                                      labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                      aura:id="inputWDPIId" blur="{!c.closeWDPIBox}"
                                                                      change="{!c.onCISUChange}"
                                                                      value="{!v.singleRec.Phoenix_Wholesaler_Diff_Price_Indirect__c}" />
                                                </div>
                                            </div>
                                        </div>
                                        <span id="form-end" tabindex="0"></span>
                                    </section>
                                </aura:set>
                            </aura:if>
                        </span>
                    </td>
                    <aura:set attribute="else">
                        <td></td>
                    </aura:set>                            
                </aura:if>
                
                <aura:set attribute="else">
                    
                    <td class="slds-text-align--right">
                        <div style="{!v.isIndirAccpetable ?'color:green':!v.isIndirNotAccpetable ?'color:red': ''}">
                            <!-- style="{!lessthan(v.indirectDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'color:red':''}">title="{!lessthan(v.indirectDeadnet,v.singleRec.Phoenix_Lowest_Price_SKU__c)?'Indirect Dead Net is less than Lowest Price/SKU':''}"
                                                       -->
                            <lightning:formattedNumber title="{!v.isIndirAccpetable ?'Indirect Dead Net Price is greater than LE+10 %(LE) (or) BASP+10% of BASP':!v.isIndirNotAccpetable ?'Indirect Dead Net Price is less than LE-10 %(LE) (or) BASP-10% of BASP': ''}"
                                                       value="{!v.singleRec.Phoenix_Wholesaler_Diff_Price_Indirect__c}" style="currency"
                                                       currencyCode="USD" />
                        </div>
                    </td>
                </aura:set>
            </aura:if>
            
            <aura:if isTrue="{!or(v.BidAprrovalStatus=='Draft',or(v.BidAprrovalStatus=='Marketing',or(v.loggedInUserName==v.singleRec.Phoenix_Product_Director__c,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,or(v.isdeligationApprover)))))}">
                <td class="slds-text-align--right" ondblclick="{!c.inlineEditRebFeePercent}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.RebFeePercentEditMode == false}">
                            <span  ><lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Current_Rebate__c}" style="percent-fixed" maximumFractionDigits="0"/></span>
                            <button onclick="{!c.inlineEditRebFeePercent}" class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="0"  >
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <aura:set attribute="else">
                                <section  tabindex="0" class="slds-popover slds-popover_edit" role="dialog" style="position: absolute; top: 0px;width: max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputNumber class="slds-input inputWidth"
                                                                labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                aura:id="RebFeePercent"
                                                                blur="{!c.closeRebFeePercent}"
                                                                change="{!c.onCISUChange}"                                                      
                                                                value="{!v.singleRec.Phoenix_Proposed_Current_Rebate__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                
                <aura:set attribute="else">
                    
                    <td class="slds-text-align--right">
                        <div>
                            <lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Current_Rebate__c}" style="percent-fixed"
                                                       maximumFractionDigits="0" />
                        </div>
                    </td>
                </aura:set>          
            </aura:if>
            
            <td class="slds-text-align--right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Net_Price_after_Rebates_Terms__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            
            <aura:if isTrue="{!or(v.BidAprrovalStatus=='Draft',or(v.BidAprrovalStatus=='Marketing',or(v.loggedInUserName==v.singleRec.Phoenix_Product_Director__c,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,or(v.isdeligationApprover)))))}">
                
                <td class="slds-text-align--right" ondblclick="{!c.inlineEditPURDollar}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.PURDollarEditMode == false}">
                            <span  ><lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Per_Unit_Rebate__c}" style="currency" currencyCode="USD" maximumFractionDigits="0"/></span>
                            <button onclick="{!c.inlineEditPURDollar}" class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="0"  >
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <aura:set attribute="else">
                                <section  tabindex="0" class="slds-popover slds-popover_edit" role="dialog" style="position: absolute; top: 0px;width: max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputNumber class="slds-input inputWidth"
                                                                labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                aura:id="PURDollar"
                                                                blur="{!c.closePURDollar}"
                                                                change="{!c.onCISUChange}"                                                      
                                                                value="{!v.singleRec.Phoenix_Proposed_Per_Unit_Rebate__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                <aura:set attribute="else">
                    
                    <td class="slds-text-align--right">
                        <div>
                            <lightning:formattedNumber value="{!v.singleRec.Phoenix_Proposed_Per_Unit_Rebate__c}" style="currency"
                                                       currencyCode="USD" maximumFractionDigits="0" />
                        </div>
                        
                    </td>
                    
                </aura:set>      
                
            </aura:if>
            
            
            
            <td class="slds-text-align--right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Direct_CD__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            <aura:if isTrue="{!v.otbDirIndirect == 'Direct'}">
                <td class="slds-text-align--right">
                    <div style="{!v.isAccpetable ?'color:green':!v.isNotAccpetable ?'color:red': ''}">
                        <lightning:formattedNumber title="{!v.isAccpetable ?'Direct Dead Net Price is greater than LE+10 %(LE) (or) BASP+10% of BASP':!v.isNotAccpetable ?'Direct Dead Net Price is less than LE-10 %(LE) (or) BASP-10% of BASP': ''}"
                                                   value="{!v.singleRec.Phoenix_Direct_Dead_Net__c}"
                                                   style="currency" currencyCode="USD" />
                        
                    </div>   
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="currency"
                                                   currencyCode="USD" maximumFractionDigits="2" />
                    </td>
                    
                </aura:set>
            </aura:if>
            
            
            <aura:if isTrue="{!v.otbDirIndirect=='Direct'}" >
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Direct_TP_In__c}" style="currency"
                                               currencyCode="USD" maximumFractionDigits="2" />
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="currency"
                                                   currencyCode="USD" maximumFractionDigits="2" />
                    </td>
                    
                </aura:set>     
                
            </aura:if>    
            <aura:if isTrue="{!v.otbDirIndirect=='Direct'}" >
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Direct_TP__c}" style="percent-fixed"
                                               maximumFractionDigits="2" />
                </td>  
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="percent-fixed"
                                                   currencyCode="USD" maximumFractionDigits="2" />
                    </td>
                    
                </aura:set>     
            </aura:if>
            
            <aura:if isTrue="{!v.otbDirIndirect=='Direct'}" >
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Proposed_Net_Sales_Direct__c}" style="currency"
                                               currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="currency"
                                                   currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                    </td>
                    
                </aura:set>     
            </aura:if>
            
            <aura:if isTrue="{!v.otbDirIndirect=='Direct'}" >
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Proposed_TPT_Direct__c}" style="currency"
                                               currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="currency"
                                                   currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                    </td>
                    
                </aura:set>     
            </aura:if>
            
            <aura:if isTrue="{!v.otbDirIndirect=='Direct'}" >
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Proposed_TPT_Per_Direct__c}" style="percent-fixed"
                                               maximumFractionDigits="2" />
                </td> 
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="percent-fixed"
                                                   maximumFractionDigits="2" />
                    </td> 
                </aura:set>     
            </aura:if>
            
            
            <aura:if isTrue="{!or(v.BidAprrovalStatus=='Draft',or(v.BidAprrovalStatus=='Marketing',or(v.isMarketingApprovePerson==v.singleRec.Phoenix_Product_Director__c,or(v.deligatedUserName==v.singleRec.Phoenix_Product_Director__c,or(v.isdeligationApprover)))))}">
                <aura:if isTrue="{!v.otbDirIndirect=='Indirect'}" >  
                    <td class="slds-text-align--right" ondblclick="{!c.inlineEditCMFeePer}">
                        <span class="slds-grid slds-grid_align-spread">
                            <aura:if isTrue="{!v.CMFeePerEditMode == false}">
                                <span  ><lightning:formattedNumber value="{!v.singleRec.Phoenix_Contract_Mngment_Fee_Wholesaler__c}" style="percent-fixed" maximumFractionDigits="2"/></span>
                                <button onclick="{!c.inlineEditCMFeePer}" class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="0"  >
                                    <lightning:icon iconName="utility:edit" size="xx-small" />
                                </button>
                                <aura:set attribute="else">
                                    <section  tabindex="0" class="slds-popover slds-popover_edit" role="dialog" style="position: absolute; top: 0px;width: max-content;">
                                        <div class="slds-popover__body">
                                            <div class="slds-form-element slds-grid slds-wrap">
                                                <div class="slds-form-element__control slds-grow">
                                                    <ui:inputNumber class="slds-input inputWidth"
                                                                    labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                                    aura:id="CMFeePer"
                                                                    blur="{!c.closeCMFeePer}"
                                                                    change="{!c.onCISUChange}"                                                      
                                                                    value="{!v.singleRec.Phoenix_Contract_Mngment_Fee_Wholesaler__c}" />
                                                </div>
                                            </div>
                                        </div>
                                        <span id="form-end" tabindex="0"></span>
                                    </section>
                                </aura:set>
                            </aura:if>
                        </span>
                    </td>
                    <aura:set attribute="else">
                        <td class="slds-text-align--right">
                            <lightning:formattedNumber value="{!v.singleRec.Phoenix_Contract_Mngment_Fee_Wholesaler__c}"  style="percent-fixed"
                                                       maximumFractionDigits="2" />
                        </td>
                        
                    </aura:set>    
                </aura:if>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="{!v.singleRec.Phoenix_Contract_Mngment_Fee_Wholesaler__c}"  style="percent-fixed"
                                                   maximumFractionDigits="2" />
                    </td>
                    
                </aura:set>    
                
            </aura:if>
            
            
            <td class="slds-text-align--right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Contract_Mngmnt_Fee_Wholesaler__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            
            <aura:if isTrue="{!v.otbDirIndirect == 'Indirect'}">
                <td class="slds-text-align--right">
                    <div style="{!v.isIndirAccpetable ?'color:green':!v.isIndirNotAccpetable ?'color:red': ''}">
                        <lightning:formattedNumber title="{!v.isIndirAccpetable ?'Indirect Dead Net Price is greater than LE+10 %(LE) (or) BASP+10% of BASP':!v.isIndirNotAccpetable ?'Indirect Dead Net Price is less than LE-10 %(LE) (or) BASP-10% of BASP': ''}"
                                                   value="{!v.singleRec.Phoenix_Indirect_Dead_Net__c}"
                                                   style="currency" currencyCode="USD" />
                    </div>
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="currency"
                                                   currencyCode="USD" maximumFractionDigits="2" />
                    </td>
                    
                </aura:set>
            </aura:if>
            
            
            <aura:if isTrue="{!v.otbDirIndirect=='Indirect'}" >
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Indirect_TP__c}" style="currency"
                                               currencyCode="USD" maximumFractionDigits="2" />
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="currency"
                                                   currencyCode="USD" maximumFractionDigits="2" />
                    </td>
                    
                </aura:set>     
                
            </aura:if>    
            <aura:if isTrue="{!v.otbDirIndirect=='Indirect'}" >
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Phoenix_Indirect_TP__c}" style="percent-fixed"
                                               maximumFractionDigits="2" />
                </td>  
                
                
                
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Proposed_Net_Sales_Indirect__c}" style="currency"
                                               currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                
                
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Proposed_TPT_Indirect__c}" style="currency"
                                               currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.singleRec.Proposed_TPT_Per_Indirect__c}" style="percent-fixed"
                                               maximumFractionDigits="2" />
                </td>
                
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="percent-fixed"
                                                   currencyCode="USD" maximumFractionDigits="2" />
                    </td>
                    
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0" style="currency"
                                                   currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                    </td>
                    
                    
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0" style="currency"
                                                   currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0" />
                    </td>
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="percent-fixed"
                                                   maximumFractionDigits="2" />
                    </td>   
                    
                    
                </aura:set>     
                
            </aura:if>
            <td class="slds-text-align--right">
                <lightning:formattedNumber value="{!v.singleRec.Phoenix_Lowest_Price_SKU__c}" style="currency"
                                           currencyCode="USD" maximumFractionDigits="2" />
            </td>
            
            <aura:if isTrue="{!v.BidAprrovalStatus=='Draft'}">
                
                <td ondblclick="{!c.inlineEditMarketingNotes}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.MarkNotesEditMode == false}">
                            <span class="">{!v.singleRec.Phoenix_Marketing_Notes__c}</span>
                            <button onclick="{!c.inlineEditMarketingNotes}"
                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                    tabindex="0">
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <aura:set attribute="else">
                                <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                         style="position: absolute; top: 0px;width:max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputText class="slds-input inputWidth"
                                                              labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                              aura:id="inputMarketNotesId" blur="{!c.closeMarketNotesBox}"
                                                              change="{!c.onCISUChange}"
                                                              value="{!v.singleRec.Phoenix_Marketing_Notes__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                
                <aura:set attribute="else">
                    <td>{!v.singleRec.Phoenix_Marketing_Notes__c}</td>
                </aura:set>
            </aura:if>
            
            <aura:if isTrue="{!and(and(v.isContractsApprovePerson==true,v.BidAprrovalStatus=='Contracts'),v.loggedInUserName==v.singleRec.Phoenix_Bid__r.Phoenix_Customer__r.Phoenix_Contracts_Approver__r.Name)}">
                <td ondblclick="{!c.inlineEditContractApproval}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.ContractApprovalEditMode == false}">
                            <span class="">{!v.singleRec.Phoenix_Contract_Approval__c}</span>
                            <button onclick="{!c.inlineEditContractApproval}"
                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                    tabindex="0">
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <aura:set attribute="else">
                                <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                         style="position: absolute; top: 0px;width:max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <lightning:select name="ContractApproval"
                                                                  aura:id="inputContractApprovalId"
                                                                  onblur="{!c.closeContractApprovalBox}"
                                                                  onchange="{!c.onCISUChange}">
                                                    <option value="{!v.singleRec.Phoenix_Contract_Approval__c}">
                                                        {!v.singleRec.Phoenix_Contract_Approval__c}</option>
                                                    <aura:if
                                                             isTrue="{!(v.singleRec.Phoenix_Contract_Approval__c != 'Approved')}">
                                                        <option value="Approved">Approved</option>
                                                    </aura:if>
                                                    <aura:if
                                                             isTrue="{!(v.singleRec.Phoenix_Contract_Approval__c != 'Not Approved')}">
                                                        <option value="Not Approved">Not Approved</option>
                                                    </aura:if>
                                                </lightning:select>
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                <td ondblclick="{!c.inlineEditContractComments}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.ContractCommentsEditMode == false}">
                            <span class="">{!v.singleRec.Phoenix_Contract_Comments__c}</span>
                            <button onclick="{!c.inlineEditContractComments}"
                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small"
                                    tabindex="0">
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <aura:set attribute="else">
                                <section tabindex="0" class="slds-popover slds-popover_edit" role="dialog"
                                         style="position: absolute; top: 0px;width:max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputText class="slds-input inputWidth"
                                                              labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                              aura:id="inputContractCommentsId"
                                                              blur="{!c.closeContractCommentslBox}" change="{!c.onCISUChange}"
                                                              value="{!v.singleRec.Phoenix_Contract_Comments__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                <aura:set attribute="else">
                    <td> {!v.singleRec.Phoenix_Contract_Approval__c}</td>
                    <td>{!v.singleRec.Phoenix_Contract_Comments__c}</td>
                </aura:set>
            </aura:if>
            <aura:if isTrue="{!v.BidAprrovalStatus=='Draft'}">
                <td class="slds-text-align--right" ondblclick="{!c.inlineEditBatchNum}">
                    <span class="slds-grid slds-grid_align-spread">
                        <aura:if isTrue="{!v.BatchNumEditMode == false}">
                            <span class="">{!v.singleRec.Phoenix_Batch_Number__c}</span>
                            
                            <button onclick="{!c.inlineEditBatchNum}" class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="0"  >
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <aura:set attribute="else">
                                <section  tabindex="0" class="slds-popover slds-popover_edit" role="dialog" style="position: absolute; top: 0px;width: max-content;">
                                    <div class="slds-popover__body">
                                        <div class="slds-form-element slds-grid slds-wrap">
                                            <div class="slds-form-element__control slds-grow">
                                                <ui:inputText class="slds-input inputWidth"
                                                              labelClass="slds-form-element__label slds-form-element__label_edit slds-no-flex"
                                                              aura:id="BatchNum"
                                                              blur="{!c.closeBatchNum}"
                                                              change="{!c.onCISUChange}"                                                      
                                                              value="{!v.singleRec.Phoenix_Batch_Number__c}" />
                                            </div>
                                        </div>
                                    </div>
                                    <span id="form-end" tabindex="0"></span>
                                </section>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                <td ondblclick="{!c.inlineEditExpiryDt}">
                    <span class="slds-grid slds-grid_align-spread">
                        <!-- show input and output section based on boolean flag -->
                        <aura:if isTrue="{!v.ExpiryDtEditMode == false}">
                            <span><lightning:formattedDateTime value="{!v.singleRec.Phoenix_Expiry_Date__c}" year="numeric" month="numeric" day="numeric" timeZone="UTC"></lightning:formattedDateTime></span>
                            <button onclick="{!c.inlineEditExpiryDt}" class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="0"  >
                                <lightning:icon iconName="utility:edit" size="xx-small" />
                            </button>
                            <!-- Inline Edit Section in else case-->
                            <aura:set attribute="else">
                                <ui:inputDate class="testClass"
                                              aura:id="ExpiryDt"
                                              labelClass="{!v.sNo}"
                                              change="{!c.onCISUChange}"
                                              displayDatePicker="true"
                                              value="{!v.singleRec.Phoenix_Expiry_Date__c}"/>
                            </aura:set>
                        </aura:if>
                    </span>
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">{!v.singleRec.Phoenix_Batch_Number__c}</td>
                    <td class="slds-text-align--right">{!v.singleRec.Phoenix_Expiry_Date__c}</td>
                </aura:set>
            </aura:if>
            
        </aura:if>
        <td class="slds-text-align--left">{!v.singleRec.Primary_Exclusion_Customers__c}</td>
        <td class="slds-text-align--left">{!v.singleRec.Secondary_Backup_Exclusion_Customers__c}</td>
        <td class="slds-text-align--left">{!v.singleRec.Final_Exclusion_Customers__c}</td>
        <!--Analytics Components related Icons START-->
        <td>
            <lightning:button variant="base" label="BH" title="BH" onclick="{!c.displayBidHist}" name="{!v.singleRec.Id}"/>
            <lightning:button variant="base" label="NH" title="NH" onclick="{!c.displayProdNPRHist}" name="{!v.singleRec.Id}"/>
            <lightning:button variant="base" label="MS" title="MS" onclick="{!c.displayIMSMarketShare}" name="{!v.singleRec.Id}"/>
            <lightning:button variant="base" label="PT" title="PT" onclick="{!c.displayHistoricalPricing}" name="{!v.singleRec.Id}"/>
            <lightning:button variant="base" label="FR" title="FR" onclick="{!c.displayFutureRecords}"
                              name="{!v.singleRec.Id}" />
            <!--Analytics Components related Icons END-->
        </td>    
    </tr>
    <aura:if isTrue="{!v.sNo==v.ItemsLength}">
        <tr>
            <th scope="row"></th>
            <th scope="row"></th>
            <th scope="row"></th>
            <th scope="row"></th>
            <th scope="row"></th>
            <th scope="row">Total</th>
            <aura:if isTrue="{!v.singleRec.Phoenix_Is_Re_Bid_Line_Item__c}">
                <td></td>
                <td></td>
            </aura:if>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <aura:if isTrue="{!v.otbDirIndirect == 'Direct'}">
                <td class="slds-text-align_right">
                    <lightning:formattedNumber value="{!v.CDSUTotal}"  minimumFractionDigits="0" maximumFractionDigits="0"/>
                </td>
                <aura:set attribute="else">
                    <td></td>
                </aura:set>
            </aura:if>
            <aura:if isTrue="{!v.otbDirIndirect == 'Indirect'}">
                
                <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.CISUTotal}"  minimumFractionDigits="0" maximumFractionDigits="0"/></td>
                
                <aura:set attribute="else">
                    <td></td>
                </aura:set>
            </aura:if>
            
            <!-- <aura:if isTrue="{!and(and(v.singleRec.Phoenix_SCM_Approval_Y_N__c!='N- Not Approved',v.singleRec.Phoenix_SCM_Final_Approval__c==true),not(empty(v.singleRec.Phoenix_SCM_Approval_Y_N__c)))}">
                <td class="slds-text-align_right"><lightning:formattedNumber value="{!v.scmQty}"  minimumFractionDigits="0" maximumFractionDigits="0"/></td>
                <aura:set attribute="else">
                    <td></td>
                </aura:set>  
                
            </aura:if> -->
            
            <td></td>
            <aura:if isTrue="{!v.bidType=='Platform OTB'}">
                <td></td>
                <td></td>
            </aura:if>
            
            
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
           
            <aura:if isTrue="{!v.otbDirIndirect == 'Direct'}">
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.netSalesIntTotal}" style="currency" currencyCode="USD"
                                               minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.proTPTDir}" style="currency" currencyCode="USD"
                                               minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.proTPTInd}" style="percent-fixed" 
                                               maximumFractionDigits="2" minimumFractionDigits="2"/>
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0" style="currency" currencyCode="USD"
                                                   minimumFractionDigits="0" maximumFractionDigits="0" />
                    </td>
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0" style="currency" currencyCode="USD"
                                                   minimumFractionDigits="0" maximumFractionDigits="0" />
                    </td>
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="percent-fixed" 
                                                   maximumFractionDigits="2" minimumFractionDigits="2"/>
                    </td>
                </aura:set>
            </aura:if>
            
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            
            
            <aura:if isTrue="{!v.otbDirIndirect == 'Indirect'}">
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.proTPTPerIndir}" style="currency"
                                               minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.intDeadNetTotal}" style="currency" currencyCode="USD" 
                                               minimumFractionDigits="0" maximumFractionDigits="0" />
                </td>
                <td class="slds-text-align--right">
                    <lightning:formattedNumber value="{!v.BlendedTPMargin}" style="percent-fixed"
                                               maximumFractionDigits="2" minimumFractionDigits="2"/>
                </td>
                <aura:set attribute="else">
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0" style="currency" currencyCode="USD"
                                                   minimumFractionDigits="0" maximumFractionDigits="0" />
                    </td>
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0" style="currency" currencyCode="USD"
                                                   minimumFractionDigits="0" maximumFractionDigits="0" />
                    </td>
                    <td class="slds-text-align--right">
                        <lightning:formattedNumber value="0.00" style="percent-fixed" 
                                                   maximumFractionDigits="2" minimumFractionDigits="2"/>
                    </td>
                </aura:set>   
                
            </aura:if>
            
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <aura:if isTrue="{!v.bidType=='Platform PO OTB'}">
                <td></td>
                <td></td>
            </aura:if>
            
            <aura:if isTrue="{!v.bidType=='Platform PO OTB'}">
                <td></td>
            </aura:if>
            <td></td>
            <td></td>
            <td></td>
            
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </aura:if>
    
    
</aura:component>