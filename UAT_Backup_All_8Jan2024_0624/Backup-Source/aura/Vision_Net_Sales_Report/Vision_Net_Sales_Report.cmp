<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId" access="global" >
    <aura:handler name="init" value="{!this}" action = "{!c.initRecords}"/>
    <aura:attribute name="loaded" type="Boolean" />
    <aura:attribute name="options" type="List" default="[
                                                        {'label': 'Last 12 Months Vs. Previous 12 Months', 'value': 'last12monthsvsprevious12months'},
                                                        {'label': 'Last Quarter Vs. Previous Quarter', 'value': 'lastquartervspreviousquarter'},
                                                        {'label': 'FYTD Vs. Previous FYTD', 'value': 'fytdvspreviousfytd'},
                                                        ]"/>
    <aura:attribute name="isRxChecked" type="boolean" default="true" />
    <aura:attribute name="isSRxChecked" type="boolean" default="true" />
    <aura:attribute name="isOtcChecked" type="boolean" default="true" />
    <aura:attribute name="isINTChecked" type="boolean" default="false" />   
    
    <div class="slds-box" style="padding:10px;background-color:white;">
        <div class="slds-grid" style="padding-top: 0px;">
            <div class="slds-col slds-size_1-of-4" style="padding-top: 0px;">
                <div class="slds-grid" >
                    <div class="slds-col slds-size_1-of-3 slds-grid slds-gutters">
                          <div class="slds-col">
                        <b><lightning:input aura:id="RX" type="toggle" label="Rx" onchange="{!c.searchSrxRxOttc}" checked="{!v.isRxChecked}" messageToggleActive="" messageToggleInactive=""/></b>
                        </div>
                          <div class="slds-col">
                              <b><p style ="color:#3E3E3C;font-size: 12px;" ></p></b>
                        </div>
                        </div>
                    <div class="slds-col slds-size_1-of-3 slds-grid slds-gutters">
                        <div class="slds-col">
                       		 <b><lightning:input aura:id="SRX" type="toggle" label="SRx" onchange="{!c.searchSrxRxOttc}" checked="{!v.isSRxChecked}" messageToggleActive="" messageToggleInactive="" /></b>
                        </div>
                         <div class="slds-col">
                              <b><p style ="color:#3E3E3C;font-size: 12px;" ></p></b>
                        </div>
                     </div>
                    <div class="slds-col slds-size_1-of-3 slds-grid slds-gutters">
                        <div class="slds-col">
                        	<b><lightning:input aura:id="OTC" type="toggle" label="OTC" onchange="{!c.searchSrxRxOttc}" checked="{!v.isOtcChecked}" messageToggleActive="" messageToggleInactive="" /></b>
                        </div>
                        <div class="slds-col">
                            <b><p style ="color:#3E3E3C;font-size: 12px;" ></p></b>
                        </div>
                       </div>
                </div>
            </div> 
            <div class="slds-size_3-of-4">
                <div class="slds-grid slds-gutters" id="dateSection" style="padding-right: 0px;">
                    <div class="slds-col slds-size_1-of-4"></div>
                    <div class="slds-col slds-size_1-of-4" style="font-style: italic;">
                        <span class="slds-p-left_medium"><b>GCP Update Date:&nbsp;</b></span> <lightning:formattedDateTime value="{!v.GCPUpdateDate}"/>
                    </div>
                    <div class="slds-col slds-size_1-of-4" style="font-style: italic;">
                        <span class="slds-p-left_medium"><b>Vision Update Date:&nbsp;</b></span> <lightning:formattedDateTime value="{!v.VisionUpdateDate}"/>
                    </div>
                    <div class="slds-col slds-size_1-of-4" style="font-style: italic;">
                        <span class="slds-p-left_medium"><b>Data Available till:&nbsp;</b></span> <lightning:formattedDateTime value="{!v.DataAvailableTill}"/>
                    </div>
                </div>  
            </div>
        </div><br></br>
        <div class="slds-grid slds-gutters">
            <div class="slds-col slds-size_1-of-4" style="padding-top: 18px">
              <span onkeypress="{}">
               <lightning:input value="{!v.searchText}" type="search" title="Search by Customer Name"
                                         variant="label-hidden" placeholder="Search by Customer Name"
                                         aura:id="SearchBox" 
                                         />
                </span>
            </div>
            <div class="slds-col slds-size_1-of-4" style="padding-top: 18px">
                <lightning:button label="Search" title="Neutral action" onclick="{! c.onsearch }"/>
            </div>
            <div class="slds-grid slds-col slds-size_1-of-4" style="padding-top: 18px">
                <div>
                   <span>
                <b><lightning:input aura:id="INT/EXT" type="toggle" label="INT" onchange="{!c.searchIntExt}" checked="{!v.isINTChecked}" messageToggleActive="" messageToggleInactive=""/></b>
                   </span>
                </div>&nbsp;
                <div class="slds-p-top_xx-small">
                    <span>
                       <b><p style ="color:#3E3E3C;font-size: 12px;" >EXT</p></b> 
                    </span>
                </div>
            </div>
            
            <div class="slds-col slds-size_1-of-4" style="padding-bottom: 0px">
                 <div >
                <span>
                     <lightning:combobox name="comparison"  label="Analysis Based On" value="last12monthsvsprevious12months" placeholder="Select Comparison" options="{! v.options }" onchange="{! c.handleChange }"/>
                </span>
                </div>
            </div>
        </div>
        <aura:if isTrue="{! v.loaded }">
            <center>
                <section role="dialog" aura:id="modalBlockUI" tabindex="-1" aria-labelledby="modal-heading-01"
                         aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">  
                    <div class="slds-modal__container" style="background-Color: transparent; border: 0;">  
                        <div class="slds-modal__content slds-p-around_medium modalShadowRemove" style="background-Color: transparent; border: 0;">  
                            <img src="{!$Resource.LoadingProgress}" />  
                        </div>  
                    </div>  
                </section>   
                <div class="slds-backdrop slds-backdrop-open" aura:id="customModal-Back"></div>
            </center>
            
        </aura:if>
        <aura:if isTrue="{!v.noData}">
            <lightning:card >
                <center>
                    <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_info slds-m-left_xx-large slds-m-right_xx-large" role="alert" style="width:50%;">
                        <span class="slds-icon_container slds-m-right_x-small" title="Please add line items to view the table">
                            <lightning:icon iconName="utility:info" alternativeText="info" size="x-small" variant="inverse"/>
                        </span>
                        <h2>No data found.</h2>
                    </div>
                </center>
            </lightning:card>
        </aura:if>
        <div aura:id="mainDiv" style="height:430px;overflow:auto;margin-top:10px;border-radius: 0.25rem;border: 2px solid #cfcfcf;">
            <div role="region" aria-labelledby="HeadersCol" tabindex="0" class="rowheaders">
                <table aura:id="LineTable" class="maintable fixedtable slds-table slds-no-row-hover slds-table_bordered slds-table_col-bordered">
                    <thead class="headerOfTable">
                        <tr>
                            <aura:if isTrue = "{!v.isINTChecked}">
                                <th colspan="2" class="slds-truncate slds-cell-wrap slds-text-align_left" style="text-transform: uppercase; font-size: 15px;">{!v.responseList[0].currentUserName} ({!v.countOfAccountsOwned})</th>
                                <aura:set attribute="else">
                                    <th colspan="2" class="slds-truncate slds-cell-wrap slds-text-align_left" style="text-transform: uppercase; font-size: 15px;">{!v.responseList[0].currentUserName} ({!v.countOfAccountsOwned})</th>
                                </aura:set>
                            </aura:if>
                            <th colspan="16" style="text-align:center;"> 
                                <div class="slds-grid">
                                    <aura:if isTrue = "{!v.isINTChecked}">
                                        <div class="slds-col slds-size_11-of-12 slds-text-align_center" style="font-size: 15px;">
                                            NET SALES &amp; QUANTITY ANALYSIS
                                        </div>
                                        <aura:set attribute="else">
                                            <div class="slds-col slds-size_11-of-12 slds-text-align_center" style="font-size: 15px;">
                                                NET SALES, QUANTITY &amp; TPT ANALYSIS
                                            </div>
                                        </aura:set>
                                    </aura:if>
                                    <div class="slds-col slds-size_1-of-12 slds-text-align_right">
                                        <lightning:buttonIcon class ="slds-icon_small" iconName="utility:download" 
                                                              onclick="{!c.downloadCsv}"/>
                                    </div>                                                
                                    <!--<lightning:button label="Export" title="Export" onclick="{!c.downloadCsv}"/> product_consumed_state-->
                                </div>
                            </th>
                        </tr>
                        <tr> 
                            <!--<th></th>-->
                            <th rowspan="2" style = "width:2%" class="slds-text-align_center">#</th>
                            <th rowspan="2" style = "width:20%"  class="slds-truncate slds-cell-wrap slds-text-align_left">Customer Account</th>
                            <aura:if isTrue = "{!v.isINTChecked}">
                                <th rowspan="2" style = "width:2%" class="slds-truncate slds-cell-wrap slds-text-align_center">Q</th>
                                <th rowspan="2" style = "width:2%" class="slds-truncate slds-cell-wrap slds-text-align_center">S</th>
                                <aura:set attribute ="else">
                                    <th rowspan="2" style = "width:2%" class="slds-truncate slds-cell-wrap slds-text-align_center">Q</th>
                                    <th rowspan="2" style = "width:2%" class="slds-truncate slds-cell-wrap slds-text-align_center">S</th>
                                    <th rowspan="2" style = "width:2%" class="slds-truncate slds-cell-wrap slds-text-align_center">T</th>
                                    <th rowspan="2" style = "width:2%" class="slds-truncate slds-cell-wrap slds-text-align_center">%</th>
                                </aura:set>
                            </aura:if>
                            
                            <aura:if isTrue ="{!v.isINTChecked}">
                                <th colspan="3" class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #b6a6ed;color: white;border-color: #bfbbba; color: black; font-size: 14px;">Quantity (EU)</th>
                                <th colspan="3" class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #abc1f5;color: white;border-color: #bfbbba; color: black; font-size: 14px;">Sales ($)</th>
                                <aura:set attribute ="else">
                                    <th colspan="3" class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #b6a6ed;color: white;border-color: #bfbbba; color: black; font-size: 14px;">Quantity (EU)</th>
                                    <th colspan="3" class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #abc1f5;color: white;border-color: #bfbbba; color: black; font-size: 14px;">Sales ($)</th>
                                    <th colspan="3" class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #f0aabb;color: white;border-color: #bfbbba; color: black; font-size: 14px;">TPT ($)</th>
                                    <th colspan="3" class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #fcfbd9;border-color: #bfbbba; font-size: 14px;">TPT %</th>
                                </aura:set>
                            </aura:if>
                        </tr>
                        <tr>
                            <aura:if isTrue = "{!v.isINTChecked}">
                                <th class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #947aeb;color: white;border-color: #bfbbba;">
                                    <span onclick="{!c.sortByDrlPreviousUnits}">
                                        <aura:if isTrue="{!and(v.isAsc,v.filterName == 'Previous Units')}">
                                            <div class="slds-icon_container" style="cursor: pointer;">  
                                                {!v.headers.two}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowup" 
                                                                                      size="xx-small" 
                                                                                      alternativeText="sort arrow up"/>  
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{!and(!v.isAsc,v.filterName == 'Previous Units')}">
                                            <div class="slds-icon_container" style="cursor: pointer;">  
                                                {!v.headers.two}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowdown" 
                                                                                      size="xx-small" 
                                                                                      alternativeText="sort arrow up"/>  
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{!v.filterName != 'Previous Units'}">
                                            <div style="cursor: pointer;">{!v.headers.two}</div>
                                        </aura:if>
                                    </span>
                                </th>
                                <th class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #947aeb;color: white;border-color: #bfbbba;">
                                    <span onclick="{!c.sortByDrlRecentUnits}">
                                        <aura:if isTrue="{!and(v.isAsc,v.filterName == 'Recent Units')}">
                                            <div class="slds-icon_container" style="cursor: pointer;">  
                                                {!v.headers.one}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowup" 
                                                                                      size="xx-small" 
                                                                                      alternativeText="sort arrow up"/>  
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{!and(!v.isAsc,v.filterName == 'Recent Units')}">
                                            <div class="slds-icon_container" style="cursor: pointer;">  
                                                {!v.headers.one}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowdown" 
                                                                                      size="xx-small" 
                                                                                      alternativeText="sort arrow up"/>  
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{!v.filterName != 'Recent Units'}">
                                            <div style="cursor: pointer;">{!v.headers.one}</div>
                                        </aura:if>
                                    </span>
                                </th>
                                <th class="slds-truncate slds-cell-wrap zindexPrd slds-text-align_center" style="background-color: #947aeb;color: white;border-color: #bfbbba;" aura:id="zvaluePrd">Trending</th>
                                <th class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #7a9ceb;color: white;border-color: #bfbbba;">
                                    <span onclick="{!c.sortByDrlPreviousSales}">
                                        <aura:if isTrue="{!and(v.isAsc,v.filterName == 'Previous Sales')}">
                                            <div class="slds-icon_container" style="cursor: pointer;">  
                                                {!v.headers.two}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowup" 
                                                                                      size="xx-small" 
                                                                                      alternativeText="sort arrow up"/>  
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{!and(!v.isAsc,v.filterName == 'Previous Sales')}">
                                            <div class="slds-icon_container" style="cursor: pointer;">  
                                                {!v.headers.two}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowdown" 
                                                                                      size="xx-small" 
                                                                                      alternativeText="sort arrow up"/>  
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{!v.filterName != 'Previous Sales'}">
                                            <div style="cursor: pointer;">{!v.headers.two}</div>
                                        </aura:if>
                                    </span>
                                </th>
                                <th class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #7a9ceb;color: white;border-color: #bfbbba;">
                                    <span onclick="{!c.sortByDrlRecentSales}">
                                        <aura:if isTrue="{!and(v.isAsc,v.filterName == 'Recent Sales')}">
                                            <div class="slds-icon_container" style="cursor: pointer;">  
                                                {!v.headers.one}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowup" 
                                                                                      size="xx-small" 
                                                                                      alternativeText="sort arrow up"/>  
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{!and(!v.isAsc,v.filterName == 'Recent Sales')}">
                                            <div class="slds-icon_container" style="cursor: pointer;">  
                                                {!v.headers.one}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowdown" 
                                                                                      size="xx-small" 
                                                                                      alternativeText="sort arrow up"/>  
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{!v.filterName != 'Recent Sales'}">
                                            <div style="cursor: pointer;">{!v.headers.one}</div>
                                        </aura:if>
                                    </span>
                                </th>
                                <th class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #7a9ceb;color: white;border-color: #bfbbba;">Trending</th>
                                <aura:set attribute = "else">
                                    <th class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #947aeb;color: white;border-color: #bfbbba;">
                                        <span onclick="{!c.sortByDrlPreviousUnits}">
                                            <aura:if isTrue="{!and(v.isAsc,v.filterName == 'Previous Units')}">
                                                <div class="slds-icon_container" style="cursor: pointer;">  
                                                    {!v.headers.two}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowup" 
                                                                                          size="xx-small" 
                                                                                          alternativeText="sort arrow up"/>  
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{!and(!v.isAsc,v.filterName == 'Previous Units')}">
                                                <div class="slds-icon_container" style="cursor: pointer;">  
                                                    {!v.headers.two}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowdown" 
                                                                                          size="xx-small" 
                                                                                          alternativeText="sort arrow up"/>  
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{!v.filterName != 'Previous Units'}">
                                                <div style="cursor: pointer;">{!v.headers.two}</div>
                                            </aura:if>
                                        </span>
                                    </th>
                                    <th class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #947aeb;color: white;border-color: #bfbbba;">
                                        <span onclick="{!c.sortByDrlRecentUnits}">
                                            <aura:if isTrue="{!and(v.isAsc,v.filterName == 'Recent Units')}">
                                                <div class="slds-icon_container" style="cursor: pointer;">  
                                                    {!v.headers.one}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowup" 
                                                                                          size="xx-small" 
                                                                                          alternativeText="sort arrow up"/>  
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{!and(!v.isAsc,v.filterName == 'Recent Units')}">
                                                <div class="slds-icon_container" style="cursor: pointer;">  
                                                    {!v.headers.one}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowdown" 
                                                                                          size="xx-small" 
                                                                                          alternativeText="sort arrow up"/>  
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{!v.filterName != 'Recent Units'}">
                                                <div style="cursor: pointer;">{!v.headers.one}</div>
                                            </aura:if>
                                        </span>
                                    </th>
                                    <th class="slds-truncate slds-cell-wrap zindexPrd slds-text-align_center" style="background-color: #947aeb;color: white;border-color: #bfbbba;" aura:id="zvaluePrd">Trending</th>
                                    <th class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #7a9ceb;color: white;border-color: #bfbbba;">
                                        <span onclick="{!c.sortByDrlPreviousSales}">
                                            <aura:if isTrue="{!and(v.isAsc,v.filterName == 'Previous Sales')}">
                                                <div class="slds-icon_container" style="cursor: pointer;">  
                                                    {!v.headers.two}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowup" 
                                                                                          size="xx-small" 
                                                                                          alternativeText="sort arrow up"/>  
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{!and(!v.isAsc,v.filterName == 'Previous Sales')}">
                                                <div class="slds-icon_container" style="cursor: pointer;">  
                                                    {!v.headers.two}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowdown" 
                                                                                          size="xx-small" 
                                                                                          alternativeText="sort arrow up"/>  
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{!v.filterName != 'Previous Sales'}">
                                                <div style="cursor: pointer;">{!v.headers.two}</div>
                                            </aura:if>
                                        </span>
                                    </th>
                                    <th class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #7a9ceb;color: white;border-color: #bfbbba;">
                                        <span onclick="{!c.sortByDrlRecentSales}">
                                            <aura:if isTrue="{!and(v.isAsc,v.filterName == 'Recent Sales')}">
                                                <div class="slds-icon_container" style="cursor: pointer;">  
                                                    {!v.headers.one}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowup" 
                                                                                          size="xx-small" 
                                                                                          alternativeText="sort arrow up"/>  
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{!and(!v.isAsc,v.filterName == 'Recent Sales')}">
                                                <div class="slds-icon_container" style="cursor: pointer;">  
                                                    {!v.headers.one}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowdown" 
                                                                                          size="xx-small" 
                                                                                          alternativeText="sort arrow up"/>  
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{!v.filterName != 'Recent Sales'}">
                                                <div style="cursor: pointer;">{!v.headers.one}</div>
                                            </aura:if>
                                        </span>
                                    </th>
                                    <th class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #7a9ceb;color: white;border-color: #bfbbba;">Trending</th>
                                    <th class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #eb7a96;color: white;border-color: #bfbbba;">
                                        <span onclick="{!c.sortByDrlPreviousTPT}">
                                            <aura:if isTrue="{!and(v.isAsc,v.filterName == 'Previous TPT')}">
                                                <div class="slds-icon_container" style="cursor: pointer;">  
                                                    {!v.headers.two}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowup" 
                                                                                          size="xx-small" 
                                                                                          alternativeText="sort arrow up"/>  
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{!and(!v.isAsc,v.filterName == 'Previous TPT')}">
                                                <div class="slds-icon_container" style="cursor: pointer;">  
                                                    {!v.headers.two}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowdown" 
                                                                                          size="xx-small" 
                                                                                          alternativeText="sort arrow up"/>  
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{!v.filterName != 'Previous TPT'}">
                                                <div style="cursor: pointer;">{!v.headers.two}</div>
                                            </aura:if>
                                        </span>
                                    </th>
                                    <th class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #eb7a96;color: white;border-color: #bfbbba;">
                                        <span onclick="{!c.sortByDrlRecentTPT}">
                                            <aura:if isTrue="{!and(v.isAsc,v.filterName == 'Recent TPT')}">
                                                <div class="slds-icon_container" style="cursor: pointer;">  
                                                    {!v.headers.one}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowup" 
                                                                                          size="xx-small" 
                                                                                          alternativeText="sort arrow up"/>  
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{!and(!v.isAsc,v.filterName == 'Recent TPT')}">
                                                <div class="slds-icon_container" style="cursor: pointer;">  
                                                    {!v.headers.one}&nbsp;<lightning:icon class="whiteIcon" iconName="utility:arrowdown" 
                                                                                          size="xx-small" 
                                                                                          alternativeText="sort arrow up"/>  
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{!v.filterName != 'Recent TPT'}">
                                                <div style="cursor: pointer;">{!v.headers.one}</div>
                                            </aura:if>
                                        </span>
                                    </th>
                                    <th class="slds-truncate slds-cell-wrap zindexPkg slds-text-align_center" style="background-color: #eb7a96;color: white;border-color: #bfbbba;" aura:id="zvaluePkg">Trending</th>
                                    <th class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #fffcbd;border-color: #bfbbba;">{!v.headers.two}</th>
                                    <th class="slds-truncate slds-cell-wrap slds-text-align_center" style="background-color: #fffcbd;border-color: #bfbbba;">{!v.headers.one}</th>
                                    <th class="slds-truncate slds-cell-wrap zindexPkg slds-text-align_center" style="background-color: #fffcbd;border-color: #bfbbba;">Trending</th>
                                </aura:set>                                    
                            </aura:if>
                        </tr>
                        
                        <tr>
                            
                            <!-- <td style="background-color: #f0f0f0; color: #080707;">&nbsp;</td>
                                            <td style="background-color: #f0f0f0; color: #080707;">&nbsp;</td>
                                            <td style="background-color: #f0f0f0; color: #080707;">&nbsp;</td>
                                            <td style="background-color: #f0f0f0; color: #080707;">&nbsp;</td>
                                            <td style="background-color: #f0f0f0; color: #080707;">&nbsp;</td>
                                            <td style="background-color: #f0f0f0; color: #080707;">&nbsp;</td>-->
                            <td colspan="2" class="slds-text-align_left" style="background-color: #f0f0f0; color: #080707; font-size:14px;">
                                <b>
                                    <lightning:button variant="base" label="Summary" title="Summary" onclick="{!c.scrollToSummaryBlock}"/>
                                </b>
                            </td>
                            <aura:if isTrue = "{!v.isINTChecked}">
                                <td class="slds-text-align_center tip2" style="background-color: #f0f0f0; color: #080707; font-size:14px;">
                                    <lightning:icon class="{!v.classV}" 
                                                    iconName="utility:light_bulb" 
                                                    size="x-small"/>
                                    <span>
                                        <lightning:formattedNumber value="{!(v.summaryObj.volumeSummary - v.summaryObj.volumePrevSummary)}" minimumFractionDigits="0" maximumFractionDigits="0"/>
                                    </span>
                                </td>
                                <td class="slds-text-align_center tip1" style="background-color: #f0f0f0; color: #080707; font-size:14px;">
                                    <lightning:icon class="{!v.classS}" 
                                                    iconName="utility:light_bulb" 
                                                    size="x-small"/>
                                    <span>
                                        <lightning:formattedNumber value="{!(v.summaryObj.salesSummary - v.summaryObj.salesPrevSummary)}" style="currency" minimumFractionDigits="0" maximumFractionDigits="0"/>
                                    </span>
                                </td>
                                <aura:set attribute = "else">
                                    <td class="slds-text-align_center tip2" style="background-color: #f0f0f0; color: #080707; font-size:14px;">
                                        <lightning:icon class="{!v.classV}" 
                                                        iconName="utility:light_bulb" 
                                                        size="x-small"/>
                                        <span>
                                            <lightning:formattedNumber value="{!(v.summaryObj.volumeSummary - v.summaryObj.volumePrevSummary)}" minimumFractionDigits="0" maximumFractionDigits="0"/>
                                        </span>
                                    </td>
                                    <td class="slds-text-align_center tip1" style="background-color: #f0f0f0; color: #080707; font-size:14px;">
                                        <lightning:icon class="{!v.classS}" 
                                                        iconName="utility:light_bulb" 
                                                        size="x-small"/>
                                        <span>
                                            <lightning:formattedNumber value="{!(v.summaryObj.salesSummary - v.summaryObj.salesPrevSummary)}" style="currency" minimumFractionDigits="0" maximumFractionDigits="0"/>
                                        </span>
                                    </td>
                                    <td class="slds-text-align_center tip3" style="background-color: #f0f0f0; color: #080707; font-size:14px;">
                                        <lightning:icon class="{!v.classT}" 
                                                        iconName="utility:light_bulb" 
                                                        size="x-small"/>
                                        <span>
                                            <lightning:formattedNumber value="{!(v.summaryObj.tptSummary - v.summaryObj.tptPrevSummary)}" style="currency" minimumFractionDigits="0" maximumFractionDigits="0"/>
                                        </span>
                                    </td>
                                    <td class="slds-text-align_center tip4" style="background-color: #f0f0f0; color: #080707; font-size:14px;">
                                        <lightning:icon class="{!v.classP}"
                                                        iconName="utility:light_bulb" 
                                                        size="x-small"/>
                                        <span>
                                            <lightning:formattedNumber value="{!(v.summaryObj.tptPSummary - v.summaryObj.tptPPrevSummary)}" style="percent-fixed" minimumFractionDigits="0" maximumFractionDigits="2"/>
                                        </span>
                                    </td>
                                </aura:set>
                            </aura:if>
                            <aura:if isTrue = "{!v.isINTChecked}">
                                <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                    <b><lightning:formattedNumber value="{!v.summaryObj.volumePrevSummary}"  minimumFractionDigits="0" maximumFractionDigits="0"/></b>
                                </td>
                                <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                    <b><lightning:formattedNumber value="{!v.summaryObj.volumeSummary}"  minimumFractionDigits="0" maximumFractionDigits="0"/></b>
                                </td>
                                <aura:if isTrue="{!v.isUnitsLessThanZero}">
                                    <td class="slds-text-align_right slds-text-color_error" style="background-color: #f0f0f0;">
                                        <b><lightning:formattedNumber value="{!v.summaryObj.volumeTrendingSummary}" style="percent"  minimumFractionDigits="0" maximumFractionDigits="2"/></b>
                                    </td>
                                    <aura:set attribute="else">
                                        <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                            <b><lightning:formattedNumber value="{!v.summaryObj.volumeTrendingSummary}" style="percent"  minimumFractionDigits="0" maximumFractionDigits="2"/></b>
                                        </td>
                                    </aura:set>
                                </aura:if>
                                <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                    <b><lightning:formattedNumber value="{!v.summaryObj.salesPrevSummary}" style="currency" currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0"/></b>
                                </td>
                                <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                    <b><lightning:formattedNumber value="{!v.summaryObj.salesSummary}" style="currency" currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0"/></b>
                                </td>
                                <aura:if isTrue="{!v.isSalesLessThanZero}">
                                    <td class="slds-text-align_right slds-text-color_error" style="background-color: #f0f0f0;">
                                        <b><lightning:formattedNumber value="{!v.summaryObj.salesTrendingSummary}" style="percent" minimumFractionDigits="0" maximumFractionDigits="2"/></b>
                                    </td>
                                    <aura:set attribute="else">
                                        <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                            <b><lightning:formattedNumber value="{!v.summaryObj.salesTrendingSummary}" style="percent" minimumFractionDigits="0" maximumFractionDigits="2"/></b>
                                        </td>
                                    </aura:set>
                                </aura:if>
                                <aura:set attribute ="else">
                                    <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                        <b><lightning:formattedNumber value="{!v.summaryObj.volumePrevSummary}"  minimumFractionDigits="0" maximumFractionDigits="0"/></b>
                                    </td>
                                    <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                        <b><lightning:formattedNumber value="{!v.summaryObj.volumeSummary}"  minimumFractionDigits="0" maximumFractionDigits="0"/></b>
                                    </td>
                                    <aura:if isTrue="{!v.isUnitsLessThanZero}">
                                        <td class="slds-text-align_right slds-text-color_error" style="background-color: #f0f0f0;">
                                            <b><lightning:formattedNumber value="{!v.summaryObj.volumeTrendingSummary}" style="percent"  minimumFractionDigits="0" maximumFractionDigits="2"/></b>
                                        </td>
                                        <aura:set attribute="else">
                                            <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                                <b><lightning:formattedNumber value="{!v.summaryObj.volumeTrendingSummary}" style="percent"  minimumFractionDigits="0" maximumFractionDigits="2"/></b>
                                            </td>
                                        </aura:set>
                                    </aura:if>
                                    <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                        <b><lightning:formattedNumber value="{!v.summaryObj.salesPrevSummary}" style="currency" currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0"/></b>
                                    </td>
                                    <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                        <b><lightning:formattedNumber value="{!v.summaryObj.salesSummary}" style="currency" currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0"/></b>
                                    </td>
                                    <aura:if isTrue="{!v.isSalesLessThanZero}">
                                        <td class="slds-text-align_right slds-text-color_error" style="background-color: #f0f0f0;">
                                            <b><lightning:formattedNumber value="{!v.summaryObj.salesTrendingSummary}" style="percent" minimumFractionDigits="0" maximumFractionDigits="2"/></b>
                                        </td>
                                        <aura:set attribute="else">
                                            <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                                <b><lightning:formattedNumber value="{!v.summaryObj.salesTrendingSummary}" style="percent" minimumFractionDigits="0" maximumFractionDigits="2"/></b>
                                            </td>
                                        </aura:set>
                                    </aura:if>
                                    <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                        <b><lightning:formattedNumber value="{!v.summaryObj.tptPrevSummary}" style="currency" currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0"/></b>
                                    </td>
                                    <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                        <b><lightning:formattedNumber value="{!v.summaryObj.tptSummary}" style="currency" currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0"/></b>
                                    </td>
                                    <aura:if isTrue="{!v.isTPTLessThanZero}">
                                        <td class="slds-text-align_right slds-text-color_error" style="background-color: #f0f0f0;">
                                            <b><lightning:formattedNumber value="{!v.summaryObj.tptTrendingSummary}" style="percent" minimumFractionDigits="0" maximumFractionDigits="2"/></b>
                                        </td>
                                        <aura:set attribute="else">
                                            <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                                <b><lightning:formattedNumber value="{!v.summaryObj.tptTrendingSummary}" style="percent" minimumFractionDigits="0" maximumFractionDigits="2"/></b>
                                            </td>
                                        </aura:set>
                                    </aura:if>
                                    <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                        <b><lightning:formattedNumber value="{!v.summaryObj.tptPPrevSummary}" style="percent-fixed"  minimumFractionDigits="0" maximumFractionDigits="2"/></b>
                                    </td>
                                    <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                        <b><lightning:formattedNumber value="{!v.summaryObj.tptPSummary}" style="percent-fixed"  minimumFractionDigits="0" maximumFractionDigits="2"/></b>
                                    </td>
                                    <aura:if isTrue="{!v.isTPTPercentLessThanZero}">
                                        <td class="slds-text-align_right slds-text-color_error" style="background-color: #f0f0f0;">
                                            <b><lightning:formattedNumber value="{!v.summaryObj.tptPTrendingSummary}" style="percent-fixed"  minimumFractionDigits="0" maximumFractionDigits="2"/></b>
                                        </td>
                                        <aura:set attribute="else">
                                            <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707;">
                                                <b><lightning:formattedNumber value="{!v.summaryObj.tptPTrendingSummary}" style="percent-fixed"  minimumFractionDigits="0" maximumFractionDigits="2"/></b>
                                            </td>
                                        </aura:set>
                                    </aura:if>
                                </aura:set>
                            </aura:if>
                        </tr>
                        <!--  <aura:if isTrue="{!mapObj.showItem}">
                                    (<lightning:buttonIcon iconName="utility:minimize_window" class="iconCSS" variant="bare" onclick="{! c.handleClick2 }" name="{!mapObj.Vision_Order_Number__c}" alternativeText="Hide Products" title="Hide Products" />)
                                    
                                    <aura:set attribute="else">
                                        (<lightning:buttonIcon iconName="utility:add" variant="bare" class="iconCSS1" onclick="{! c.handleClick1 }" name="{!mapObj.Vision_Order_Number__c}" alternativeText="Show Products" title="Show Products" />)
                                        
                                    </aura:set>
                                </aura:if>-->
                        
                        
                    </thead>
                    <tbody>
                        <aura:iteration items="{!v.resList}" var="item"  indexVar="index">
                            <aura:if isTrue = "{!item.parentAccName != null}">
                                <tr>
                                    <td style="background-color: #f0f0f0; color: #080707; font-size:14px;"></td>
                                    
                                    <td style="background-color: #f0f0f0; color: #080707; font-size:14px;"><b>{!item.parentAccName}</b>
                                        <aura:if isTrue="{!item.showItem}">
                                            (<lightning:buttonIcon iconName="utility:minimize_window" class="iconCSS" variant="bare" onclick="{! c.handleClick2 }" name="{!item.parentAccName}" alternativeText="Hide Child Accounts" title="Hide Child Accounts" />)
                                            
                                            <aura:set attribute="else">
                                                (<lightning:buttonIcon iconName="utility:add" variant="bare" class="iconCSS1" onclick="{! c.handleClick1 }" name="{!item.parentAccName}" alternativeText="Show Child Accounts" title="Show Child Accounts" />)
                                            </aura:set>
                                        </aura:if>
                                    </td>
                                    <td style="background-color: #f0f0f0; color: #080707; font-size:14px;"></td>
                                    <td style="background-color: #f0f0f0; color: #080707; font-size:14px;"></td>
                                    <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707; font-size:14px;">
                                        <b><lightning:formattedNumber value="{!item.UnitsPrev}" minimumFractionDigits="0" maximumFractionDigits="0"></lightning:formattedNumber></b></td>
                                    <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707; font-size:14px;">
                                        <b><lightning:formattedNumber value="{!item.units}" minimumFractionDigits="0" maximumFractionDigits="0"></lightning:formattedNumber></b></td>
                                    <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707; font-size:14px;"><b><lightning:formattedNumber value="{!item.trendingUnits}" style="percent"  minimumFractionDigits="0" maximumFractionDigits="2"/></b></td>
                                    <!--<td style="background-color: #f0f0f0; color: #080707; font-size:14px;">{!item.trendingUnits}</td>-->
                                    
                                    <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707; font-size:14px;">
                                        <b><lightning:formattedNumber value="{!item.SalesDollarPrev}" style="currency" currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0"/></b></td>
                                    <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707; font-size:14px;">
                                        <b><lightning:formattedNumber value="{!item.salesdl}" style="currency" currencyCode="USD" minimumFractionDigits="0" maximumFractionDigits="0"/></b></td>
                                    <td class="slds-text-align_right" style="background-color: #f0f0f0; color: #080707; font-size:14px;"><b><lightning:formattedNumber value="{!item.trendingSales}" style="percent"  minimumFractionDigits="0" maximumFractionDigits="2"/></b></td>
                                    
                                    <!--<td style="background-color: #f0f0f0; color: #080707; font-size:14px;">{!item.trendingSales}</td>-->
                                </tr>
                                
                            </aura:if>
                            <!--<c:Vision_DRL_Sales_ReportChild showItem="{!item.showItem}" comparison="{!v.comparison}" singleRec="{!item}" rowIndex="{!index+1}" parent="{!this}" isINTChecked = "{!v.isINTChecked}" ShowINT="{!v.ShowINT}" isRxChecked ="{!v.isRxChecked}" isSRxChecked ="{!v.isSRxChecked}" isOtcChecked ="{!v.isOtcChecked}"/>-->
                            
                        </aura:iteration>
                        <aura:iteration items="{!v.responseList}" var="item" indexVar="index">
                            <c:Vision_DRL_Sales_ReportChild comparison="{!v.comparison}" singleRec="{!item}" rowIndex="{!index+1}" parent="{!this}" isINTChecked = "{!v.isINTChecked}" ShowINT="{!v.ShowINT}" isRxChecked ="{!v.isRxChecked}" isSRxChecked ="{!v.isSRxChecked}" isOtcChecked ="{!v.isOtcChecked}"/>
                        </aura:iteration>
                    </tbody>
                    
                </table>
            </div>
        </div>
    </div>
</aura:component>